# ì˜¤í”„ë¼ì¸ ì¸í”„ë¼ ì„¤ê³„

> "The best way to predict the future is to create it, but in an air-gapped environment, you must bring the future with you."
>
> â€” íì‡„ë§ ì¸í”„ë¼ ì„¤ê³„ ì›ì¹™

íì‡„ë§(Air-Gapped) í™˜ê²½ì—ì„œ Kubernetesë¥¼ ìš´ì˜í•œë‹¤ëŠ” ê²ƒì€ ë§ˆì¹˜ ë¬´ì¸ë„ì—ì„œ ìê¸‰ìì¡±í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ì™¸ë¶€ ì¸í„°ë„·ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, í•„ìš”í•œ ëª¨ë“  ìì›ì„ ì‚¬ì „ì— ì¤€ë¹„í•˜ê³  ë‚´ë¶€ ì¸í”„ë¼ë¥¼ í†µí•´ ê³µê¸‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì¥ì—ì„œëŠ” í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬, íŒŒì¼ ì„œë²„, ê·¸ë¦¬ê³  Kubespray ì˜¤í”„ë¼ì¸ ì›Œí¬í”Œë¡œìš°ë¥¼ í†µí•´ ì™„ì „íˆ ë…ë¦½ì ì¸ Kubernetes í™˜ê²½ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.

> **ë‚œì´ë„**: ì¤‘ê¸‰~ê³ ê¸‰ (Intermediate to Advanced)
> **ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„
> **ì‚¬ì „ ìš”êµ¬ ì§€ì‹**: [ì»¨í…Œì´ë„ˆ ê¸°ì´ˆ](02-container-fundamentals.md), [Kubernetes ì•„í‚¤í…ì²˜](04-kubernetes-architecture.md)

## ì´ ì¥ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©

- íì‡„ë§ í™˜ê²½ì˜ íŠ¹ì„±ê³¼ ë„ì „ ê³¼ì œ
- í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬(Pull-Through Cache) ì•„í‚¤í…ì²˜
- Nginx ê¸°ë°˜ íŒŒì¼ ì„œë²„ êµ¬ì„±
- containerd ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¯¸ëŸ¬ ì„¤ì •
- Kubespray ë²„ì „ ê´€ë¦¬ ì „ëµ
- ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ ê²€ì¦ ì›Œí¬í”Œë¡œìš°
- ì‹¤ì œ ë°°í¬ í™˜ê²½ì˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

---

## 1. ì˜¤í”„ë¼ì¸ í™˜ê²½ ê°œìš”

### 1.1 íì‡„ë§(Air-Gapped) í™˜ê²½ì´ë€?

**íì‡„ë§(Air-Gapped Network)**ì€ ë³´ì•ˆì„ ìœ„í•´ ì™¸ë¶€ ì¸í„°ë„·ê³¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ëœ ë„¤íŠ¸ì›Œí¬ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. êµ°ì‚¬, ê¸ˆìœµ, ì˜ë£Œ, ì •ë¶€ ê¸°ê´€ ë“± ë†’ì€ ë³´ì•ˆì´ ìš”êµ¬ë˜ëŠ” í™˜ê²½ì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

> **ğŸ“˜ ê°œë… (Concept)**: "Air Gap"ì€ ë¬¸ì ê·¸ëŒ€ë¡œ "ê³µê¸°ë¡œ ëœ í‹ˆ"ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì¼€ì´ë¸”ì´ë‚˜ ë¬´ì„  ì—°ê²° ì—†ì´ ë¬¼ë¦¬ì ìœ¼ë¡œ ì™„ì „íˆ ë¶„ë¦¬ë˜ì–´ ìˆì–´, ì™¸ë¶€ì—ì„œ ì¹¨íˆ¬í•˜ë ¤ë©´ ë¬¼ë¦¬ì ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì¸í„°ë„·                                          â”‚
â”‚                                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚    â”‚  docker.io  â”‚    â”‚  quay.io    â”‚    â”‚  ghcr.io    â”‚                    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                  â”‚                  â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                              â”‚                                               â”‚
â”‚                              âœ— ì ‘ê·¼ ë¶ˆê°€                                     â”‚
â”‚                              â”‚                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        Air Gap (ë¬¼ë¦¬ì  ë¶„ë¦¬)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚                                               â”‚
â”‚                     íì‡„ë§ (Air-Gapped Network)                               â”‚
â”‚                                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚                      ë‚´ë¶€ ì¸í”„ë¼                                  â”‚      â”‚
â”‚    â”‚                                                                  â”‚      â”‚
â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚    â”‚    â”‚  ë ˆí¬ì§€í† ë¦¬  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     Kubernetes í´ëŸ¬ìŠ¤í„°      â”‚ â”‚      â”‚
â”‚    â”‚    â”‚    ì„œë²„     â”‚  ì´ë¯¸ì§€/íŒŒì¼ â”‚                              â”‚ â”‚      â”‚
â”‚    â”‚    â”‚            â”‚    ìš”ì²­     â”‚  CP x3    Worker x20         â”‚ â”‚      â”‚
â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚    â”‚                                                                  â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ì˜¤í”„ë¼ì¸ í™˜ê²½ì˜ ë„ì „ ê³¼ì œ

íì‡„ë§ì—ì„œ Kubernetesë¥¼ ìš´ì˜í•  ë•Œ ì§ë©´í•˜ëŠ” ì£¼ìš” ë„ì „ ê³¼ì œë“¤ì…ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì˜¤í”„ë¼ì¸ í™˜ê²½ì˜ ì£¼ìš” ë„ì „ ê³¼ì œ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ í™•ë³´                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ docker.io, quay.io, ghcr.io, registry.k8s.io ì ‘ê·¼ ë¶ˆê°€            â”‚  â”‚
â”‚  â”‚  â€¢ í•„ìš”í•œ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì‚¬ì „ì— í™•ë³´í•´ì•¼ í•¨                             â”‚  â”‚
â”‚  â”‚  â€¢ ì´ë¯¸ì§€ ë²„ì „ ê´€ë¦¬ ë° ë™ê¸°í™” í•„ìš”                                    â”‚  â”‚
â”‚  â”‚  â€¢ ë©€í‹° ì•„í‚¤í…ì²˜(amd64, arm64) ì§€ì› ê³ ë ¤                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  2. ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ë³´                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ kubeadm, kubelet, kubectl                                          â”‚  â”‚
â”‚  â”‚  â€¢ containerd, runc, crictl                                           â”‚  â”‚
â”‚  â”‚  â€¢ etcd, cni-plugins, helm                                            â”‚  â”‚
â”‚  â”‚  â€¢ ê° ì»´í¬ë„ŒíŠ¸ë³„ ë²„ì „ í˜¸í™˜ì„± ê²€ì¦ í•„ìš”                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  3. ë²„ì „ í˜¸í™˜ì„± ê´€ë¦¬                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ Kubernetes â†” Kubespray ë²„ì „ ë§¤ì¹­                                   â”‚  â”‚
â”‚  â”‚  â€¢ Kubernetes â†” Cilium ë²„ì „ í˜¸í™˜ì„±                                    â”‚  â”‚
â”‚  â”‚  â€¢ ì»¤ë„ ë²„ì „ ìš”êµ¬ì‚¬í•­ (netkit: 6.7+)                                  â”‚  â”‚
â”‚  â”‚  â€¢ ë²„ì „ ë§¤íŠ¸ë¦­ìŠ¤ ë¬¸ì„œí™” í•„ìˆ˜                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  4. ì—…ë°ì´íŠ¸ ë° ìœ ì§€ë³´ìˆ˜                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ ë³´ì•ˆ íŒ¨ì¹˜ ì ìš© ì ˆì°¨ ìˆ˜ë¦½                                           â”‚  â”‚
â”‚  â”‚  â€¢ ìƒˆ ë²„ì „ ë„ì… ì‹œ ë¦¬ì†ŒìŠ¤ ì‚¬ì „ í™•ë³´                                   â”‚  â”‚
â”‚  â”‚  â€¢ ë¡¤ë°± ì „ëµ ë° í…ŒìŠ¤íŠ¸                                                â”‚  â”‚
â”‚  â”‚  â€¢ ë³€ê²½ ê´€ë¦¬ í”„ë¡œì„¸ìŠ¤ í•„ìš”                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **âš ï¸ ì£¼ì˜ (Warning)**: ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œ ê°€ì¥ í”í•œ ì‹¤ìˆ˜ëŠ” "í•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ëˆ„ë½í•˜ëŠ” ê²ƒ"ì…ë‹ˆë‹¤. ë°°í¬ ì¤‘ì— ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ Podê°€ ì˜ì›íˆ `ImagePullBackOff` ìƒíƒœì— ë¨¸ë¬¼ê²Œ ë©ë‹ˆë‹¤.

### 1.3 í•´ê²° ì „ëµ: 3ë‹¨ê³„ ì „ì†¡ ëª¨ë¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ì˜¤í”„ë¼ì¸ ë°°í¬ ì „ëµ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                      â”‚    ì˜¨ë¼ì¸ í™˜ê²½ (ì¤€ë¹„)    â”‚                            â”‚
â”‚                      â”‚                         â”‚                            â”‚
â”‚                      â”‚  â€¢ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ       â”‚                            â”‚
â”‚                      â”‚  â€¢ ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ     â”‚                            â”‚
â”‚                      â”‚  â€¢ Helm Chart ë‹¤ìš´ë¡œë“œ   â”‚                            â”‚
â”‚                      â”‚  â€¢ ì†ŒìŠ¤ ì½”ë“œ ì•„ì¹´ì´ë¸Œ    â”‚                            â”‚
â”‚                      â”‚  â€¢ SHA256 ì²´í¬ì„¬ ìƒì„±    â”‚                            â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â”‚ USB/DVD/ë°ì´í„° ë‹¤ì´ì˜¤ë“œ                   â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â–¼                                          â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                      â”‚     DMZ (ì¤‘ê°„ ì§€ëŒ€)      â”‚                            â”‚
â”‚                      â”‚                         â”‚                            â”‚
â”‚                      â”‚  â€¢ ë°”ì´ëŸ¬ìŠ¤ ê²€ì‚¬        â”‚                            â”‚
â”‚                      â”‚  â€¢ ë¬´ê²°ì„± ê²€ì¦ (ì²´í¬ì„¬)  â”‚                            â”‚
â”‚                      â”‚  â€¢ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤        â”‚                            â”‚
â”‚                      â”‚  â€¢ ê²©ë¦¬ í…ŒìŠ¤íŠ¸          â”‚                            â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â”‚ ìŠ¹ì¸ëœ ìë£Œë§Œ ì´ë™                        â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â–¼                                          â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                      â”‚   íì‡„ë§ (ë°°í¬ í™˜ê²½)     â”‚                            â”‚
â”‚                      â”‚                         â”‚                            â”‚
â”‚                      â”‚  â€¢ ë ˆí¬ì§€í† ë¦¬ ì„œë²„ êµ¬ì¶•  â”‚                            â”‚
â”‚                      â”‚  â€¢ ì´ë¯¸ì§€/íŒŒì¼ ì—…ë¡œë“œ    â”‚                            â”‚
â”‚                      â”‚  â€¢ í´ëŸ¬ìŠ¤í„° ë°°í¬        â”‚                            â”‚
â”‚                      â”‚  â€¢ ìš´ì˜ ë° ëª¨ë‹ˆí„°ë§     â”‚                            â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ’¡ íŒ (Tip)**: ëŒ€ê·œëª¨ ì¡°ì§ì—ì„œëŠ” "ë°ì´í„° ë‹¤ì´ì˜¤ë“œ(Data Diode)"ë¼ëŠ” ë‹¨ë°©í–¥ ë„¤íŠ¸ì›Œí¬ ì¥ë¹„ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì´ëŠ” ë¬¼ë¦¬ì ìœ¼ë¡œ í•œ ë°©í–¥ìœ¼ë¡œë§Œ ë°ì´í„°ê°€ íë¥¼ ìˆ˜ ìˆì–´ ì—­ë°©í–¥ ì¹¨íˆ¬ë¥¼ ì›ì²œ ì°¨ë‹¨í•©ë‹ˆë‹¤.

### ì„¹ì…˜ ìš”ì•½

íì‡„ë§ í™˜ê²½ì˜ í•µì‹¬ì€ **ìê¸‰ìì¡±**ì…ë‹ˆë‹¤. ì™¸ë¶€ ì˜ì¡´ì„±ì„ ì™„ì „íˆ ë‚´ë¶€ ì¸í”„ë¼ë¡œ ëŒ€ì²´í•´ì•¼ í•˜ë©°, ì´ë¥¼ ìœ„í•´ ë‹¤ìŒ ì¥ì—ì„œ í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì™€ íŒŒì¼ ì„œë²„ êµ¬ì„±ì„ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.

---

## 2. ì•„í‚¤í…ì²˜ ì„¤ê³„

### 2.1 ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           íì‡„ë§ (Air-Gapped Network)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Ansible ì»¨íŠ¸ë¡¤ëŸ¬  â”‚       â”‚           Kubernetes í´ëŸ¬ìŠ¤í„°         â”‚       â”‚
â”‚  â”‚                  â”‚  SSH  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚  â”‚  - Kubespray     â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”‚      Control Plane (x3)       â”‚  â”‚       â”‚
â”‚  â”‚  - Python venv   â”‚       â”‚  â”‚   kube-apiserver + etcd       â”‚  â”‚       â”‚
â”‚  â”‚  - Ansible       â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚           â”‚                 â”‚  â”‚       Worker Nodes (x20)       â”‚  â”‚       â”‚
â”‚           â”‚                 â”‚  â”‚   kubelet + containerd + Ciliumâ”‚  â”‚       â”‚
â”‚           â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚           â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                                    â–²                           â”‚
â”‚           â–¼                                    â”‚ Pull                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 ë ˆí¬ì§€í† ë¦¬ ì„œë²„ (repo.example.com)                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚    í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬       â”‚  â”‚      íŒŒì¼ ì„œë²„ (Nginx)     â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                           â”‚  â”‚                           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  :5000 â”€â–º docker.io      â”‚  â”‚  :8080 â”€â–º ë°”ì´ë„ˆë¦¬ íŒŒì¼    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  :5001 â”€â–º quay.io        â”‚  â”‚                           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  :5002 â”€â–º ghcr.io        â”‚  â”‚   /v2.29.1/               â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  :5003 â”€â–º registry.k8s.ioâ”‚  â”‚     dl.k8s.io/...         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                           â”‚  â”‚     github.com/...        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  registry:2 ì»¨í…Œì´ë„ˆ      â”‚  â”‚                           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  (Podmanìœ¼ë¡œ ì‹¤í–‰)        â”‚  â”‚                           â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ë„¤íŠ¸ì›Œí¬ ì •ë³´:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬:    192.168.108.0/24                                 â”‚   â”‚
â”‚  â”‚  ë ˆí¬ì§€í† ë¦¬ ì„œë²„:  192.168.108.201                                  â”‚   â”‚
â”‚  â”‚  Control Plane:   192.168.108.11-13                                â”‚   â”‚
â”‚  â”‚  Worker Nodes:    192.168.108.21-40                                â”‚   â”‚
â”‚  â”‚  Pod CIDR:        10.200.0.0/16                                    â”‚   â”‚
â”‚  â”‚  Service CIDR:    10.201.0.0/18                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“˜ ê°œë… (Concept)**: ë ˆí¬ì§€í† ë¦¬ ì„œë²„ëŠ” íì‡„ë§ì˜ "ë¬¼ë¥˜ í—ˆë¸Œ"ì…ë‹ˆë‹¤. ëª¨ë“  ë…¸ë“œê°€ ì´ ì„œë²„ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë°”ì´ë„ˆë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ ì„œë²„ê°€ ë‹¤ìš´ë˜ë©´ í´ëŸ¬ìŠ¤í„° í™•ì¥ì´ë‚˜ Pod ì¬ì‹œì‘ì´ ë¶ˆê°€ëŠ¥í•´ì§€ë¯€ë¡œ ê³ ê°€ìš©ì„± ì„¤ê³„ê°€ í•„ìš”í•©ë‹ˆë‹¤.

### 2.2 ë ˆí¬ì§€í† ë¦¬ ì„œë²„ ìƒì„¸ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë ˆí¬ì§€í† ë¦¬ ì„œë²„ ìƒì„¸ êµ¬ì„±                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ì„œë²„: 192.168.108.201                                                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Podman Containers                               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  registry-dockerio   (Port 5000)                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Image: registry:2                                        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Proxy Target: docker.io (registry-1.docker.io)           â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Volume: /var/lib/registry/dockerio                       â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  registry-quayio     (Port 5001)                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Image: registry:2                                        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Proxy Target: quay.io                                    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Volume: /var/lib/registry/quayio                         â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  ì£¼ìš” ì´ë¯¸ì§€: cilium/cilium, cilium/operator-generic          â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  registry-ghcrio     (Port 5002)                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Image: registry:2                                        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Proxy Target: ghcr.io                                    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Volume: /var/lib/registry/ghcrio                         â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  registry-k8sio      (Port 5003)                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Image: registry:2                                        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Proxy Target: registry.k8s.io                            â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Volume: /var/lib/registry/k8sio                          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  ì£¼ìš” ì´ë¯¸ì§€: kube-apiserver, etcd, coredns, pause            â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Nginx File Server                               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  Port 8080                                                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€ Document Root: /var/www/files                            â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  URL ë§¤í•‘:                                                    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  https://dl.k8s.io/...    â†’ /files/v2.29.1/dl.k8s.io/...    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  https://github.com/...   â†’ /files/v2.29.1/github.com/...   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  https://storage.goog...  â†’ /files/v2.29.1/storage.goog...  â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ” ì‹¬í™” í•™ìŠµ (Deep Dive)**: ì™œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ 4ê°œë¡œ ë¶„ë¦¬í• ê¹Œìš”? ê° upstream ë ˆì§€ìŠ¤íŠ¸ë¦¬(docker.io, quay.io ë“±)ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì¸ì¦ ì²´ê³„ì™€ API íŠ¹ì„±ì„ ê°€ì§‘ë‹ˆë‹¤. ë¶„ë¦¬í•˜ë©´ ì„¤ì •ê³¼ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì´ ì‰¬ì›Œì§€ê³ , í•œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì˜ ë¬¸ì œê°€ ë‹¤ë¥¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

### 2.3 ì´ë¯¸ì§€ Pull íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì´ë¯¸ì§€ Pull íë¦„ ìƒì„¸                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  kubeletì´ Pod ìƒì„± ì‹œ:                                                      â”‚
â”‚                                                                             â”‚
â”‚  1. ImagePullPolicy í™•ì¸                                                     â”‚
â”‚     â”‚  â€¢ Always: ë§¤ë²ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ í™•ì¸                                        â”‚
â”‚     â”‚  â€¢ IfNotPresent: ë¡œì»¬ì— ì—†ì„ ë•Œë§Œ Pull                                â”‚
â”‚     â”‚  â€¢ Never: ë¡œì»¬ ì´ë¯¸ì§€ë§Œ ì‚¬ìš©                                          â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  2. containerdê°€ ì´ë¯¸ì§€ ìš”ì²­                                                 â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”‚ quay.io/cilium/cilium:v1.18.5                                        â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  3. containerd hosts.toml ì„¤ì • í™•ì¸                                          â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”‚ /etc/containerd/certs.d/quay.io/hosts.toml:                          â”‚
â”‚     â”‚   server = "https://quay.io"                                         â”‚
â”‚     â”‚   [host."http://repo.example.com:5001"]                              â”‚
â”‚     â”‚     capabilities = ["pull", "resolve"]                               â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  4. í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¡œ ìš”ì²­ ì „ë‹¬                                            â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”‚ GET /v2/cilium/cilium/manifests/v1.18.5                              â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  5. í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ìºì‹œ í™•ì¸                                              â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€â”€â”€ ìºì‹œ ìˆìŒ (HIT) â”€â”€â–º ì¦‰ì‹œ ë°˜í™˜                                      â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â””â”€â”€â”€ ìºì‹œ ì—†ìŒ (MISS)                                                   â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â”œâ”€ ì˜¨ë¼ì¸ í™˜ê²½: upstreamì—ì„œ Pull â†’ ìºì‹œ â†’ ë°˜í™˜                    â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â””â”€ ì˜¤í”„ë¼ì¸ í™˜ê²½: 404 ì—ëŸ¬ (ì‚¬ì „ ìºì‹± í•„ìš”!)                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **âš ï¸ ì£¼ì˜ (Warning)**: ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œ ìºì‹œë˜ì§€ ì•Šì€ ì´ë¯¸ì§€ë¥¼ ìš”ì²­í•˜ë©´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ê°€ upstreamì— ì ‘ê·¼ì„ ì‹œë„í•˜ì§€ë§Œ ì‹¤íŒ¨í•©ë‹ˆë‹¤. ë°˜ë“œì‹œ **ì˜¨ë¼ì¸ í™˜ê²½ì—ì„œ ëª¨ë“  í•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ì „ ìºì‹±**í•´ì•¼ í•©ë‹ˆë‹¤.

### ì„¹ì…˜ ìš”ì•½

ë ˆí¬ì§€í† ë¦¬ ì„œë²„ëŠ” ë‘ ê°€ì§€ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:
1. **í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬**: 4ê°œì˜ registry:2 ì»¨í…Œì´ë„ˆë¡œ ê° upstream ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ë¯¸ëŸ¬ë§
2. **íŒŒì¼ ì„œë²„**: Nginxë¡œ Kubernetes ë°”ì´ë„ˆë¦¬ë¥¼ ì œê³µ

---

## 3. í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ êµ¬ì„±

### 3.1 Registry:2 Pull-Through Cache ì´í•´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Registry:2 Pull-Through Cache ë™ì‘                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Pull-Through Cache (í”„ë¡ì‹œ ìºì‹œ) ë™ì‘ ë°©ì‹:                                 â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Client â”€â”€â”€â”€â–º Registry:2 (Proxy) â”€â”€â”€â”€â–º Upstream Registry            â”‚   â”‚
â”‚  â”‚    â”‚              â”‚                          â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚              â”‚                          â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚    â”‚   ë¡œì»¬ ìºì‹œ í™•ì¸   â”‚               â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚              â”‚                          â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                    â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚         â”‚         â”‚                    â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚    ìºì‹œ ìˆìŒ   ìºì‹œ ì—†ìŒ                â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚         â”‚         â”‚                    â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚         â–¼         â–¼                    â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚    ì¦‰ì‹œ ë°˜í™˜   Upstream Pull â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚   â”‚
â”‚  â”‚    â”‚                    â”‚                    â”‚                       â”‚   â”‚
â”‚  â”‚    â”‚              ì €ì¥ & ë°˜í™˜ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚  â”‚    â”‚                    â”‚                                            â”‚   â”‚
â”‚  â”‚    â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“˜ ê°œë… (Concept)**: Pull-Through CacheëŠ” "íˆ¬ëª… í”„ë¡ì‹œ"ì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ìš”ì²­í•˜ì§€ë§Œ, ë ˆì§€ìŠ¤íŠ¸ë¦¬ëŠ” ë¡œì»¬ ìºì‹œê°€ ì—†ì„ ë•Œ ìë™ìœ¼ë¡œ upstreamì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

### 3.2 ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„¤ì • íŒŒì¼

```yaml
# /etc/registry/config-dockerio.yml
version: 0.1
log:
  level: info
  formatter: text
storage:
  filesystem:
    rootdirectory: /var/lib/registry
  delete:
    enabled: true
  cache:
    blobdescriptor: inmemory
http:
  addr: :5000
  headers:
    X-Content-Type-Options: [nosniff]
proxy:
  remoteurl: https://registry-1.docker.io
  # Docker Hub ì¸ì¦ (Rate Limit ìš°íšŒìš©)
  # username: <docker-hub-username>
  # password: <docker-hub-token>
```

```yaml
# /etc/registry/config-quayio.yml
version: 0.1
log:
  level: info
storage:
  filesystem:
    rootdirectory: /var/lib/registry
  cache:
    blobdescriptor: inmemory
http:
  addr: :5000
proxy:
  remoteurl: https://quay.io
```

```yaml
# /etc/registry/config-k8sio.yml
version: 0.1
log:
  level: info
storage:
  filesystem:
    rootdirectory: /var/lib/registry
  cache:
    blobdescriptor: inmemory
http:
  addr: :5000
proxy:
  remoteurl: https://registry.k8s.io
```

> **ğŸ’¡ íŒ (Tip)**: Docker HubëŠ” ìµëª… ì‚¬ìš©ìì—ê²Œ Rate Limit(6ì‹œê°„ë‹¹ 100íšŒ)ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ì˜¨ë¼ì¸ í™˜ê²½ì—ì„œ ëŒ€ëŸ‰ ìºì‹± ì‹œ ì¸ì¦ ì •ë³´ë¥¼ ì„¤ì •í•˜ë©´ Rate Limitì„ ì™„í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3.3 Podmanìœ¼ë¡œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì‹¤í–‰

```bash
#!/bin/bash
# setup-registries.sh

REGISTRY_IMAGE="docker.io/library/registry:2"
BASE_DIR="/var/lib/registry"
CONFIG_DIR="/etc/registry"

# ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p ${BASE_DIR}/{dockerio,quayio,ghcrio,k8sio}
mkdir -p ${CONFIG_DIR}

# docker.io í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬
podman run -d \
  --name registry-dockerio \
  --restart always \
  -p 5000:5000 \
  -v ${CONFIG_DIR}/config-dockerio.yml:/etc/docker/registry/config.yml:ro \
  -v ${BASE_DIR}/dockerio:/var/lib/registry \
  ${REGISTRY_IMAGE}

# quay.io í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬
podman run -d \
  --name registry-quayio \
  --restart always \
  -p 5001:5000 \
  -v ${CONFIG_DIR}/config-quayio.yml:/etc/docker/registry/config.yml:ro \
  -v ${BASE_DIR}/quayio:/var/lib/registry \
  ${REGISTRY_IMAGE}

# ghcr.io í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬
podman run -d \
  --name registry-ghcrio \
  --restart always \
  -p 5002:5000 \
  -v ${CONFIG_DIR}/config-ghcrio.yml:/etc/docker/registry/config.yml:ro \
  -v ${BASE_DIR}/ghcrio:/var/lib/registry \
  ${REGISTRY_IMAGE}

# registry.k8s.io í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬
podman run -d \
  --name registry-k8sio \
  --restart always \
  -p 5003:5000 \
  -v ${CONFIG_DIR}/config-k8sio.yml:/etc/docker/registry/config.yml:ro \
  -v ${BASE_DIR}/k8sio:/var/lib/registry \
  ${REGISTRY_IMAGE}

echo "Registry containers started:"
echo "  docker.io       -> :5000"
echo "  quay.io         -> :5001"
echo "  ghcr.io         -> :5002"
echo "  registry.k8s.io -> :5003"

# systemd ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ (ë¶€íŒ… ì‹œ ìë™ ì‹œì‘)
podman generate systemd --new --files --name registry-dockerio
podman generate systemd --new --files --name registry-quayio
podman generate systemd --new --files --name registry-ghcrio
podman generate systemd --new --files --name registry-k8sio

mv container-registry-*.service /etc/systemd/system/
systemctl daemon-reload
systemctl enable container-registry-{dockerio,quayio,ghcrio,k8sio}
```

### 3.4 í•„ìˆ˜ ì´ë¯¸ì§€ ëª©ë¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Kubernetes í•µì‹¬ ì´ë¯¸ì§€                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  registry.k8s.io (Port 5003):                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  kube-apiserver:v1.33.7                                               â”‚  â”‚
â”‚  â”‚  kube-controller-manager:v1.33.7                                      â”‚  â”‚
â”‚  â”‚  kube-scheduler:v1.33.7                                               â”‚  â”‚
â”‚  â”‚  kube-proxy:v1.33.7                                                   â”‚  â”‚
â”‚  â”‚  etcd:3.5.17-0                                                        â”‚  â”‚
â”‚  â”‚  coredns/coredns:v1.12.0                                              â”‚  â”‚
â”‚  â”‚  pause:3.10                                                           â”‚  â”‚
â”‚  â”‚  dns/k8s-dns-node-cache:1.24.0                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  quay.io (Port 5001):                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  cilium/cilium:v1.18.5                                                â”‚  â”‚
â”‚  â”‚  cilium/operator-generic:v1.18.5                                      â”‚  â”‚
â”‚  â”‚  cilium/hubble-relay:v1.18.5                                          â”‚  â”‚
â”‚  â”‚  cilium/hubble-ui:v0.13.1                                             â”‚  â”‚
â”‚  â”‚  cilium/hubble-ui-backend:v0.13.1                                     â”‚  â”‚
â”‚  â”‚  cilium/certgen:v0.2.2                                                â”‚  â”‚
â”‚  â”‚  cilium/cilium-envoy:v1.31.5 (L7 ì •ì±… ì‚¬ìš© ì‹œ)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  docker.io (Port 5000):                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  library/registry:2 (ë ˆí¬ì§€í† ë¦¬ ì„œë²„ ìì²´ìš©)                           â”‚  â”‚
â”‚  â”‚  (ì‚¬ìš©ì ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¯¸ì§€ë“¤)                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ghcr.io (Port 5002):                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  k8snetworkplumbingwg/multus-cni:v4.1.4 (ì„ íƒì )                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“ ì˜ˆì œ (Example)**: ì´ë¯¸ì§€ ëª©ë¡ì€ Kubespray ë²„ì „ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤. ì •í™•í•œ ëª©ë¡ì€ Kubesprayì˜ `roles/download/defaults/main/main.yml` íŒŒì¼ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3.5 ì´ë¯¸ì§€ ì‚¬ì „ ìºì‹± ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# pre-cache-images.sh
# ì˜¨ë¼ì¸ í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ì—¬ ì´ë¯¸ì§€ ìºì‹±

REPO_HOST="repo.example.com"
KUBE_VERSION="v1.33.7"
CILIUM_VERSION="v1.18.5"

echo "=== Kubernetes Core Images ==="
K8S_IMAGES=(
  "kube-apiserver:${KUBE_VERSION}"
  "kube-controller-manager:${KUBE_VERSION}"
  "kube-scheduler:${KUBE_VERSION}"
  "kube-proxy:${KUBE_VERSION}"
  "etcd:3.5.17-0"
  "coredns/coredns:v1.12.0"
  "pause:3.10"
  "dns/k8s-dns-node-cache:1.24.0"
)

for img in "${K8S_IMAGES[@]}"; do
  echo "Caching: registry.k8s.io/${img}"
  # í”„ë¡ì‹œë¥¼ í†µí•´ Pullí•˜ë©´ ìë™ìœ¼ë¡œ ìºì‹œë¨
  podman pull --tls-verify=false ${REPO_HOST}:5003/${img}
done

echo "=== Cilium Images ==="
CILIUM_IMAGES=(
  "cilium/cilium:${CILIUM_VERSION}"
  "cilium/operator-generic:${CILIUM_VERSION}"
  "cilium/hubble-relay:${CILIUM_VERSION}"
  "cilium/hubble-ui:v0.13.1"
  "cilium/hubble-ui-backend:v0.13.1"
  "cilium/certgen:v0.2.2"
)

for img in "${CILIUM_IMAGES[@]}"; do
  echo "Caching: quay.io/${img}"
  podman pull --tls-verify=false ${REPO_HOST}:5001/${img}
done

echo "=== Verification ==="
# ìºì‹œëœ ì´ë¯¸ì§€ í™•ì¸
curl -s http://${REPO_HOST}:5003/v2/_catalog | jq
curl -s http://${REPO_HOST}:5001/v2/_catalog | jq

echo "Image caching completed."
```

### ì„¹ì…˜ ìš”ì•½

í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ êµ¬ì„±ì˜ í•µì‹¬:
1. ê° upstream ë ˆì§€ìŠ¤íŠ¸ë¦¬ë³„ë¡œ ë³„ë„ì˜ registry:2 ì»¨í…Œì´ë„ˆ ìš´ì˜
2. ì˜¨ë¼ì¸ í™˜ê²½ì—ì„œ í•„ìš”í•œ ëª¨ë“  ì´ë¯¸ì§€ ì‚¬ì „ ìºì‹±
3. systemdë¡œ ìë™ ì‹œì‘ ì„¤ì •

---

## 4. íŒŒì¼ ì„œë²„ êµ¬ì„±

### 4.1 Nginx ì„¤ì •

```nginx
# /etc/nginx/conf.d/files.conf
server {
    listen 8080;
    server_name repo.example.com;
    
    # íŒŒì¼ ì„œë²„ ë£¨íŠ¸ ë””ë ‰í† ë¦¬
    root /var/www/files;
    
    # ë””ë ‰í† ë¦¬ ëª©ë¡ í‘œì‹œ (ë””ë²„ê¹…ìš©)
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;
    
    # ë¡œê·¸ ì„¤ì •
    access_log /var/log/nginx/files-access.log;
    error_log /var/log/nginx/files-error.log;
    
    # í° íŒŒì¼ ì „ì†¡ ìµœì í™”
    client_max_body_size 0;
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    
    # ìºì‹œ í—¤ë”
    location / {
        add_header Cache-Control "public, max-age=86400";
        add_header Access-Control-Allow-Origin *;
    }
    
    # ë°”ì´ë„ˆë¦¬ íŒŒì¼ MIME íƒ€ì…
    types {
        application/octet-stream bin;
        application/x-tar tar;
        application/gzip gz;
        application/x-gzip tgz;
    }
    
    default_type application/octet-stream;
}
```

> **ğŸ’¡ íŒ (Tip)**: `autoindex on` ì„¤ì •ì€ ë””ë²„ê¹…ì— ìœ ìš©í•˜ì§€ë§Œ, ë³´ì•ˆì´ ì¤‘ìš”í•œ í™˜ê²½ì—ì„œëŠ” ë¹„í™œì„±í™”í•˜ì„¸ìš”. ì–´ë–¤ íŒŒì¼ì´ ì„œë²„ì— ìˆëŠ”ì§€ ì™¸ë¶€ì—ì„œ ì•Œ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

### 4.2 íŒŒì¼ ì„œë²„ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        íŒŒì¼ ì„œë²„ ë””ë ‰í† ë¦¬ êµ¬ì¡°                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  /var/www/files/                                                            â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€ v2.29.1/                          # Kubespray v2.29.1ìš© íŒŒì¼           â”‚
â”‚  â”‚   â”‚                                                                      â”‚
â”‚  â”‚   â”œâ”€â”€ dl.k8s.io/                                                         â”‚
â”‚  â”‚   â”‚   â””â”€â”€ release/                                                       â”‚
â”‚  â”‚   â”‚       â””â”€â”€ v1.33.7/                                                   â”‚
â”‚  â”‚   â”‚           â””â”€â”€ bin/                                                   â”‚
â”‚  â”‚   â”‚               â””â”€â”€ linux/                                             â”‚
â”‚  â”‚   â”‚                   â””â”€â”€ amd64/                                         â”‚
â”‚  â”‚   â”‚                       â”œâ”€â”€ kubeadm     (47 MB)                       â”‚
â”‚  â”‚   â”‚                       â”œâ”€â”€ kubelet     (109 MB)                      â”‚
â”‚  â”‚   â”‚                       â””â”€â”€ kubectl     (51 MB)                       â”‚
â”‚  â”‚   â”‚                                                                      â”‚
â”‚  â”‚   â”œâ”€â”€ github.com/                                                        â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ etcd-io/etcd/releases/download/v3.5.17/                       â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ etcd-v3.5.17-linux-amd64.tar.gz                          â”‚
â”‚  â”‚   â”‚   â”‚                                                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ containerd/containerd/releases/download/v2.0.2/               â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ containerd-2.0.2-linux-amd64.tar.gz                      â”‚
â”‚  â”‚   â”‚   â”‚                                                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ opencontainers/runc/releases/download/v1.2.4/                 â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ runc.amd64                                                â”‚
â”‚  â”‚   â”‚   â”‚                                                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ containernetworking/plugins/releases/download/v1.6.2/         â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ cni-plugins-linux-amd64-v1.6.2.tgz                       â”‚
â”‚  â”‚   â”‚   â”‚                                                                  â”‚
â”‚  â”‚   â”‚   â””â”€â”€ kubernetes-sigs/cri-tools/releases/download/v1.32.0/          â”‚
â”‚  â”‚   â”‚       â””â”€â”€ crictl-v1.32.0-linux-amd64.tar.gz                        â”‚
â”‚  â”‚   â”‚                                                                      â”‚
â”‚  â”‚   â””â”€â”€ storage.googleapis.com/                                            â”‚
â”‚  â”‚       â””â”€â”€ kubernetes-release/release/v1.33.7/bin/linux/amd64/           â”‚
â”‚  â”‚           â””â”€â”€ kubeadm                                                    â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â””â”€â”€ v2.28.1/                          # Kubespray v2.28.1ìš© íŒŒì¼           â”‚
â”‚      â””â”€â”€ ...                           # ë™ì¼í•œ êµ¬ì¡°                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“˜ ê°œë… (Concept)**: ë””ë ‰í† ë¦¬ êµ¬ì¡°ê°€ ì›ë³¸ URLì˜ ê²½ë¡œë¥¼ ë¯¸ëŸ¬ë§í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `https://dl.k8s.io/release/v1.33.7/bin/linux/amd64/kubeadm`ì€ `/var/www/files/v2.29.1/dl.k8s.io/release/v1.33.7/bin/linux/amd64/kubeadm`ì— ì €ì¥ë©ë‹ˆë‹¤.

### 4.3 ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# download-binaries.sh
# ì˜¨ë¼ì¸ í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ì—¬ ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ

set -e

KUBESPRAY_VERSION="v2.29.1"
KUBE_VERSION="v1.33.7"
OUTPUT_DIR="/var/www/files/${KUBESPRAY_VERSION}"

# ë²„ì „ ì •ë³´ (Kubespray ë²„ì „ì— ë§ì¶¤)
ETCD_VERSION="v3.5.17"
CONTAINERD_VERSION="2.0.2"
RUNC_VERSION="v1.2.4"
CNI_VERSION="v1.6.2"
CRICTL_VERSION="v1.32.0"

mkdir -p ${OUTPUT_DIR}

echo "=== Kubernetes ë°”ì´ë„ˆë¦¬ ==="
K8S_DIR="${OUTPUT_DIR}/dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64"
mkdir -p ${K8S_DIR}
cd ${K8S_DIR}

for binary in kubeadm kubelet kubectl; do
  echo "Downloading: ${binary}"
  curl -LO "https://dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/${binary}"
  chmod +x ${binary}
  sha256sum ${binary} > ${binary}.sha256
done

echo "=== etcd ==="
ETCD_DIR="${OUTPUT_DIR}/github.com/etcd-io/etcd/releases/download/${ETCD_VERSION}"
mkdir -p ${ETCD_DIR}
curl -L "https://github.com/etcd-io/etcd/releases/download/${ETCD_VERSION}/etcd-${ETCD_VERSION}-linux-amd64.tar.gz" \
  -o "${ETCD_DIR}/etcd-${ETCD_VERSION}-linux-amd64.tar.gz"

echo "=== containerd ==="
CONTAINERD_DIR="${OUTPUT_DIR}/github.com/containerd/containerd/releases/download/v${CONTAINERD_VERSION}"
mkdir -p ${CONTAINERD_DIR}
curl -L "https://github.com/containerd/containerd/releases/download/v${CONTAINERD_VERSION}/containerd-${CONTAINERD_VERSION}-linux-amd64.tar.gz" \
  -o "${CONTAINERD_DIR}/containerd-${CONTAINERD_VERSION}-linux-amd64.tar.gz"

echo "=== runc ==="
RUNC_DIR="${OUTPUT_DIR}/github.com/opencontainers/runc/releases/download/${RUNC_VERSION}"
mkdir -p ${RUNC_DIR}
curl -L "https://github.com/opencontainers/runc/releases/download/${RUNC_VERSION}/runc.amd64" \
  -o "${RUNC_DIR}/runc.amd64"

echo "=== CNI plugins ==="
CNI_DIR="${OUTPUT_DIR}/github.com/containernetworking/plugins/releases/download/${CNI_VERSION}"
mkdir -p ${CNI_DIR}
curl -L "https://github.com/containernetworking/plugins/releases/download/${CNI_VERSION}/cni-plugins-linux-amd64-${CNI_VERSION}.tgz" \
  -o "${CNI_DIR}/cni-plugins-linux-amd64-${CNI_VERSION}.tgz"

echo "=== crictl ==="
CRICTL_DIR="${OUTPUT_DIR}/github.com/kubernetes-sigs/cri-tools/releases/download/${CRICTL_VERSION}"
mkdir -p ${CRICTL_DIR}
curl -L "https://github.com/kubernetes-sigs/cri-tools/releases/download/${CRICTL_VERSION}/crictl-${CRICTL_VERSION}-linux-amd64.tar.gz" \
  -o "${CRICTL_DIR}/crictl-${CRICTL_VERSION}-linux-amd64.tar.gz"

echo "=== ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ==="
find ${OUTPUT_DIR} -type f -name "*.tar.gz" -o -name "*.tgz" -o -name "kubeadm" -o -name "kubelet" -o -name "kubectl" | wc -l
echo "ê°œì˜ íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë¨"
```

### 4.4 Kubespray íŒŒì¼ URL ë§¤í•‘

KubesprayëŠ” `files_repo` ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ URLì„ ì¬ì •ì˜í•©ë‹ˆë‹¤:

```yaml
# inventory/offline-test/group_vars/all/offline.yml

# íŒŒì¼ ì„œë²„ ê¸°ë³¸ URL
files_repo: "http://repo.example.com:8080/v2.29.1"

# Kubesprayê°€ ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” URL ë³€í™˜:
# https://dl.k8s.io/... â†’ http://repo.example.com:8080/v2.29.1/dl.k8s.io/...
# https://github.com/... â†’ http://repo.example.com:8080/v2.29.1/github.com/...
```

> **ğŸ” ì‹¬í™” í•™ìŠµ (Deep Dive)**: Kubesprayì˜ `roles/download/defaults/main/download.yml` íŒŒì¼ì—ì„œ ê° ë°”ì´ë„ˆë¦¬ì˜ ë‹¤ìš´ë¡œë“œ URL í…œí”Œë¦¿ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `files_repo` ë³€ìˆ˜ê°€ ì„¤ì •ë˜ë©´ ìë™ìœ¼ë¡œ URLì´ ë³€í™˜ë©ë‹ˆë‹¤.

### ì„¹ì…˜ ìš”ì•½

íŒŒì¼ ì„œë²„ êµ¬ì„±ì˜ í•µì‹¬:
1. Nginxë¡œ ì •ì  íŒŒì¼ ì„œë¹„ìŠ¤ ì œê³µ
2. ë””ë ‰í† ë¦¬ êµ¬ì¡°ê°€ ì›ë³¸ URL ê²½ë¡œë¥¼ ë¯¸ëŸ¬ë§
3. Kubesprayì˜ `files_repo` ë³€ìˆ˜ë¡œ ìë™ URL ë³€í™˜

---

## 5. containerd ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¯¸ëŸ¬ ì„¤ì •

### 5.1 hosts.toml ì„¤ì • ì´í•´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    containerd Registry Configuration                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  containerdëŠ” ì´ë¯¸ì§€ pull ì‹œ ë‹¤ìŒ ìˆœì„œë¡œ ì„¤ì •ì„ í™•ì¸í•©ë‹ˆë‹¤:                  â”‚
â”‚                                                                             â”‚
â”‚  1. /etc/containerd/certs.d/<registry>/hosts.toml                           â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  2. hosts.tomlì˜ [host."..."] ì„¹ì…˜ì—ì„œ ë¯¸ëŸ¬ ì„œë²„ í™•ì¸                       â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  3. ì²« ë²ˆì§¸ ë¯¸ëŸ¬ ì„œë²„ë¡œ ìš”ì²­ ì „ì†¡                                           â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€â”€â”€ ì„±ê³µ â†’ ì´ë¯¸ì§€ ë°˜í™˜                                                â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â””â”€â”€â”€ ì‹¤íŒ¨ â†’ ë‹¤ìŒ ë¯¸ëŸ¬ ë˜ëŠ” ì›ë³¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì‹œë„                         â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /etc/containerd/certs.d/                                            â”‚   â”‚
â”‚  â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ docker.io/                                                       â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ hosts.toml          # docker.io ë¯¸ëŸ¬ ì„¤ì •                   â”‚   â”‚
â”‚  â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ quay.io/                                                         â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ hosts.toml          # quay.io ë¯¸ëŸ¬ ì„¤ì •                     â”‚   â”‚
â”‚  â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ghcr.io/                                                         â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ hosts.toml          # ghcr.io ë¯¸ëŸ¬ ì„¤ì •                     â”‚   â”‚
â”‚  â”‚  â”‚                                                                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€ registry.k8s.io/                                                 â”‚   â”‚
â”‚  â”‚      â””â”€â”€ hosts.toml          # registry.k8s.io ë¯¸ëŸ¬ ì„¤ì •             â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 hosts.toml ì„¤ì • íŒŒì¼

```toml
# /etc/containerd/certs.d/docker.io/hosts.toml
server = "https://docker.io"

[host."http://repo.example.com:5000"]
  capabilities = ["pull", "resolve"]
  skip_verify = true
```

```toml
# /etc/containerd/certs.d/quay.io/hosts.toml
server = "https://quay.io"

[host."http://repo.example.com:5001"]
  capabilities = ["pull", "resolve"]
  skip_verify = true
```

```toml
# /etc/containerd/certs.d/ghcr.io/hosts.toml
server = "https://ghcr.io"

[host."http://repo.example.com:5002"]
  capabilities = ["pull", "resolve"]
  skip_verify = true
```

```toml
# /etc/containerd/certs.d/registry.k8s.io/hosts.toml
server = "https://registry.k8s.io"

[host."http://repo.example.com:5003"]
  capabilities = ["pull", "resolve"]
  skip_verify = true
```

> **ğŸ“˜ ê°œë… (Concept)**: `capabilities = ["pull", "resolve"]`ëŠ” ì´ ë¯¸ëŸ¬ê°€ ì´ë¯¸ì§€ Pullê³¼ íƒœê·¸ Resolveë¥¼ ì§€ì›í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. `push`ëŠ” í¬í•¨í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì½ê¸° ì „ìš©ì…ë‹ˆë‹¤.

### 5.3 Kubespray ìë™ ì„¤ì •

KubesprayëŠ” `containerd_registries_mirrors` ë³€ìˆ˜ë¥¼ í†µí•´ ëª¨ë“  ë…¸ë“œì— ìë™ìœ¼ë¡œ hosts.tomlì„ ì„¤ì •í•©ë‹ˆë‹¤:

```yaml
# inventory/offline-test/group_vars/all/containerd.yml

containerd_registries_mirrors:
  - prefix: docker.io
    mirrors:
      - host: http://repo.example.com:5000
        capabilities: ["pull", "resolve"]
        skip_verify: true
  
  - prefix: quay.io
    mirrors:
      - host: http://repo.example.com:5001
        capabilities: ["pull", "resolve"]
        skip_verify: true
  
  - prefix: ghcr.io
    mirrors:
      - host: http://repo.example.com:5002
        capabilities: ["pull", "resolve"]
        skip_verify: true
  
  - prefix: registry.k8s.io
    mirrors:
      - host: http://repo.example.com:5003
        capabilities: ["pull", "resolve"]
        skip_verify: true
```

### 5.4 ì„¤ì • ê²€ì¦

```bash
# containerd ì„¤ì • í™•ì¸
$ cat /etc/containerd/config.toml | grep -A 10 "plugins.*cri.*registry"

# hosts.toml í™•ì¸
$ cat /etc/containerd/certs.d/quay.io/hosts.toml

# ì´ë¯¸ì§€ pull í…ŒìŠ¤íŠ¸
$ crictl pull quay.io/cilium/cilium:v1.18.5

# ë¡œê·¸ì—ì„œ ë¯¸ëŸ¬ ì‚¬ìš© í™•ì¸
$ journalctl -u containerd | grep -i "pulling from"

# nerdctlë¡œ ìƒì„¸ ë””ë²„ê·¸ (ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ê²½ìš°)
$ nerdctl pull --debug quay.io/cilium/cilium:v1.18.5 2>&1 | grep "resolving"
```

> **ğŸ’¡ íŒ (Tip)**: `crictl pull`ë¡œ í…ŒìŠ¤íŠ¸í•  ë•Œ ì´ë¯¸ì§€ê°€ ì´ë¯¸ ì¡´ì¬í•˜ë©´ ìºì‹œì—ì„œ ë°”ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. ì§„ì§œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë ¤ë©´ ë¨¼ì € `crictl rmi`ë¡œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì„¸ìš”.

### ì„¹ì…˜ ìš”ì•½

containerd ë¯¸ëŸ¬ ì„¤ì •ì˜ í•µì‹¬:
1. `/etc/containerd/certs.d/<registry>/hosts.toml` í˜•ì‹
2. Kubesprayê°€ `containerd_registries_mirrors` ë³€ìˆ˜ë¡œ ìë™ ì„¤ì •
3. `skip_verify: true`ë¡œ HTTP ë ˆì§€ìŠ¤íŠ¸ë¦¬ í—ˆìš©

---

## 6. Kubespray ë²„ì „ ê´€ë¦¬

### 6.1 Git íƒœê·¸ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬

> **âš ï¸ ì£¼ì˜ (Warning)**: Kubespray ì†ŒìŠ¤ëŠ” ë°˜ë“œì‹œ **Git íƒœê·¸** ê¸°ì¤€ìœ¼ë¡œ í™•ë³´í•˜ì„¸ìš”. master ë¸Œëœì¹˜ë‚˜ release ë¸Œëœì¹˜ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë©´ ì¬í˜„ ë¶ˆê°€ëŠ¥í•œ í™˜ê²½ì´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Kubespray ë²„ì „ ê´€ë¦¬ ì „ëµ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ì˜¬ë°”ë¥¸ ë°©ë²• (âœ“):                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  # íƒœê·¸ ê¸°ë°˜ í´ë¡                                                       â”‚  â”‚
â”‚  â”‚  git clone --branch v2.29.1 --depth 1 \                               â”‚  â”‚
â”‚  â”‚    https://github.com/kubernetes-sigs/kubespray.git                   â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  # ë˜ëŠ” ë¦´ë¦¬ìŠ¤ ì•„ì¹´ì´ë¸Œ ë‹¤ìš´ë¡œë“œ                                       â”‚  â”‚
â”‚  â”‚  curl -LO https://github.com/kubernetes-sigs/kubespray/\              â”‚  â”‚
â”‚  â”‚    archive/refs/tags/v2.29.1.tar.gz                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ì˜ëª»ëœ ë°©ë²• (âœ—):                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  # master ë¸Œëœì¹˜ (ë¶ˆì•ˆì •, ë§¤ì¼ ë³€ê²½ë¨)                                 â”‚  â”‚
â”‚  â”‚  git clone https://github.com/kubernetes-sigs/kubespray               â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  # release ë¸Œëœì¹˜ (íŒ¨ì¹˜ê°€ ì¶”ê°€ë  ìˆ˜ ìˆìŒ)                              â”‚  â”‚
â”‚  â”‚  git clone --branch release-2.29 ...                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  íƒœê·¸ ì‚¬ìš© ì´ìœ :                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. ì¬í˜„ ê°€ëŠ¥ì„±: ë™ì¼í•œ íƒœê·¸ = ë™ì¼í•œ ì†ŒìŠ¤                             â”‚  â”‚
â”‚  â”‚  2. í…ŒìŠ¤íŠ¸ ì™„ë£Œ: íƒœê·¸ëŠ” ë¦´ë¦¬ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œ ë²„ì „                    â”‚  â”‚
â”‚  â”‚  3. ë¬¸ì„œí™”: CHANGELOGì— ë³€ê²½ì‚¬í•­ ê¸°ë¡                                  â”‚  â”‚
â”‚  â”‚  4. ì§€ì›: ì»¤ë®¤ë‹ˆí‹° ì§€ì› ì‹œ ë²„ì „ ì‹ë³„ ìš©ì´                              â”‚  â”‚
â”‚  â”‚  5. ë¡¤ë°±: ë¬¸ì œ ë°œìƒ ì‹œ ì •í™•í•œ ë²„ì „ìœ¼ë¡œ ë¡¤ë°± ê°€ëŠ¥                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ë²„ì „ë³„ Python ê°€ìƒí™˜ê²½

```bash
#!/bin/bash
# setup-kubespray-env.sh

KUBESPRAY_VERSION="2.29.1"
BASE_DIR="/opt/kubespray"

# ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p ${BASE_DIR}
cd ${BASE_DIR}

# Kubespray ì†ŒìŠ¤ ì••ì¶• í•´ì œ
tar -xzf kubespray-${KUBESPRAY_VERSION}.tar.gz

# Python ê°€ìƒí™˜ê²½ ìƒì„± (ë²„ì „ë³„ë¡œ ë¶„ë¦¬)
python3 -m venv venv-${KUBESPRAY_VERSION}

# ê°€ìƒí™˜ê²½ í™œì„±í™”
source venv-${KUBESPRAY_VERSION}/bin/activate

# pip ì—…ê·¸ë ˆì´ë“œ ë° ì˜ì¡´ì„± ì„¤ì¹˜
cd kubespray-${KUBESPRAY_VERSION}
pip install -U pip
pip install -r requirements.txt

# ì„¤ì¹˜ í™•ì¸
ansible --version
echo "Kubespray ${KUBESPRAY_VERSION} environment ready."
```

> **ğŸ’¡ íŒ (Tip)**: ë²„ì „ë³„ë¡œ ê°€ìƒí™˜ê²½ì„ ë¶„ë¦¬í•˜ë©´ ë‹¤ë¥¸ ë²„ì „ì˜ Kubesprayë¥¼ ë™ì‹œì— ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—…ê·¸ë ˆì´ë“œ í…ŒìŠ¤íŠ¸ë‚˜ ë¡¤ë°± ì‹œ ìœ ìš©í•©ë‹ˆë‹¤.

### 6.3 ë²„ì „ í˜¸í™˜ì„± ë§¤íŠ¸ë¦­ìŠ¤

| Kubespray | Kubernetes | Cilium | Python | ìµœì†Œ ì»¤ë„ |
|-----------|------------|--------|--------|-----------|
| **v2.29.1** | 1.33.x | 1.18.x | 3.10+ | 5.10+ |
| v2.28.1 | 1.32.x | 1.17.x | 3.10+ | 5.10+ |
| v2.27.0 | 1.31.x | 1.16.x | 3.9+ | 5.4+ |

#### Cilium ê¸°ëŠ¥ë³„ ì»¤ë„ ìš”êµ¬ì‚¬í•­

| ê¸°ëŠ¥ | ìµœì†Œ ì»¤ë„ | RHEL 10 (6.12) |
|------|----------|----------------|
| ê¸°ë³¸ ê¸°ëŠ¥ | 4.19+ | âœ… ì§€ì› |
| eBPF í˜¸ìŠ¤íŠ¸ ë¼ìš°íŒ… | 5.10+ | âœ… ì§€ì› |
| WireGuard ì•”í˜¸í™” | 5.6+ | âœ… ì§€ì› |
| IPv6 BIG TCP | 5.19+ | âœ… ì§€ì› |
| **Netkit datapath** | **6.7+** | âœ… ì§€ì› |

> **ğŸ” ì‹¬í™” í•™ìŠµ (Deep Dive)**: RHEL 10ì˜ ì»¤ë„ 6.12ëŠ” Ciliumì˜ ëª¨ë“  ìµœì‹  ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. netkit ë°ì´í„°íŒ¨ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ veth ëŒ€ë¹„ 10-15%ì˜ ì„±ëŠ¥ í–¥ìƒì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 6.4 ì—…ê·¸ë ˆì´ë“œ ê²½ë¡œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì—…ê·¸ë ˆì´ë“œ ì›ì¹™                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âš ï¸ ë§ˆì´ë„ˆ ë²„ì „ì„ ê±´ë„ˆë›°ì§€ ë§ˆì„¸ìš”!                                            â”‚
â”‚                                                                             â”‚
â”‚  ì˜¬ë°”ë¥¸ ì—…ê·¸ë ˆì´ë“œ ê²½ë¡œ:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  v2.27.0 â”€â”€â–º v2.28.0 â”€â”€â–º v2.28.1 â”€â”€â–º v2.29.0 â”€â”€â–º v2.29.1             â”‚  â”‚
â”‚  â”‚     â”‚           â”‚           â”‚           â”‚           â”‚                  â”‚  â”‚
â”‚  â”‚     â”‚           â”‚           â”‚           â”‚           â”‚                  â”‚  â”‚
â”‚  â”‚  K8s 1.31   K8s 1.32    íŒ¨ì¹˜        K8s 1.33    íŒ¨ì¹˜                 â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ì˜ëª»ëœ ì—…ê·¸ë ˆì´ë“œ (ìœ„í—˜!):                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  v2.27.0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º v2.29.1             â”‚  â”‚
â”‚  â”‚                          âœ— ìŠ¤í‚µ ê¸ˆì§€!                                  â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¹ì…˜ ìš”ì•½

Kubespray ë²„ì „ ê´€ë¦¬ì˜ í•µì‹¬:
1. **íƒœê·¸ ê¸°ë°˜** ì†ŒìŠ¤ í™•ë³´ (master/release ë¸Œëœì¹˜ ê¸ˆì§€)
2. **ë²„ì „ë³„ Python ê°€ìƒí™˜ê²½** ë¶„ë¦¬
3. **ìˆœì°¨ì  ì—…ê·¸ë ˆì´ë“œ** (ë§ˆì´ë„ˆ ë²„ì „ ìŠ¤í‚µ ê¸ˆì§€)

---

## 7. ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ ê²€ì¦

### 7.1 ê²€ì¦ Playbook ê°œìš”

ë°°í¬ ì „ì— ëª¨ë“  ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ê°€ ì¤€ë¹„ë˜ì—ˆëŠ”ì§€ ê²€ì¦í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ ê²€ì¦ í”„ë¡œì„¸ìŠ¤                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  verify-offline-resources.yml ì‹¤í–‰ íë¦„:                                    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Step 1: íŒŒì¼ ì„œë²„ ì ‘ê·¼ í™•ì¸                                           â”‚  â”‚
â”‚  â”‚  â””â”€ curl -I http://repo.example.com:8080                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                                 â”‚
â”‚                           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Step 2: ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì¡´ì¬ í™•ì¸                                       â”‚  â”‚
â”‚  â”‚  â””â”€ ê° íŒŒì¼ì— ëŒ€í•´ HTTP HEAD ìš”ì²­, 200 ì‘ë‹µ í™•ì¸                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                                 â”‚
â”‚                           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Step 3: ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì ‘ê·¼ í™•ì¸                                          â”‚  â”‚
â”‚  â”‚  â””â”€ curl http://repo.example.com:500X/v2/_catalog                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                                 â”‚
â”‚                           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Step 4: í•„ìˆ˜ ì´ë¯¸ì§€ ì¡´ì¬ í™•ì¸                                         â”‚  â”‚
â”‚  â”‚  â””â”€ ê° ì´ë¯¸ì§€ì˜ íƒœê·¸ ëª©ë¡ ì¡°íšŒ, ë²„ì „ íƒœê·¸ ì¡´ì¬ í™•ì¸                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                                 â”‚
â”‚                           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Step 5: ê²°ê³¼ ìš”ì•½                                                     â”‚  â”‚
â”‚  â”‚  â””â”€ SUCCESS / WARNING / FAILED ìƒíƒœ ì¶œë ¥                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ê²€ì¦ ì‹¤í–‰

```bash
# ê¸°ë³¸ ì‹¤í–‰
$ ansible-playbook playbooks/verify-offline-resources.yml

# ì¶œë ¥ ì˜ˆì‹œ:
# ==============================================
#        OFFLINE RESOURCE VERIFICATION
# ==============================================
#
# Kubespray Version: v2.29.1
# Kubernetes Version: v1.33.7
#
# File Server: http://192.168.108.201:8080
#   Status: [OK]
#
# Binary Files: 42/42 available
#   [OK] All files available
#
# Container Registries: 4/4 accessible
#   [OK] docker.io mirror  (port 5000)
#   [OK] quay.io mirror    (port 5001)
#   [OK] ghcr.io mirror    (port 5002)
#   [OK] registry.k8s.io   (port 5003)
#
# Critical Images:
#   kube-apiserver:v1.33.7     [OK]
#   cilium/cilium:v1.18.5      [OK]
#   etcd:3.5.17-0              [OK]
#
# ==============================================
# [SUCCESS] All resources verified!
# ==============================================
```

### 7.3 ê²€ì¦ ì‹¤íŒ¨ ëŒ€ì‘

> **ğŸ“ ì˜ˆì œ (Example)**: ê²€ì¦ ì‹¤íŒ¨ ì‹œ ì¼ë°˜ì ì¸ í•´ê²° ë°©ë²•ë“¤ì…ë‹ˆë‹¤.

| ì‹¤íŒ¨ ìœ í˜• | ì¦ìƒ | í•´ê²° ë°©ë²• |
|-----------|------|-----------|
| íŒŒì¼ ì„œë²„ ì ‘ê·¼ ì‹¤íŒ¨ | `[FAIL] File server NOT accessible` | Nginx ìƒíƒœ í™•ì¸, ë°©í™”ë²½ í¬íŠ¸ í™•ì¸ |
| ë°”ì´ë„ˆë¦¬ ëˆ„ë½ | `kubeadm: [FAIL] (404)` | í•´ë‹¹ íŒŒì¼ ë‹¤ìš´ë¡œë“œ í›„ ì˜¬ë°”ë¥¸ ê²½ë¡œì— ë°°ì¹˜ |
| ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì ‘ê·¼ ì‹¤íŒ¨ | `connection failed` | Podman ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸, í¬íŠ¸ ë°”ì¸ë”© í™•ì¸ |
| ì´ë¯¸ì§€ ëˆ„ë½ | `NOT FOUND` | ì´ë¯¸ì§€ ì‚¬ì „ ìºì‹± ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰ |

```bash
# ë¬¸ì œ ì§„ë‹¨ ëª…ë ¹ì–´
$ curl -I http://repo.example.com:8080          # íŒŒì¼ ì„œë²„
$ curl http://repo.example.com:5003/v2/_catalog  # ë ˆì§€ìŠ¤íŠ¸ë¦¬ ëª©ë¡
$ podman ps -a                                   # ì»¨í…Œì´ë„ˆ ìƒíƒœ
$ podman logs registry-quayio                    # ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¡œê·¸
```

### ì„¹ì…˜ ìš”ì•½

ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ ê²€ì¦ì˜ í•µì‹¬:
1. **ë°°í¬ ì „ í•„ìˆ˜ ê²€ì¦** ì‹¤í–‰
2. íŒŒì¼ ì„œë²„, ë ˆì§€ìŠ¤íŠ¸ë¦¬, í•„ìˆ˜ ì´ë¯¸ì§€ ëª¨ë‘ í™•ì¸
3. ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì¡°ì¹˜ í›„ ì¬ê²€ì¦

---

## 8. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 8.1 ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²°ì±…

#### ë¬¸ì œ 1: ì´ë¯¸ì§€ Pull ì‹¤íŒ¨

```
ì—ëŸ¬: failed to pull image "quay.io/cilium/cilium:v1.18.5"
```

**ì§„ë‹¨:**
```bash
# 1. crictlë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸
$ crictl pull quay.io/cilium/cilium:v1.18.5

# 2. containerd ì„¤ì • í™•ì¸
$ cat /etc/containerd/certs.d/quay.io/hosts.toml

# 3. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì§ì ‘ ì ‘ê·¼
$ curl http://repo.example.com:5001/v2/_catalog
```

**í•´ê²°:**
- hosts.toml ì„¤ì • í™•ì¸ ë° ìˆ˜ì •
- containerd ì¬ì‹œì‘: `systemctl restart containerd`
- ì´ë¯¸ì§€ê°€ ìºì‹œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

#### ë¬¸ì œ 2: ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨

```
ì—ëŸ¬: Failed to download kubeadm
```

**ì§„ë‹¨:**
```bash
# URL ì§ì ‘ í…ŒìŠ¤íŠ¸
$ curl -I http://repo.example.com:8080/v2.29.1/dl.k8s.io/release/v1.33.7/bin/linux/amd64/kubeadm

# Kubespray ë³€ìˆ˜ í™•ì¸
$ grep files_repo inventory/*/group_vars/all/*.yml
```

**í•´ê²°:**
- files_repo URL í™•ì¸
- íŒŒì¼ ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
- Nginx ì„¤ì • í™•ì¸

#### ë¬¸ì œ 3: DNS í•´ì„ ì‹¤íŒ¨

```
ì—ëŸ¬: Could not resolve host: repo.example.com
```

**í•´ê²°:**
```bash
# Option 1: /etc/hostsì— ì¶”ê°€
echo "192.168.108.201 repo.example.com" >> /etc/hosts

# Option 2: ë‚´ë¶€ DNS ì„œë²„ ì„¤ì •

# Option 3: IP ì§ì ‘ ì‚¬ìš© (ë¹„ê¶Œì¥)
files_repo: "http://192.168.108.201:8080/v2.29.1"
```

### 8.2 ë””ë²„ê¹… ëª…ë ¹ì–´ ëª¨ìŒ

```bash
# === containerd ê´€ë ¨ ===
journalctl -u containerd -f
crictl images
crictl ps -a

# === ë ˆì§€ìŠ¤íŠ¸ë¦¬ ê´€ë ¨ ===
podman ps -a
podman logs -f registry-quayio
curl http://localhost:5001/v2/_catalog
curl http://localhost:5001/v2/cilium/cilium/tags/list

# === ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ ===
nc -zv repo.example.com 5000
nc -zv repo.example.com 8080
ss -tlnp | grep -E "5000|5001|5002|5003|8080"

# === Cilium ê´€ë ¨ (ì„¤ì¹˜ í›„) ===
cilium status
hubble observe --verdict DROPPED
```

### ì„¹ì…˜ ìš”ì•½

íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì˜ í•µì‹¬:
1. **ì—ëŸ¬ ë©”ì‹œì§€ ë¶„ì„**ìœ¼ë¡œ ë¬¸ì œ ì˜ì—­ íŒŒì•…
2. **ê³„ì¸µë³„ ì§„ë‹¨**: ë„¤íŠ¸ì›Œí¬ â†’ ë ˆì§€ìŠ¤íŠ¸ë¦¬ â†’ containerd â†’ Kubernetes
3. **ë¡œê·¸ í™•ì¸**: journalctl, podman logs

---

## 9. ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 9.1 ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

> **ğŸ’¡ íŒ (Tip)**: ë‹¤ìŒ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ë¥¼ ë”°ë¥´ë©´ ì˜¤í”„ë¼ì¸ í™˜ê²½ ìš´ì˜ì´ í›¨ì”¬ ìˆ˜ì›”í•´ì§‘ë‹ˆë‹¤.

| í•­ëª© | ê¶Œì¥ ì‚¬í•­ |
|------|-----------|
| **ë²„ì „ ê²©ë¦¬** | ê° Kubespray ë²„ì „ë³„ë¡œ ë³„ë„ ë””ë ‰í† ë¦¬ (`/v2.28.1/`, `/v2.29.1/`) |
| **ì²´í¬ì„¬ ê²€ì¦** | ëª¨ë“  ë°”ì´ë„ˆë¦¬ì— SHA256 ì²´í¬ì„¬ ì €ì¥ ë° ê²€ì¦ |
| **ë¬¸ì„œí™”** | ë²„ì „ë³„ ë¦¬ì†ŒìŠ¤ ëª©ë¡, ì„¤ì • ë³€ê²½ ì´ë ¥ ê¸°ë¡ |
| **ìë™í™”** | ë¦¬ì†ŒìŠ¤ ë‹¤ìš´ë¡œë“œ/ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸í™”, CI/CD í†µí•© |
| **ë°±ì—…** | ë ˆì§€ìŠ¤íŠ¸ë¦¬ ìºì‹œ, íŒŒì¼ ì„œë²„ ë°ì´í„° ì •ê¸° ë°±ì—… |
| **ëª¨ë‹ˆí„°ë§** | ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰, ì„œë¹„ìŠ¤ ê°€ìš©ì„±, Pull ì„±ê³µë¥  ì¶”ì  |

### 9.2 ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

| ë³´ì•ˆ í•­ëª© | ê¶Œì¥ ì‚¬í•­ |
|-----------|-----------|
| **ì´ë¯¸ì§€ ì„œëª…** | Sigstore/Cosignìœ¼ë¡œ ì´ë¯¸ì§€ ë¬´ê²°ì„± ê²€ì¦ |
| **ë„¤íŠ¸ì›Œí¬ ë¶„ë¦¬** | ë ˆí¬ì§€í† ë¦¬ ì„œë²„ëŠ” ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ì—ë§Œ ë…¸ì¶œ |
| **TLS ì ìš©** | ë‚´ë¶€ CA êµ¬ì„±, HTTPS í™œì„±í™” ê¶Œì¥ |
| **ì ‘ê·¼ ì œì–´** | IP ê¸°ë°˜ ì ‘ê·¼ ì œí•œ, ê°ì‚¬ ë¡œê·¸ í™œì„±í™” |
| **ì·¨ì•½ì  ìŠ¤ìº”** | Trivy ë“±ìœ¼ë¡œ ì •ê¸°ì  ì´ë¯¸ì§€ ì·¨ì•½ì  ìŠ¤ìº” |

### 9.3 ê³ ê°€ìš©ì„± ì„¤ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë ˆí¬ì§€í† ë¦¬ ì„œë²„ ê³ ê°€ìš©ì„±                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ì˜µì…˜ 1: Active-Passive (ë‹¨ìˆœ)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Primary Server â—„â”€â”€ ì •ìƒ ìš´ì˜                                         â”‚  â”‚
â”‚  â”‚       â”‚                                                                â”‚  â”‚
â”‚  â”‚       â”‚ rsync (ì£¼ê¸°ì  ë™ê¸°í™”)                                         â”‚  â”‚
â”‚  â”‚       â–¼                                                                â”‚  â”‚
â”‚  â”‚  Backup Server â—„â”€â”€ ì¥ì•  ì‹œ ìˆ˜ë™ ì „í™˜                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  ì˜µì…˜ 2: Load Balancer + Shared Storage (ë³µì¡)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  HAProxy/Nginx LB                                                      â”‚  â”‚
â”‚  â”‚       â”‚                                                                â”‚  â”‚
â”‚  â”‚       â”œâ”€â”€ Server 1 â”€â”€â”€â”€â”                                              â”‚  â”‚
â”‚  â”‚       â”‚                 â”‚â”€â”€ NFS/GlusterFS                             â”‚  â”‚
â”‚  â”‚       â””â”€â”€ Server 2 â”€â”€â”€â”€â”˜                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ” ì‹¬í™” í•™ìŠµ (Deep Dive)**: ì†Œê·œëª¨ í™˜ê²½ì—ì„œëŠ” Active-Passiveê°€ ì¶©ë¶„í•˜ì§€ë§Œ, ë¯¸ì…˜ í¬ë¦¬í‹°ì»¬ í™˜ê²½ì—ì„œëŠ” ê³µìœ  ìŠ¤í† ë¦¬ì§€ ê¸°ë°˜ Active-Active êµ¬ì„±ì„ ê³ ë ¤í•˜ì„¸ìš”. Harbor ì—”í„°í”„ë¼ì´ì¦ˆ ì—ë””ì…˜ì€ HAë¥¼ ê¸°ë³¸ ì§€ì›í•©ë‹ˆë‹¤.

### ì„¹ì…˜ ìš”ì•½

ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ì˜ í•µì‹¬:
1. **ìë™í™”ì™€ ë¬¸ì„œí™”**ë¡œ ìš´ì˜ íš¨ìœ¨ì„± í–¥ìƒ
2. **ë³´ì•ˆ**ì„ ì²˜ìŒë¶€í„° ì„¤ê³„ì— í¬í•¨
3. **ê³ ê°€ìš©ì„±**ìœ¼ë¡œ ë‹¨ì¼ ì¥ì• ì  ì œê±°

---

## ì´ ì¥ì˜ ìš”ì•½

| í•µì‹¬ ê°œë… | ì„¤ëª… | ì¤‘ìš”ë„ |
|-----------|------|--------|
| **íì‡„ë§(Air-Gap)** | ì¸í„°ë„·ê³¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ëœ ë³´ì•ˆ ë„¤íŠ¸ì›Œí¬ | â­â­â­â­â­ |
| **í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬** | registry:2 Pull-Through Cacheë¡œ ì´ë¯¸ì§€ ìºì‹± | â­â­â­â­â­ |
| **íŒŒì¼ ì„œë²„** | Nginxë¡œ Kubernetes ë°”ì´ë„ˆë¦¬ ì œê³µ | â­â­â­â­â­ |
| **hosts.toml** | containerd ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¯¸ëŸ¬ ì„¤ì • | â­â­â­â­ |
| **files_repo** | Kubespray ë°”ì´ë„ˆë¦¬ URL ì¬ì •ì˜ ë³€ìˆ˜ | â­â­â­â­ |
| **íƒœê·¸ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬** | KubesprayëŠ” ë°˜ë“œì‹œ Git íƒœê·¸ë¡œ í™•ë³´ | â­â­â­â­â­ |
| **ì‚¬ì „ ìºì‹±** | ì˜¤í”„ë¼ì¸ ì „í™˜ ì „ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ìºì‹± í•„ìˆ˜ | â­â­â­â­â­ |
| **ë¦¬ì†ŒìŠ¤ ê²€ì¦** | ë°°í¬ ì „ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì¡´ì¬ í™•ì¸ | â­â­â­â­ |
| **ë²„ì „ í˜¸í™˜ì„±** | Kubespray â†” K8s â†” Cilium ë§¤íŠ¸ë¦­ìŠ¤ ì¤€ìˆ˜ | â­â­â­â­ |
| **ìˆœì°¨ ì—…ê·¸ë ˆì´ë“œ** | ë§ˆì´ë„ˆ ë²„ì „ ìŠ¤í‚µ ê¸ˆì§€ | â­â­â­â­â­ |

---

## ì‹¤ìŠµ ê³¼ì œ

### ì‹¤ìŠµ 1: í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ êµ¬ì„±

**ëª©í‘œ**: registry:2ë¥¼ ì‚¬ìš©í•˜ì—¬ Pull-Through Cache ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

```bash
# 1. ì„¤ì • íŒŒì¼ ìƒì„±
$ mkdir -p /etc/registry
$ cat << 'EOF' > /etc/registry/config-test.yml
version: 0.1
log:
  level: debug
storage:
  filesystem:
    rootdirectory: /var/lib/registry
http:
  addr: :5000
proxy:
  remoteurl: https://registry.k8s.io
EOF

# 2. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì‹¤í–‰
$ podman run -d \
  --name registry-test \
  -p 5003:5000 \
  -v /etc/registry/config-test.yml:/etc/docker/registry/config.yml:ro \
  -v /var/lib/registry/test:/var/lib/registry \
  docker.io/library/registry:2

# 3. ì´ë¯¸ì§€ ìºì‹± í…ŒìŠ¤íŠ¸
$ podman pull --tls-verify=false localhost:5003/pause:3.10

# 4. ìºì‹œ í™•ì¸
$ curl http://localhost:5003/v2/_catalog
$ curl http://localhost:5003/v2/pause/tags/list

# 5. ìºì‹œ ë””ë ‰í† ë¦¬ í™•ì¸
$ ls -la /var/lib/registry/test/docker/registry/v2/
```

**ì˜ˆìƒ ê²°ê³¼**:
- ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ì‹¤í–‰
- pause:3.10 ì´ë¯¸ì§€ê°€ ìºì‹œë¨
- ìºì‹œ ë””ë ‰í† ë¦¬ì— blob íŒŒì¼ ìƒì„±

---

### ì‹¤ìŠµ 2: containerd hosts.toml ì„¤ì •

**ëª©í‘œ**: containerdê°€ ë¡œì»¬ ë¯¸ëŸ¬ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

```bash
# 1. hosts.toml ë””ë ‰í† ë¦¬ ìƒì„±
$ mkdir -p /etc/containerd/certs.d/registry.k8s.io

# 2. hosts.toml ì„¤ì •
$ cat << 'EOF' > /etc/containerd/certs.d/registry.k8s.io/hosts.toml
server = "https://registry.k8s.io"

[host."http://localhost:5003"]
  capabilities = ["pull", "resolve"]
  skip_verify = true
EOF

# 3. containerd ì¬ì‹œì‘
$ systemctl restart containerd

# 4. crictlë¡œ Pull í…ŒìŠ¤íŠ¸
$ crictl pull registry.k8s.io/pause:3.10

# 5. containerd ë¡œê·¸ì—ì„œ ë¯¸ëŸ¬ ì‚¬ìš© í™•ì¸
$ journalctl -u containerd | grep -i "localhost:5003"
```

**ì˜ˆìƒ ê²°ê³¼**:
- crictl pullì´ ë¡œì»¬ ë¯¸ëŸ¬ë¥¼ í†µí•´ ì„±ê³µ
- ë¡œê·¸ì—ì„œ localhost:5003 ì ‘ê·¼ í™•ì¸

---

### ì‹¤ìŠµ 3: íŒŒì¼ ì„œë²„ ì„¤ì • ë° ê²€ì¦

**ëª©í‘œ**: Nginx íŒŒì¼ ì„œë²„ë¥¼ êµ¬ì„±í•˜ê³  ë°”ì´ë„ˆë¦¬ ì ‘ê·¼ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

```bash
# 1. íŒŒì¼ ì„œë²„ ë””ë ‰í† ë¦¬ ìƒì„±
$ mkdir -p /var/www/files/v2.29.1/dl.k8s.io/release/v1.33.7/bin/linux/amd64

# 2. í…ŒìŠ¤íŠ¸ìš© íŒŒì¼ ìƒì„± (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ)
$ echo "test kubeadm" > /var/www/files/v2.29.1/dl.k8s.io/release/v1.33.7/bin/linux/amd64/kubeadm

# 3. Nginx ì„¤ì •
$ cat << 'EOF' > /etc/nginx/conf.d/files.conf
server {
    listen 8080;
    root /var/www/files;
    autoindex on;
}
EOF

# 4. Nginx ì¬ì‹œì‘
$ systemctl restart nginx

# 5. íŒŒì¼ ì ‘ê·¼ í…ŒìŠ¤íŠ¸
$ curl -I http://localhost:8080/v2.29.1/dl.k8s.io/release/v1.33.7/bin/linux/amd64/kubeadm

# 6. ë””ë ‰í† ë¦¬ ëª©ë¡ í™•ì¸
$ curl http://localhost:8080/v2.29.1/
```

**ì˜ˆìƒ ê²°ê³¼**:
- HTTP 200 ì‘ë‹µ
- ë””ë ‰í† ë¦¬ ëª©ë¡ í‘œì‹œ

---

### ì‹¤ìŠµ 4: ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

**ëª©í‘œ**: í•„ìˆ˜ ë¦¬ì†ŒìŠ¤ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```bash
#!/bin/bash
# verify-resources.sh

REPO_HOST="localhost"
FILE_PORT="8080"
REG_PORT="5003"
KUBESPRAY_VERSION="v2.29.1"
KUBE_VERSION="v1.33.7"

echo "=== Offline Resource Verification ==="

# íŒŒì¼ ì„œë²„ í™•ì¸
echo -n "File Server: "
if curl -s -I http://${REPO_HOST}:${FILE_PORT}/ | grep -q "200"; then
  echo "[OK]"
else
  echo "[FAIL]"
fi

# ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ì¸
echo -n "kubeadm: "
URL="http://${REPO_HOST}:${FILE_PORT}/${KUBESPRAY_VERSION}/dl.k8s.io/release/${KUBE_VERSION}/bin/linux/amd64/kubeadm"
if curl -s -I ${URL} | grep -q "200"; then
  echo "[OK]"
else
  echo "[FAIL]"
fi

# ë ˆì§€ìŠ¤íŠ¸ë¦¬ í™•ì¸
echo -n "Registry: "
if curl -s http://${REPO_HOST}:${REG_PORT}/v2/_catalog | grep -q "repositories"; then
  echo "[OK]"
else
  echo "[FAIL]"
fi

# ì´ë¯¸ì§€ í™•ì¸
echo -n "pause:3.10: "
if curl -s http://${REPO_HOST}:${REG_PORT}/v2/pause/tags/list | grep -q "3.10"; then
  echo "[OK]"
else
  echo "[FAIL]"
fi

echo "=== Verification Complete ==="
```

**ì˜ˆìƒ ê²°ê³¼**:
- ëª¨ë“  í•­ëª©ì´ [OK]ë¡œ í‘œì‹œ
- ëˆ„ë½ëœ ë¦¬ì†ŒìŠ¤ê°€ ìˆìœ¼ë©´ [FAIL]

---

### ì‹¤ìŠµ 5: ë²„ì „ë³„ Python ê°€ìƒí™˜ê²½ êµ¬ì„±

**ëª©í‘œ**: Kubespray ë²„ì „ë³„ë¡œ ê²©ë¦¬ëœ Python í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤.

```bash
# 1. ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
$ mkdir -p /opt/kubespray/{sources,envs}

# 2. Python ê°€ìƒí™˜ê²½ ìƒì„±
$ python3 -m venv /opt/kubespray/envs/venv-2.29.1

# 3. ê°€ìƒí™˜ê²½ í™œì„±í™”
$ source /opt/kubespray/envs/venv-2.29.1/bin/activate

# 4. pip ì—…ê·¸ë ˆì´ë“œ
$ pip install -U pip

# 5. ì˜ì¡´ì„± ì„¤ì¹˜ (ì˜¤í”„ë¼ì¸ì—ì„œëŠ” wheel íŒŒì¼ í•„ìš”)
# $ pip install -r requirements.txt

# 6. ê°€ìƒí™˜ê²½ í™•ì¸
$ which python
$ python --version

# 7. ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™”
$ deactivate
```

**ì˜ˆìƒ ê²°ê³¼**:
- ê°€ìƒí™˜ê²½ì´ ìƒì„±ë¨
- Python ê²½ë¡œê°€ /opt/kubespray/envs/venv-2.29.1/bin/python

---

## í•™ìŠµ ì ê²€

### ì§ˆë¬¸ 1: íì‡„ë§ ì •ì˜

**Q**: íì‡„ë§(Air-Gapped) í™˜ê²½ì—ì„œ Kubernetesë¥¼ ìš´ì˜í•  ë•Œ í•´ê²°í•´ì•¼ í•˜ëŠ” ì£¼ìš” ê³¼ì œ 3ê°€ì§€ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

1. **ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ í™•ë³´**:
   - docker.io, quay.io, ghcr.io, registry.k8s.io ë“±ì— ì ‘ê·¼ ë¶ˆê°€
   - ëª¨ë“  í•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ì „ì— ìºì‹±í•´ì•¼ í•¨
   - í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ êµ¬ì„± í•„ìš”

2. **ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ë³´**:
   - kubeadm, kubelet, kubectl, containerd, etcd ë“±
   - GitHub, dl.k8s.ioì—ì„œ ë‹¤ìš´ë¡œë“œ ë¶ˆê°€
   - íŒŒì¼ ì„œë²„ êµ¬ì„± í•„ìš”

3. **ë²„ì „ í˜¸í™˜ì„± ê´€ë¦¬**:
   - Kubespray â†” Kubernetes â†” Cilium ë²„ì „ ë§¤ì¹­
   - ì»¤ë„ ë²„ì „ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
   - ì—…ë°ì´íŠ¸ ì‹œ ìƒˆ ë¦¬ì†ŒìŠ¤ ì‚¬ì „ í™•ë³´ í•„ìš”

</details>

---

### ì§ˆë¬¸ 2: í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬

**Q**: Pull-Through Cache ë°©ì‹ì˜ í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ê°€ ë™ì‘í•˜ëŠ” ë°©ì‹ì„ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**Pull-Through Cache ë™ì‘ ë°©ì‹**:

1. í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì´ë¯¸ì§€ ìš”ì²­
2. í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ê°€ ë¡œì»¬ ìºì‹œ í™•ì¸
3. **ìºì‹œ ìˆìŒ (HIT)**: ì¦‰ì‹œ ì´ë¯¸ì§€ ë°˜í™˜
4. **ìºì‹œ ì—†ìŒ (MISS)**: 
   - upstream ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ì´ë¯¸ì§€ Pull
   - ë¡œì»¬ì— ìºì‹œ ì €ì¥
   - í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜

**ì˜¤í”„ë¼ì¸ í™˜ê²½ ì£¼ì˜ì **:
- ì˜¤í”„ë¼ì¸ì—ì„œëŠ” upstream ì ‘ê·¼ ë¶ˆê°€
- ë”°ë¼ì„œ **ì˜¨ë¼ì¸ í™˜ê²½ì—ì„œ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì‚¬ì „ ìºì‹±**í•´ì•¼ í•¨
- ìºì‹œë˜ì§€ ì•Šì€ ì´ë¯¸ì§€ ìš”ì²­ ì‹œ 404 ì—ëŸ¬ ë°œìƒ

</details>

---

### ì§ˆë¬¸ 3: containerd ë¯¸ëŸ¬ ì„¤ì •

**Q**: containerdì˜ hosts.toml íŒŒì¼ ìœ„ì¹˜ì™€ í•„ìˆ˜ ì„¤ì • í•­ëª©ì„ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**íŒŒì¼ ìœ„ì¹˜**:
```
/etc/containerd/certs.d/<registry>/hosts.toml
```

ì˜ˆ: `/etc/containerd/certs.d/quay.io/hosts.toml`

**í•„ìˆ˜ ì„¤ì • í•­ëª©**:
```toml
server = "https://quay.io"      # ì›ë³¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬

[host."http://repo.example.com:5001"]
  capabilities = ["pull", "resolve"]  # ì§€ì› ê¸°ëŠ¥
  skip_verify = true                   # TLS ê²€ì¦ ìŠ¤í‚µ (HTTPìš©)
```

**capabilities ì˜µì…˜**:
- `pull`: ì´ë¯¸ì§€ Pull ì§€ì›
- `resolve`: íƒœê·¸ â†’ Digest ë³€í™˜ ì§€ì›
- `push`: ì´ë¯¸ì§€ Push ì§€ì› (ì½ê¸° ì „ìš©ì—ëŠ” ë¶ˆí¬í•¨)

</details>

---

### ì§ˆë¬¸ 4: Kubespray ë²„ì „ ê´€ë¦¬

**Q**: Kubespray ì†ŒìŠ¤ë¥¼ í™•ë³´í•  ë•Œ ë°˜ë“œì‹œ Git íƒœê·¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**Git íƒœê·¸ ì‚¬ìš© ì´ìœ **:

1. **ì¬í˜„ ê°€ëŠ¥ì„±**: 
   - ë™ì¼í•œ íƒœê·¸ = ë™ì¼í•œ ì†ŒìŠ¤
   - master/release ë¸Œëœì¹˜ëŠ” ê³„ì† ë³€ê²½ë¨

2. **í…ŒìŠ¤íŠ¸ ì™„ë£Œ**:
   - íƒœê·¸ëŠ” ë¦´ë¦¬ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œ ë²„ì „
   - ì•ˆì •ì„± ë³´ì¥

3. **ë¬¸ì„œí™”**:
   - CHANGELOGì— ë³€ê²½ì‚¬í•­ ê¸°ë¡
   - ì–´ë–¤ ë³€ê²½ì´ ìˆì—ˆëŠ”ì§€ ì¶”ì  ê°€ëŠ¥

4. **ì§€ì›**:
   - ì»¤ë®¤ë‹ˆí‹°ì— ë„ì›€ ìš”ì²­ ì‹œ ë²„ì „ ì‹ë³„ ìš©ì´
   - "v2.29.1ì—ì„œ ì´ëŸ° ë¬¸ì œê°€..."

5. **ë¡¤ë°±**:
   - ë¬¸ì œ ë°œìƒ ì‹œ ì •í™•í•œ ë²„ì „ìœ¼ë¡œ ë¡¤ë°± ê°€ëŠ¥

</details>

---

### ì§ˆë¬¸ 5: files_repo ë³€ìˆ˜

**Q**: Kubesprayì˜ `files_repo` ë³€ìˆ˜ê°€ í•˜ëŠ” ì—­í• ê³¼ URL ë³€í™˜ ë°©ì‹ì„ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ì—­í• **:
- Kubernetes ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ URLì„ ë‚´ë¶€ íŒŒì¼ ì„œë²„ë¡œ ì¬ì •ì˜

**URL ë³€í™˜ ë°©ì‹**:
```
ì›ë³¸: https://dl.k8s.io/release/v1.33.7/bin/linux/amd64/kubeadm
ë³€í™˜: http://repo.example.com:8080/v2.29.1/dl.k8s.io/release/v1.33.7/bin/linux/amd64/kubeadm
```

**ì„¤ì • ì˜ˆì‹œ**:
```yaml
files_repo: "http://repo.example.com:8080/v2.29.1"
```

**ë™ì‘ ì›ë¦¬**:
- Kubesprayê°€ ì›ë³¸ URLì—ì„œ ë„ë©”ì¸ ë¶€ë¶„ì„ ì œê±°
- `files_repo` ê°’ì„ prefixë¡œ ì¶”ê°€
- ê²°ê³¼ì ìœ¼ë¡œ ë‚´ë¶€ íŒŒì¼ ì„œë²„ì—ì„œ ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ

</details>

---

### ì§ˆë¬¸ 6: ì—…ê·¸ë ˆì´ë“œ ì›ì¹™

**Q**: Kubespray/Kubernetes ì—…ê·¸ë ˆì´ë“œ ì‹œ ë§ˆì´ë„ˆ ë²„ì „ì„ ìŠ¤í‚µí•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ë§ˆì´ë„ˆ ë²„ì „ ìŠ¤í‚µ ê¸ˆì§€ ì´ìœ **:

1. **API í˜¸í™˜ì„±**:
   - KubernetesëŠ” N, N-1 ë²„ì „ ê°„ API í˜¸í™˜ ë³´ì¥
   - 2ë²„ì „ ì´ìƒ ìŠ¤í‚µ ì‹œ deprecated API ë¬¸ì œ ë°œìƒ

2. **ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**:
   - etcd ìŠ¤í‚¤ë§ˆê°€ ë²„ì „ë³„ë¡œ ë³€ê²½ë  ìˆ˜ ìˆìŒ
   - ìˆœì°¨ì  ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”

3. **í…ŒìŠ¤íŠ¸ ë²”ìœ„**:
   - KubesprayëŠ” 1ë²„ì „ ì—…ê·¸ë ˆì´ë“œë§Œ í…ŒìŠ¤íŠ¸
   - 2ë²„ì „ ìŠ¤í‚µì€ í…ŒìŠ¤íŠ¸ë˜ì§€ ì•ŠìŒ

4. **ë¡¤ë°± ì–´ë ¤ì›€**:
   - ë¬¸ì œ ë°œìƒ ì‹œ ì¤‘ê°„ ë²„ì „ì´ ì—†ìœ¼ë©´ ë¡¤ë°± ë³µì¡

**ì˜¬ë°”ë¥¸ ê²½ë¡œ**:
```
v2.27.0 â†’ v2.28.0 â†’ v2.28.1 â†’ v2.29.0 â†’ v2.29.1
```

</details>

---

### ì§ˆë¬¸ 7: ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¶„ë¦¬ ì´ìœ 

**Q**: ì™œ docker.io, quay.io, ghcr.io, registry.k8s.ioë¥¼ ë³„ë„ì˜ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì»¨í…Œì´ë„ˆë¡œ ë¶„ë¦¬í•˜ë‚˜ìš”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ë¶„ë¦¬í•˜ëŠ” ì´ìœ **:

1. **ì¸ì¦ ì²´ê³„ ì°¨ì´**:
   - Docker Hub: Rate Limit, í† í° ê¸°ë°˜ ì¸ì¦
   - quay.io: Red Hat SSO
   - ghcr.io: GitHub Token
   - registry.k8s.io: ìµëª… ì ‘ê·¼

2. **ì„¤ì • ê´€ë¦¬ ìš©ì´ì„±**:
   - ê° ë ˆì§€ìŠ¤íŠ¸ë¦¬ë³„ ë…ë¦½ì ì¸ config.yml
   - ë¬¸ì œ ë°œìƒ ì‹œ ê°œë³„ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

3. **ì¥ì•  ê²©ë¦¬**:
   - í•œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¬¸ì œê°€ ë‹¤ë¥¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì˜í–¥ ì—†ìŒ
   - ê°œë³„ ì¬ì‹œì‘ ê°€ëŠ¥

4. **ìŠ¤í† ë¦¬ì§€ ê´€ë¦¬**:
   - ë ˆì§€ìŠ¤íŠ¸ë¦¬ë³„ ìºì‹œ í¬ê¸° íŒŒì•… ìš©ì´
   - ì„ íƒì  ì •ë¦¬ ê°€ëŠ¥

</details>

---

### ì§ˆë¬¸ 8: ë¦¬ì†ŒìŠ¤ ê²€ì¦

**Q**: ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œ ë°°í¬ ì „ ë¦¬ì†ŒìŠ¤ ê²€ì¦ì´ ì¤‘ìš”í•œ ì´ìœ ì™€ ê²€ì¦ í•­ëª©ì„ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ê²€ì¦ì´ ì¤‘ìš”í•œ ì´ìœ **:
- ì˜¤í”„ë¼ì¸ì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ ëˆ„ë½ ì‹œ **ë³µêµ¬ ë¶ˆê°€ëŠ¥**
- ë°°í¬ ì¤‘ê°„ì— ì‹¤íŒ¨í•˜ë©´ í´ëŸ¬ìŠ¤í„°ê°€ ë¶ˆì™„ì „í•œ ìƒíƒœë¡œ ë‚¨ìŒ
- ì‚¬ì „ ê²€ì¦ìœ¼ë¡œ ë¬¸ì œ ì˜ˆë°©

**í•„ìˆ˜ ê²€ì¦ í•­ëª©**:

1. **íŒŒì¼ ì„œë²„ ì ‘ê·¼**:
   - HTTP ì—°ê²° í…ŒìŠ¤íŠ¸
   - Nginx ì„œë¹„ìŠ¤ ìƒíƒœ

2. **ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì¡´ì¬**:
   - kubeadm, kubelet, kubectl
   - containerd, etcd, CNI plugins

3. **ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì ‘ê·¼**:
   - ê° í¬íŠ¸(5000-5003) ì—°ê²° í…ŒìŠ¤íŠ¸
   - /v2/_catalog API ì‘ë‹µ

4. **í•„ìˆ˜ ì´ë¯¸ì§€ ì¡´ì¬**:
   - kube-apiserver, etcd, coredns
   - cilium/cilium, pause
   - íƒœê·¸ ëª©ë¡ì—ì„œ ë²„ì „ í™•ì¸

</details>

---

### ì§ˆë¬¸ 9: íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ìˆœì„œ

**Q**: ì´ë¯¸ì§€ Pull ì‹¤íŒ¨ ì‹œ ì§„ë‹¨ ìˆœì„œë¥¼ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ì§„ë‹¨ ìˆœì„œ**:

1. **crictlë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸**:
   ```bash
   crictl pull quay.io/cilium/cilium:v1.18.5
   ```
   â†’ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

2. **containerd ì„¤ì • í™•ì¸**:
   ```bash
   cat /etc/containerd/certs.d/quay.io/hosts.toml
   ```
   â†’ ë¯¸ëŸ¬ URL, capabilities í™•ì¸

3. **ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì§ì ‘ ì ‘ê·¼**:
   ```bash
   curl http://repo.example.com:5001/v2/_catalog
   curl http://repo.example.com:5001/v2/cilium/cilium/tags/list
   ```
   â†’ ì´ë¯¸ì§€ ìºì‹œ ì¡´ì¬ í™•ì¸

4. **ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì»¨í…Œì´ë„ˆ ìƒíƒœ**:
   ```bash
   podman ps -a
   podman logs registry-quayio
   ```
   â†’ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ìƒíƒœ, ì—ëŸ¬ ë¡œê·¸ í™•ì¸

5. **ë„¤íŠ¸ì›Œí¬ ì—°ê²°**:
   ```bash
   nc -zv repo.example.com 5001
   ```
   â†’ í¬íŠ¸ ì ‘ê·¼ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸

</details>

---

### ì§ˆë¬¸ 10: ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

**Q**: ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œë„ ì ìš©í•´ì•¼ í•˜ëŠ” ë³´ì•ˆ ì¡°ì¹˜ 3ê°€ì§€ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

1. **ì²´í¬ì„¬ ê²€ì¦**:
   - ëª¨ë“  ë°”ì´ë„ˆë¦¬ì˜ SHA256 ì²´í¬ì„¬ ì €ì¥
   - ì „ì†¡ í›„ ë¬´ê²°ì„± ê²€ì¦
   - ë³€ì¡° ê°ì§€

2. **ë„¤íŠ¸ì›Œí¬ ë¶„ë¦¬**:
   - ë ˆí¬ì§€í† ë¦¬ ì„œë²„ëŠ” ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ì—ë§Œ ë…¸ì¶œ
   - ë¶ˆí•„ìš”í•œ í¬íŠ¸ ì ‘ê·¼ ì°¨ë‹¨
   - ë°©í™”ë²½ ê·œì¹™ ìµœì†Œí™”

3. **ì·¨ì•½ì  ìŠ¤ìº”**:
   - ìºì‹œëœ ì´ë¯¸ì§€ì˜ ì •ê¸°ì  ì·¨ì•½ì  ìŠ¤ìº” (Trivy)
   - ì¤‘ìš” CVE ë°œê²¬ ì‹œ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
   - ìŠ¤ìº” ê²°ê³¼ ê¸°ë¡ ë° ì¶”ì 

ì¶”ê°€ ê¶Œì¥:
- TLS ì ìš© (ë‚´ë¶€ CA êµ¬ì„±)
- ì ‘ê·¼ ì œì–´ (IP ê¸°ë°˜ ì œí•œ)
- ê°ì‚¬ ë¡œê·¸ í™œì„±í™”

</details>

---

## ë‹¤ìŒ ë‹¨ê³„

### ì´ ì¥ì„ ë§ˆì¹œ í›„

1. **ì‹¤ì œ ë ˆí¬ì§€í† ë¦¬ ì„œë²„ êµ¬ì¶•**:
   - í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ 4ê°œ ì„¤ì •
   - Nginx íŒŒì¼ ì„œë²„ êµ¬ì„±
   - ë°©í™”ë²½ ë° DNS ì„¤ì •

2. **ë¦¬ì†ŒìŠ¤ ì‚¬ì „ ìºì‹±**:
   - ì˜¨ë¼ì¸ í™˜ê²½ì—ì„œ ì´ë¯¸ì§€ ìºì‹± ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
   - ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ ë° ë°°ì¹˜
   - ì²´í¬ì„¬ ìƒì„± ë° ê²€ì¦

3. **í´ëŸ¬ìŠ¤í„° ë°°í¬ ì¤€ë¹„**:
   - Kubespray ì¸ë²¤í† ë¦¬ ì„¤ì •
   - ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ ê²€ì¦ ì‹¤í–‰
   - í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë¨¼ì € ë°°í¬

### ë‹¤ìŒ í•™ìŠµ ê²½ë¡œ

ì´ ë¬¸ì„œë¡œ concepts ì‹œë¦¬ì¦ˆê°€ ì™„ë£Œë©ë‹ˆë‹¤! ë‹¤ìŒ ë‹¨ê³„ë¡œ:

1. **[Day 0: Kubespray ì˜¤í”„ë¼ì¸ ì¤€ë¹„](../day0-preparation/03-kubespray-offline-prepare.md)** - ì‹¤ì œ ì˜¤í”„ë¼ì¸ í™˜ê²½ êµ¬ì¶•
2. **[Day 1: í´ëŸ¬ìŠ¤í„° ì„¤ì¹˜](../day1-deployment/01-cluster-install.md)** - Kubernetes í´ëŸ¬ìŠ¤í„° ë°°í¬
3. **[Day 2: ì—…ê·¸ë ˆì´ë“œ ê°€ì´ë“œ](../day2-operations/01-upgrade-guide.md)** - ìš´ì˜ ë° ìœ ì§€ë³´ìˆ˜

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ

| ë¦¬ì†ŒìŠ¤ | URL |
|--------|-----|
| **Kubespray ê³µì‹ ë¬¸ì„œ** | https://kubespray.io |
| **containerd Registry Configuration** | https://github.com/containerd/containerd/blob/main/docs/hosts.md |
| **Docker Registry ë°°í¬ ê°€ì´ë“œ** | https://docs.docker.com/registry/deploying |
| **Harbor (ëŒ€ì•ˆ ì†”ë£¨ì…˜)** | https://goharbor.io |

### ìœ ìš©í•œ ë„êµ¬

| ë„êµ¬ | ìš©ë„ |
|------|------|
| **Skopeo** | ì´ë¯¸ì§€ ë³µì‚¬/ë™ê¸°í™” (ë ˆì§€ìŠ¤íŠ¸ë¦¬ ê°„ ë³µì‚¬) |
| **Crane** | ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¡°ì‘ (íƒœê·¸ ëª©ë¡, ë§¤ë‹ˆí˜ìŠ¤íŠ¸ í™•ì¸) |
| **Trivy** | ì´ë¯¸ì§€ ì·¨ì•½ì  ìŠ¤ìº” |
| **Cosign** | ì´ë¯¸ì§€ ì„œëª… ë° ê²€ì¦ |

### í”„ë¡œì íŠ¸ ë‚´ ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `playbooks/verify-offline-resources.yml` | ì˜¤í”„ë¼ì¸ ë¦¬ì†ŒìŠ¤ ê²€ì¦ Playbook |
| `playbooks/offline-pre-setup.yml` | ë…¸ë“œ ì‚¬ì „ ì„¤ì • Playbook |
| `configs/kubespray/custom-config.yml` | Kubespray ì»¤ìŠ¤í…€ ì„¤ì • ì˜ˆì‹œ |
| `docs/day0-preparation/05-proxy-container-registry.md` | í”„ë¡ì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ìƒì„¸ ê°€ì´ë“œ |

---

> **ì¶•í•˜í•©ë‹ˆë‹¤!** ì´ ë¬¸ì„œë¡œ Kubespray ì˜¤í”„ë¼ì¸ ì„¤ì¹˜ ê°œë… ì‹œë¦¬ì¦ˆë¥¼ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ì´ì œ ì‹¤ì œ Day 0/1/2 ë¬¸ì„œë¥¼ ë”°ë¼ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.
