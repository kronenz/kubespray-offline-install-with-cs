# Kubernetes ì•„í‚¤í…ì²˜ ì‹¬í™”

> *"KubernetesëŠ” ì»¨í…Œì´ë„ˆì˜ ë°°í¬, ìŠ¤ì¼€ì¼ë§, ê´€ë¦¬ë¥¼ ìë™í™”í•˜ëŠ” í”Œë«í¼ì´ ì•„ë‹™ë‹ˆë‹¤. 
> KubernetesëŠ” ë³µì¡í•œ ë¶„ì‚° ì‹œìŠ¤í…œì„ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” 'ì˜ë„ ê¸°ë°˜(intent-based)' ì¸í”„ë¼ì…ë‹ˆë‹¤."*
> â€” Kelsey Hightower

ì»¨í…Œì´ë„ˆ í•˜ë‚˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì‰½ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìˆ˜ë°±, ìˆ˜ì²œ ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ì—¬ëŸ¬ ì„œë²„ì— ë°°í¬í•˜ê³ , ì¥ì• ê°€ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ ë³µêµ¬í•˜ë©°, íŠ¸ë˜í”½ ì¦ê°€ì— ë”°ë¼ ìŠ¤ì¼€ì¼ë§í•˜ê³ , ë¬´ì¤‘ë‹¨ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì€ ì™„ì „íˆ ë‹¤ë¥¸ ë¬¸ì œì…ë‹ˆë‹¤.

ì´ê²ƒì´ ë°”ë¡œ Kubernetesê°€ í•´ê²°í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. Googleì—ì„œ 15ë…„ê°„ ë‚´ë¶€ ì‹œìŠ¤í…œ(Borg)ì„ ìš´ì˜í•˜ë©° ì¶•ì í•œ ê²½í—˜ì„ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê³µê°œí•œ ê²ƒì´ Kubernetesì…ë‹ˆë‹¤. 2014ë…„ ì²˜ìŒ ê³µê°œëœ ì´í›„, KubernetesëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì˜ ì‚¬ì‹¤ìƒ í‘œì¤€(de facto standard)ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´ ì¥ì—ì„œëŠ” Kubernetesì˜ ë‚´ë¶€ ì•„í‚¤í…ì²˜ë¥¼ ì‹¬ì¸µì ìœ¼ë¡œ íƒêµ¬í•©ë‹ˆë‹¤. í‘œë©´ì ì¸ kubectl ëª…ë ¹ì–´ ì‚¬ìš©ë²•ì„ ë„˜ì–´ì„œ, Control Planeì´ ì–´ë–»ê²Œ í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ”ì§€, Podê°€ ì–´ë–»ê²Œ ìŠ¤ì¼€ì¤„ë§ë˜ê³  ì‹¤í–‰ë˜ëŠ”ì§€, Serviceê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ë¥¼ ì´í•´í•˜ë©´, ë³µì¡í•œ ìš´ì˜ í™˜ê²½ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ ê·¼ë³¸ì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ì´ ì¥ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©

ì´ ì¥ì„ ì½ê³  ë‚˜ë©´ ë‹¤ìŒì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **Kubernetesì˜ ì„¤ê³„ ì² í•™**: ì„ ì–¸ì  êµ¬ì„±, ì›í•˜ëŠ” ìƒíƒœ, Controller íŒ¨í„´
- **Control Plane ì»´í¬ë„ŒíŠ¸**: API Server, etcd, Scheduler, Controller Managerì˜ ì—­í• ê³¼ ìƒí˜¸ì‘ìš©
- **Worker Node ì»´í¬ë„ŒíŠ¸**: kubelet, Container Runtime, CNIì˜ ë™ì‘ ë°©ì‹
- **Pod ìƒëª…ì£¼ê¸°**: Podì´ ìƒì„±ë˜ê³  ì‹¤í–‰ë˜ê¸°ê¹Œì§€ì˜ ì „ì²´ ê³¼ì •
- **Service ë„¤íŠ¸ì›Œí‚¹**: ClusterIP, NodePort, LoadBalancerì˜ ë‚´ë¶€ êµ¬í˜„
- **Storage ì¶”ìƒí™”**: PV, PVC, StorageClassì˜ ê´€ê³„ì™€ ë™ì  í”„ë¡œë¹„ì €ë‹
- **Schedulerì˜ ê²°ì • ê³¼ì •**: Filtering, Scoring, Bindingì˜ ì•Œê³ ë¦¬ì¦˜
- **Controller íŒ¨í„´**: Reconciliation Loopê³¼ ì„ ì–¸ì  ì¸í”„ë¼ì˜ í•µì‹¬

> **ğŸ“˜ ê°œë… (Concept)**: Kubernetesë¥¼ "ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°"ë¼ê³  ë¶€ë¥´ì§€ë§Œ, ë” ì •í™•íˆëŠ” "ì„ ì–¸ì  ì¸í”„ë¼ í”Œë«í¼"ì…ë‹ˆë‹¤. ë‹¹ì‹ ì´ "ì›í•˜ëŠ” ìƒíƒœ(Desired State)"ë¥¼ ì„ ì–¸í•˜ë©´, Kubernetesê°€ "í˜„ì¬ ìƒíƒœ(Current State)"ë¥¼ ê·¸ì— ë§ì¶”ëŠ” ê²ƒì´ í•µì‹¬ ì² í•™ì…ë‹ˆë‹¤.

---

## 1. Kubernetes ì„¤ê³„ ì² í•™

### 1.1. ì„ ì–¸ì  êµ¬ì„± (Declarative Configuration)

ì „í†µì ì¸ ì¸í”„ë¼ ê´€ë¦¬ëŠ” **ëª…ë ¹í˜•(Imperative)**ì…ë‹ˆë‹¤. "ì„œë²„ Aì— nginxë¥¼ ì„¤ì¹˜í•˜ë¼", "í¬íŠ¸ 80ì„ ì—´ì–´ë¼"ì™€ ê°™ì´ ê° ë‹¨ê³„ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì§€ì‹œí•©ë‹ˆë‹¤. ë°˜ë©´ KubernetesëŠ” **ì„ ì–¸ì (Declarative)** ì ‘ê·¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ëª…ë ¹í˜• vs ì„ ì–¸ì  ì ‘ê·¼ ë°©ì‹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ëª…ë ¹í˜• (Imperative)                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚   "HOW" - ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€ë¥¼ ì§€ì‹œ                                            â”‚
â”‚                                                                             â”‚
â”‚   $ kubectl run nginx --image=nginx                                        â”‚
â”‚   $ kubectl scale deployment nginx --replicas=3                            â”‚
â”‚   $ kubectl expose deployment nginx --port=80                              â”‚
â”‚                                                                             â”‚
â”‚   ë¬¸ì œì :                                                                   â”‚
â”‚   â€¢ ì‹¤í–‰ ìˆœì„œê°€ ì¤‘ìš”                                                        â”‚
â”‚   â€¢ í˜„ì¬ ìƒíƒœë¥¼ ì•Œì•„ì•¼ ë‹¤ìŒ ëª…ë ¹ ê²°ì • ê°€ëŠ¥                                    â”‚
â”‚   â€¢ ì¥ì•  ë³µêµ¬ ì‹œ ì–´ë–¤ ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ í•˜ëŠ”ì§€ ë¶ˆëª…í™•                            â”‚
â”‚   â€¢ íˆìŠ¤í† ë¦¬ ì¶”ì  ì–´ë ¤ì›€                                                     â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ì„ ì–¸ì  (Declarative)                                                      â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚   "WHAT" - ì›í•˜ëŠ” ìµœì¢… ìƒíƒœë¥¼ ì„ ì–¸                                           â”‚
â”‚                                                                             â”‚
â”‚   apiVersion: apps/v1                                                       â”‚
â”‚   kind: Deployment                                                          â”‚
â”‚   metadata:                                                                 â”‚
â”‚     name: nginx                                                             â”‚
â”‚   spec:                                                                     â”‚
â”‚     replicas: 3                                                             â”‚
â”‚     selector:                                                               â”‚
â”‚       matchLabels:                                                          â”‚
â”‚         app: nginx                                                          â”‚
â”‚     template:                                                               â”‚
â”‚       spec:                                                                 â”‚
â”‚         containers:                                                         â”‚
â”‚         - name: nginx                                                       â”‚
â”‚           image: nginx                                                      â”‚
â”‚                                                                             â”‚
â”‚   $ kubectl apply -f deployment.yaml                                       â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì :                                                                     â”‚
â”‚   â€¢ ì‹¤í–‰ ìˆœì„œ ë¬´ê´€ (Kubernetesê°€ ì°¨ì´ë¥¼ ê³„ì‚°)                                 â”‚
â”‚   â€¢ í˜„ì¬ ìƒíƒœë¥¼ ëª°ë¼ë„ ë¨ (ì›í•˜ëŠ” ìƒíƒœë§Œ ì„ ì–¸)                                 â”‚
â”‚   â€¢ ì¥ì•  ë³µêµ¬ëŠ” ê°™ì€ YAMLì„ ë‹¤ì‹œ apply                                       â”‚
â”‚   â€¢ Gitìœ¼ë¡œ ë²„ì „ ê´€ë¦¬ ê°€ëŠ¥ (GitOps)                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ’¡ íŒ (Tip)**: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” í•­ìƒ ì„ ì–¸ì  ë°©ì‹(`kubectl apply -f`)ì„ ì‚¬ìš©í•˜ì„¸ìš”. ëª…ë ¹í˜• ë°©ì‹(`kubectl run`, `kubectl create`)ì€ í•™ìŠµì´ë‚˜ ê¸´ê¸‰ ìƒí™©ì—ì„œë§Œ ì‚¬ìš©í•˜ê³ , ë°˜ë“œì‹œ ì´í›„ì— YAMLë¡œ ì •ë¦¬í•˜ì„¸ìš”.

### 1.2. Controller íŒ¨í„´ê³¼ Reconciliation Loop

Kubernetesì˜ í•µì‹¬ì€ **Controller íŒ¨í„´**ì…ë‹ˆë‹¤. ëª¨ë“  ControllerëŠ” ë™ì¼í•œ ì›ë¦¬ë¡œ ë™ì‘í•©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Controller Reconciliation Loop                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                              â”‚   Observe     â”‚                              â”‚
â”‚                              â”‚   (ê´€ì°°)      â”‚                              â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                      â”‚                                      â”‚
â”‚                                      â”‚ í˜„ì¬ ìƒíƒœ í™•ì¸                        â”‚
â”‚                                      â”‚ (etcdì—ì„œ ì½ê¸°)                       â”‚
â”‚                                      â–¼                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚    â”‚    Action     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Compare     â”‚                              â”‚
â”‚    â”‚    (í–‰ë™)     â”‚  ì°¨ì´    â”‚   (ë¹„êµ)      â”‚                              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  ìˆìŒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚            â”‚                        â”‚                                       â”‚
â”‚            â”‚ ìƒíƒœ ë³€ê²½              â”‚ í˜„ì¬ ìƒíƒœ == ì›í•˜ëŠ” ìƒíƒœ?              â”‚
â”‚            â”‚ (Pod ìƒì„±/ì‚­ì œ,        â”‚                                       â”‚
â”‚            â”‚  ReplicaSet ì¡°ì • ë“±)   â”‚ ì°¨ì´ ì—†ìŒ                              â”‚
â”‚            â”‚                        â–¼                                       â”‚
â”‚            â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚            â”‚                 â”‚  No Action    â”‚                              â”‚
â”‚            â”‚                 â”‚  (ëŒ€ê¸°)       â”‚                              â”‚
â”‚            â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚            â”‚                        â”‚                                       â”‚
â”‚            â”‚                        â”‚                                       â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                                                          â”‚                  â”‚
â”‚                              ë‹¤ìŒ Reconciliation Cycle   â”‚                  â”‚
â”‚                              (ì´ë²¤íŠ¸ ë˜ëŠ” ì£¼ê¸°ì  ì¬ë™ê¸°í™”) â”‚                  â”‚
â”‚                              â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                             â”‚
â”‚   ì˜ˆì‹œ: Deployment Controller                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚   ì›í•˜ëŠ” ìƒíƒœ: replicas = 3                                                  â”‚
â”‚   í˜„ì¬ ìƒíƒœ:   ì‹¤í–‰ ì¤‘ì¸ Pod = 2                                             â”‚
â”‚   ì°¨ì´:        1ê°œ Pod ë¶€ì¡±                                                  â”‚
â”‚   í–‰ë™:        ReplicaSetì— Pod 1ê°œ ìƒì„± ìš”ì²­                                â”‚
â”‚                                                                             â”‚
â”‚   í•µì‹¬ ì›ë¦¬:                                                                â”‚
â”‚   â€¢ ControllerëŠ” "ì›í•˜ëŠ” ìƒíƒœë¡œ ìˆ˜ë ´(converge)"í•˜ë ¤ê³  ëŠì„ì—†ì´ ë…¸ë ¥           â”‚
â”‚   â€¢ ì¥ì• , ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ í›„ì—ë„ ìë™ ë³µêµ¬                                      â”‚
â”‚   â€¢ ì—¬ëŸ¬ Controllerê°€ ë™ì‹œì— ë™ì‘í•´ë„ ì¶©ëŒ ì—†ìŒ (ë‚™ê´€ì  ë™ì‹œì„±)               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“˜ ê°œë… (Concept)**: Reconciliation Loopì€ Kubernetesì˜ "ìê°€ ì¹˜ìœ (Self-Healing)" ëŠ¥ë ¥ì˜ ê·¼ê°„ì…ë‹ˆë‹¤. Podê°€ ì£½ìœ¼ë©´ Controllerê°€ ê°ì§€í•˜ê³  ìƒˆ Podë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë…¸ë“œê°€ ì¥ì• ê°€ ë‚˜ë©´ Controllerê°€ ë‹¤ë¥¸ ë…¸ë“œì— Podë¥¼ ì¬ìŠ¤ì¼€ì¤„ë§í•©ë‹ˆë‹¤. ì´ ëª¨ë“  ê²ƒì´ ìë™ìœ¼ë¡œ ì¼ì–´ë‚©ë‹ˆë‹¤.

### 1.3. ëŠìŠ¨í•œ ê²°í•© (Loose Coupling)

Kubernetes ì»´í¬ë„ŒíŠ¸ë“¤ì€ ì„œë¡œ ì§ì ‘ í†µì‹ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  í†µì‹ ì€ **API Serverë¥¼ í†µí•´** ì´ë£¨ì–´ì§€ê³ , ìƒíƒœëŠ” **etcdì— ì €ì¥**ë©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ëŠìŠ¨í•œ ê²°í•© ì•„í‚¤í…ì²˜                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ì˜ëª»ëœ ì´í•´ (ê°•í•œ ê²°í•©):                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚                                                                             â”‚
â”‚   Scheduler â”€â”€â”€â”€â–º kubelet â”€â”€â”€â”€â–º containerd                                 â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â””â”€â”€â”€â”€â–º Controller â”€â”€â”€â”€â–º kubelet                                      â”‚
â”‚                                                                             â”‚
â”‚   ë¬¸ì œ: ì»´í¬ë„ŒíŠ¸ ê°„ ì§ì ‘ ì˜ì¡´ì„±, ì¥ì•  ì „íŒŒ, í™•ì¥ ì–´ë ¤ì›€                        â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ì‹¤ì œ ì•„í‚¤í…ì²˜ (ëŠìŠ¨í•œ ê²°í•©):                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                             â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚               â”‚                                     â”‚                       â”‚
â”‚               â”‚           API Server                â”‚                       â”‚
â”‚               â”‚                                     â”‚                       â”‚
â”‚               â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                       â”‚
â”‚               â”‚   â”‚           etcd              â”‚   â”‚                       â”‚
â”‚               â”‚   â”‚    (Single Source of Truth) â”‚   â”‚                       â”‚
â”‚               â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                       â”‚
â”‚               â”‚                                     â”‚                       â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                  â”‚                                          â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚          â”‚                       â”‚                       â”‚                  â”‚
â”‚          â–¼                       â–¼                       â–¼                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚  Scheduler  â”‚         â”‚  Controller â”‚         â”‚   kubelet   â”‚          â”‚
â”‚   â”‚             â”‚         â”‚   Manager   â”‚         â”‚             â”‚          â”‚
â”‚   â”‚ Watch:      â”‚         â”‚             â”‚         â”‚ Watch:      â”‚          â”‚
â”‚   â”‚ unscheduled â”‚         â”‚ Watch:      â”‚         â”‚ pods on     â”‚          â”‚
â”‚   â”‚ pods        â”‚         â”‚ deployments,â”‚         â”‚ this node   â”‚          â”‚
â”‚   â”‚             â”‚         â”‚ replicasets â”‚         â”‚             â”‚          â”‚
â”‚   â”‚ Write:      â”‚         â”‚             â”‚         â”‚ Write:      â”‚          â”‚
â”‚   â”‚ pod.spec.   â”‚         â”‚ Write:      â”‚         â”‚ pod.status  â”‚          â”‚
â”‚   â”‚ nodeName    â”‚         â”‚ replicasets â”‚         â”‚             â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   í†µì‹  ë°©ì‹:                                                                â”‚
â”‚   â€¢ ì»´í¬ë„ŒíŠ¸ë“¤ì€ API Serverë¥¼ Watchí•˜ë©° ê´€ì‹¬ ìˆëŠ” ë¦¬ì†ŒìŠ¤ ë³€í™”ë¥¼ ê°ì§€           â”‚
â”‚   â€¢ ë³€ê²½ì´ í•„ìš”í•˜ë©´ API Serverì— Write                                      â”‚
â”‚   â€¢ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ëŠ” ê·¸ ë³€ê²½ì„ Watchí•˜ê³  ë°˜ì‘                                  â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì :                                                                     â”‚
â”‚   â€¢ ì»´í¬ë„ŒíŠ¸ ë…ë¦½ì  ìŠ¤ì¼€ì¼ë§ ê°€ëŠ¥                                            â”‚
â”‚   â€¢ í•œ ì»´í¬ë„ŒíŠ¸ ì¥ì• ê°€ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì— ì§ì ‘ ì˜í–¥ ì—†ìŒ                          â”‚
â”‚   â€¢ ìƒˆë¡œìš´ Controller ì¶”ê°€ê°€ ìš©ì´ (Custom Controller)                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¹ì…˜ ìš”ì•½

- **ì„ ì–¸ì  êµ¬ì„±**: "ì–´ë–»ê²Œ"ê°€ ì•„ë‹Œ "ë¬´ì—‡ì„" ì •ì˜í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì¸í”„ë¼ ê´€ë¦¬
- **Controller íŒ¨í„´**: Observe â†’ Compare â†’ Act ë£¨í”„ë¡œ ì›í•˜ëŠ” ìƒíƒœ ìœ ì§€
- **ëŠìŠ¨í•œ ê²°í•©**: API Serverì™€ etcdë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ê°„ ê°„ì ‘ í†µì‹ 

---

## 2. Control Plane ì»´í¬ë„ŒíŠ¸

Control Planeì€ í´ëŸ¬ìŠ¤í„°ì˜ "ë‘ë‡Œ"ì…ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ì „ì²´ì˜ ê²°ì •ì„ ë‚´ë¦¬ê³ (ì˜ˆ: Pod ìŠ¤ì¼€ì¤„ë§), í´ëŸ¬ìŠ¤í„° ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•˜ê³  ë°˜ì‘í•©ë‹ˆë‹¤(ì˜ˆ: Deploymentì˜ replicas í•„ë“œê°€ ë§Œì¡±ë˜ì§€ ì•Šìœ¼ë©´ ìƒˆ Pod ì‹œì‘).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Control Plane ì•„í‚¤í…ì²˜                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Control Plane Node(s)                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                      kube-apiserver                            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ í´ëŸ¬ìŠ¤í„°ì˜ "í”„ë¡ íŠ¸ ë°ìŠ¤í¬"                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ í†µì‹ í•˜ëŠ” ìœ ì¼í•œ ì°½êµ¬                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ REST API ì œê³µ (kubectl, kubelet, controller ë“±)             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ì¸ì¦(Authentication), ì¸ê°€(Authorization), ìŠ¹ì¸(Admission)   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                â”‚                                      â”‚  â”‚
â”‚  â”‚                                â”‚ Read/Write                           â”‚  â”‚
â”‚  â”‚                                â–¼                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                          etcd                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œ (Raft í•©ì˜)                                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ í´ëŸ¬ìŠ¤í„°ì˜ "ì§„ì‹¤ì˜ ì›ì²œ(Source of Truth)"                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ëª¨ë“  ì˜¤ë¸Œì íŠ¸ ìƒíƒœ ì €ì¥ (Pod, Service, ConfigMap...)         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ API Serverë§Œ ì§ì ‘ ì ‘ê·¼ (ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ëŠ” API Server í†µí•´)      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚      kube-scheduler         â”‚  â”‚  kube-controller-manager    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚  â”‚                             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Podë¥¼ ë…¸ë“œì— ë°°ì •         â”‚  â”‚ â€¢ ë‹¤ì–‘í•œ Controller ì‹¤í–‰    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ ë¦¬ì†ŒìŠ¤, ì œì•½ì¡°ê±´ í‰ê°€     â”‚  â”‚   - Node Controller         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ í•„í„°ë§ â†’ ì ìˆ˜í™” â†’ ë°”ì¸ë”©  â”‚  â”‚   - Deployment Controller   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚  â”‚   - ReplicaSet Controller   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚  â”‚   - Endpoint Controller     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚  â”‚   - ServiceAccount ë“±       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                             â”‚  â”‚                             â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                cloud-controller-manager (ì„ íƒì )               â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš© (AWS, GCP, Azure ë“±)                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ (LoadBalancer, Volume, Route ë“±)        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ì˜¨í”„ë ˆë¯¸ìŠ¤/ë² ì–´ë©”íƒˆì—ì„œëŠ” ë¶ˆí•„ìš”                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1. kube-apiserver

API ServerëŠ” Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ "ê´€ë¬¸(Gateway)"ì…ë‹ˆë‹¤. ëª¨ë“  ë‚´ë¶€/ì™¸ë¶€ í†µì‹ ì´ ì´ê³³ì„ í†µê³¼í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     kube-apiserver ìš”ì²­ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Client (kubectl, kubelet, controller, ì™¸ë¶€ ì‹œìŠ¤í…œ)                        â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ HTTPS Request                                                       â”‚
â”‚       â”‚ POST /api/v1/namespaces/default/pods                               â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  1. Authentication (ì¸ì¦) - "ë‹¹ì‹ ì€ ëˆ„êµ¬ì¸ê°€?"                       â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚     â”‚  ë°©ë²•               â”‚  ì„¤ëª…                                 â”‚  â”‚  â”‚
â”‚   â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚   â”‚     â”‚  X.509 ì¸ì¦ì„œ       â”‚  kubelet, controller-manager ë“±       â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  Bearer Token       â”‚  ServiceAccount, OIDC                 â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  Basic Auth         â”‚  ì‚¬ìš©ì ì´ë¦„/ë¹„ë°€ë²ˆí˜¸ (ë¹„ê¶Œì¥)         â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  Webhook            â”‚  ì™¸ë¶€ ì¸ì¦ ì‹œìŠ¤í…œ ì—°ë™                 â”‚  â”‚  â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     ê²°ê³¼: User info (username, uid, groups)                          â”‚  â”‚
â”‚   â”‚     ì‹¤íŒ¨: 401 Unauthorized                                           â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  2. Authorization (ì¸ê°€) - "ì´ ì‘ì—…ì„ í•  ê¶Œí•œì´ ìˆëŠ”ê°€?"             â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚     â”‚  RBAC (Role-Based Access Control) - ê¶Œì¥                    â”‚  â”‚  â”‚
â”‚   â”‚     â”‚                                                             â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  ì£¼ìš” ë¦¬ì†ŒìŠ¤:                                               â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  â€¢ Role / ClusterRole: ê¶Œí•œ ì •ì˜                            â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  â€¢ RoleBinding / ClusterRoleBinding: ì‚¬ìš©ìì— ê¶Œí•œ ë¶€ì—¬     â”‚  â”‚  â”‚
â”‚   â”‚     â”‚                                                             â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  í™•ì¸ ë‚´ìš©:                                                 â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  â€¢ API ê·¸ë£¹ (core, apps, networking.k8s.io...)             â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  â€¢ ë¦¬ì†ŒìŠ¤ (pods, deployments, services...)                 â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  â€¢ ë™ì‚¬ (get, list, create, delete, watch...)              â”‚  â”‚  â”‚
â”‚   â”‚     â”‚  â€¢ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (default, kube-system...)                  â”‚  â”‚  â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     ê²°ê³¼: Allow ë˜ëŠ” Deny                                            â”‚  â”‚
â”‚   â”‚     ì‹¤íŒ¨: 403 Forbidden                                              â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  3. Admission Control (ìŠ¹ì¸ ì œì–´) - "ì´ ìš”ì²­ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ê±°ë¶€"      â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     3a. Mutating Admission (ë³€í˜•)                                    â”‚  â”‚
â”‚   â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚  â”‚
â”‚   â”‚     â€¢ ìš”ì²­ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŒ                                          â”‚  â”‚
â”‚   â”‚     â€¢ ì˜ˆ: Sidecar injection, ê¸°ë³¸ê°’ ì„¤ì •                             â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     3b. Validating Admission (ê²€ì¦)                                  â”‚  â”‚
â”‚   â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚  â”‚
â”‚   â”‚     â€¢ ìš”ì²­ì„ ê±°ë¶€í•  ìˆ˜ ìˆìŒ (ìˆ˜ì • ë¶ˆê°€)                               â”‚  â”‚
â”‚   â”‚     â€¢ ì˜ˆ: ë¦¬ì†ŒìŠ¤ ì œí•œ ê²€ì‚¬, ë³´ì•ˆ ì •ì±… ê²€ì¦                            â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     ì£¼ìš” Admission Controller:                                       â”‚  â”‚
â”‚   â”‚     â€¢ LimitRanger: ë¦¬ì†ŒìŠ¤ ìš”ì²­/ì œí•œ ê¸°ë³¸ê°’                           â”‚  â”‚
â”‚   â”‚     â€¢ ResourceQuota: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë¦¬ì†ŒìŠ¤ í• ë‹¹ëŸ‰                       â”‚  â”‚
â”‚   â”‚     â€¢ PodSecurity: Pod ë³´ì•ˆ í‘œì¤€ ì ìš©                                â”‚  â”‚
â”‚   â”‚     â€¢ MutatingAdmissionWebhook: ì™¸ë¶€ webhook (Istio ë“±)             â”‚  â”‚
â”‚   â”‚     â€¢ ValidatingAdmissionWebhook: ì™¸ë¶€ ê²€ì¦ webhook                  â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  4. Validation (ìŠ¤í‚¤ë§ˆ ê²€ì¦)                                        â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     â€¢ OpenAPI ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í•„ë“œ ê²€ì¦                                   â”‚  â”‚
â”‚   â”‚     â€¢ í•„ìˆ˜ í•„ë“œ ì¡´ì¬ ì—¬ë¶€                                             â”‚  â”‚
â”‚   â”‚     â€¢ í•„ë“œ íƒ€ì… ë° ê°’ ë²”ìœ„                                            â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  5. etcd ì €ì¥                                                       â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚     â€¢ ì§ë ¬í™” (Protobuf ë˜ëŠ” JSON)                                    â”‚  â”‚
â”‚   â”‚     â€¢ resourceVersion í• ë‹¹ (ë‚™ê´€ì  ë™ì‹œì„± ì œì–´)                       â”‚  â”‚
â”‚   â”‚     â€¢ Watch ì´ë²¤íŠ¸ ë°œìƒ                                              â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   200 OK (ë˜ëŠ” 201 Created)                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **âš ï¸ ì£¼ì˜ (Warning)**: API Serverê°€ ë‹¤ìš´ë˜ë©´ í´ëŸ¬ìŠ¤í„°ì— ì–´ë–¤ ë³€ê²½ë„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ì¡´ì— ì‹¤í–‰ ì¤‘ì¸ PodëŠ” ê³„ì† ë™ì‘í•˜ì§€ë§Œ, ìƒˆ Pod ìƒì„±, ìŠ¤ì¼€ì¼ë§, ì„¤ì • ë³€ê²½ì´ ëª¨ë‘ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ 3ê°œ ì´ìƒì˜ API Serverë¥¼ ê³ ê°€ìš©ì„±ìœ¼ë¡œ êµ¬ì„±í•˜ì„¸ìš”.


#### Watch ë©”ì»¤ë‹ˆì¦˜

API Serverì˜ Watch ê¸°ëŠ¥ì€ Kubernetesì˜ ë°˜ì‘í˜• ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ì…ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Watch ë©”ì»¤ë‹ˆì¦˜                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Controller/kubelet                          API Server                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                 â”‚  GET /api/v1/pods       â”‚                 â”‚          â”‚
â”‚   â”‚   Informer      â”‚  ?watch=true            â”‚   Watch Cache   â”‚          â”‚
â”‚   â”‚   (ìºì‹œ + í)   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                 â”‚          â”‚
â”‚   â”‚                 â”‚                         â”‚                 â”‚          â”‚
â”‚   â”‚                 â”‚  HTTP/2 Stream          â”‚                 â”‚          â”‚
â”‚   â”‚                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                 â”‚          â”‚
â”‚   â”‚                 â”‚  (ì—°ê²° ìœ ì§€)            â”‚                 â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â”‚ ì´ë²¤íŠ¸ ìˆ˜ì‹                                                       â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Watch Event                                                        â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  {                                                                   â”‚  â”‚
â”‚   â”‚    "type": "ADDED" | "MODIFIED" | "DELETED",                        â”‚  â”‚
â”‚   â”‚    "object": {                                                       â”‚  â”‚
â”‚   â”‚      "apiVersion": "v1",                                            â”‚  â”‚
â”‚   â”‚      "kind": "Pod",                                                 â”‚  â”‚
â”‚   â”‚      "metadata": {                                                  â”‚  â”‚
â”‚   â”‚        "name": "nginx-xyz",                                         â”‚  â”‚
â”‚   â”‚        "resourceVersion": "12345"                                   â”‚  â”‚
â”‚   â”‚      },                                                             â”‚  â”‚
â”‚   â”‚      ...                                                            â”‚  â”‚
â”‚   â”‚    }                                                                 â”‚  â”‚
â”‚   â”‚  }                                                                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì :                                                                     â”‚
â”‚   â€¢ í´ë§ ì—†ì´ ì‹¤ì‹œê°„ ë³€ê²½ ê°ì§€ (íš¨ìœ¨ì )                                      â”‚
â”‚   â€¢ resourceVersion ê¸°ë°˜ ì¬ì—°ê²° (ì´ë²¤íŠ¸ ì†ì‹¤ ë°©ì§€)                           â”‚
â”‚   â€¢ ì„œë²„ ë¶€í•˜ ìµœì†Œí™”                                                        â”‚
â”‚                                                                             â”‚
â”‚   Informer íŒ¨í„´:                                                            â”‚
â”‚   â€¢ List: ì´ˆê¸° ì „ì²´ ë¦¬ì†ŒìŠ¤ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°                                     â”‚
â”‚   â€¢ Watch: ì´í›„ ë³€ê²½ ì‚¬í•­ë§Œ ìŠ¤íŠ¸ë¦¬ë°                                         â”‚
â”‚   â€¢ Local Cache: ë©”ëª¨ë¦¬ì— ìµœì‹  ìƒíƒœ ìœ ì§€ (API Server ë¶€í•˜ ê°ì†Œ)              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2. etcd

etcdëŠ” Kubernetesì˜ ëª¨ë“  ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [05-distributed-systems.md](05-distributed-systems.md)ì—ì„œ ë‹¤ë£¨ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” Kubernetesì™€ì˜ ê´€ê³„ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          etcdì™€ Kubernetes                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   etcd ì €ì¥ êµ¬ì¡° (í‚¤ ê³„ì¸µ)                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                             â”‚
â”‚   /registry/                                                                â”‚
â”‚   â”œâ”€â”€ pods/                                                                 â”‚
â”‚   â”‚   â”œâ”€â”€ default/                    # ë„¤ì„ìŠ¤í˜ì´ìŠ¤                        â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ nginx-deployment-abc123 # Pod ì´ë¦„                           â”‚
â”‚   â”‚   â”‚   â””â”€â”€ nginx-deployment-def456                                      â”‚
â”‚   â”‚   â”œâ”€â”€ kube-system/                                                     â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ coredns-xyz                                                  â”‚
â”‚   â”‚   â”‚   â””â”€â”€ cilium-agent-abc                                             â”‚
â”‚   â”‚   â””â”€â”€ production/                                                      â”‚
â”‚   â”‚       â””â”€â”€ webapp-prod-123                                              â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€ deployments/                                                         â”‚
â”‚   â”‚   â””â”€â”€ default/                                                         â”‚
â”‚   â”‚       â””â”€â”€ nginx-deployment                                             â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€ services/                                                            â”‚
â”‚   â”‚   â”œâ”€â”€ default/                                                         â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ kubernetes           # ê¸°ë³¸ API ì„œë¹„ìŠ¤                       â”‚
â”‚   â”‚   â”‚   â””â”€â”€ nginx-service                                                â”‚
â”‚   â”‚   â””â”€â”€ kube-system/                                                     â”‚
â”‚   â”‚       â””â”€â”€ kube-dns                                                     â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€ secrets/                                                             â”‚
â”‚   â”‚   â””â”€â”€ default/                                                         â”‚
â”‚   â”‚       â””â”€â”€ my-secret            # ì•”í˜¸í™”ë˜ì–´ ì €ì¥ (etcd ì•”í˜¸í™” í™œì„±í™” ì‹œ)â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€ configmaps/                                                          â”‚
â”‚   â”‚   â””â”€â”€ kube-system/                                                     â”‚
â”‚   â”‚       â””â”€â”€ coredns                                                      â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â””â”€â”€ ...                                                                  â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   etcd í´ëŸ¬ìŠ¤í„° êµ¬ì„± (í”„ë¡œë•ì…˜)                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚                                                                             â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚           â”‚   etcd-1    â”‚â—„â”€â”€â”€â”€â”€â”                                            â”‚
â”‚           â”‚   (Leader)  â”‚      â”‚                                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚                                            â”‚
â”‚                  â”‚             â”‚ Raft ë³µì œ                                   â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                            â”‚
â”‚       â”‚                     â”‚  â”‚                                            â”‚
â”‚       â–¼                     â–¼  â”‚                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   â”‚   etcd-2    â”‚â—„â”€â”€â”€â–ºâ”‚   etcd-3    â”‚                                       â”‚
â”‚   â”‚  (Follower) â”‚     â”‚  (Follower) â”‚                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                             â”‚
â”‚   ì¿¼ëŸ¼: 3ë…¸ë“œ ì¤‘ 2ë…¸ë“œ ì´ìƒì´ ë™ì˜í•´ì•¼ ì“°ê¸° ê°€ëŠ¥ (ê³¼ë°˜ìˆ˜)                     â”‚
â”‚   â€¢ 1ë…¸ë“œ ì¥ì• : ì •ìƒ ë™ì‘                                                    â”‚
â”‚   â€¢ 2ë…¸ë“œ ì¥ì• : ì“°ê¸° ë¶ˆê°€ (ì½ê¸°ë§Œ ê°€ëŠ¥)                                       â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ë‚™ê´€ì  ë™ì‹œì„± ì œì–´ (Optimistic Concurrency)                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚                                                                             â”‚
â”‚   ëª¨ë“  Kubernetes ì˜¤ë¸Œì íŠ¸ëŠ” resourceVersionì„ ê°€ì§                          â”‚
â”‚                                                                             â”‚
â”‚   Client A                          etcd                     Client B       â”‚
â”‚      â”‚                                â”‚                          â”‚          â”‚
â”‚      â”‚ GET pod (rv=100)              â”‚                          â”‚          â”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚          â”‚
â”‚      â”‚                                â”‚                          â”‚          â”‚
â”‚      â”‚                                â”‚       GET pod (rv=100)  â”‚          â”‚
â”‚      â”‚                                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
â”‚      â”‚                                â”‚                          â”‚          â”‚
â”‚      â”‚ UPDATE pod (rv=100)           â”‚                          â”‚          â”‚
â”‚      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                          â”‚          â”‚
â”‚      â”‚ OK (rv=101)                   â”‚                          â”‚          â”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚          â”‚
â”‚      â”‚                                â”‚                          â”‚          â”‚
â”‚      â”‚                                â”‚   UPDATE pod (rv=100)   â”‚          â”‚
â”‚      â”‚                                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
â”‚      â”‚                                â”‚   409 Conflict!         â”‚          â”‚
â”‚      â”‚                                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
â”‚      â”‚                                â”‚   (rv=100 != í˜„ì¬ 101)  â”‚          â”‚
â”‚                                                                             â”‚
â”‚   Client BëŠ” ìµœì‹  ë²„ì „ì„ ë‹¤ì‹œ ì½ê³  ìˆ˜ì •í•´ì•¼ í•¨ â†’ ì¶©ëŒ ë°©ì§€                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ’¡ íŒ (Tip)**: `etcdctl`ë¡œ ì§ì ‘ etcdë¥¼ ì¡°ì‘í•˜ëŠ” ê²ƒì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤. í•­ìƒ `kubectl`ì„ í†µí•´ API Serverë¥¼ ê²½ìœ í•˜ì„¸ìš”. ì§ì ‘ ì¡°ì‘ì€ ë°±ì—…/ë³µêµ¬ ìƒí™©ì—ì„œë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```bash
# etcd ë°ì´í„° ì§ì ‘ ì¡°íšŒ (ë””ë²„ê¹…ìš©)
ETCDCTL_API=3 etcdctl \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key \
  get /registry/pods/default/nginx --prefix --keys-only

# etcd í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
etcdctl endpoint status --write-out=table

# etcd ë°±ì—… (í•„ìˆ˜!)
etcdctl snapshot save /backup/etcd-$(date +%Y%m%d).db
```

### 2.3. kube-scheduler

SchedulerëŠ” ìƒˆë¡œ ìƒì„±ëœ Podë¥¼ ì–´ëŠ ë…¸ë“œì—ì„œ ì‹¤í–‰í• ì§€ ê²°ì •í•©ë‹ˆë‹¤. ë‹¨ìˆœíˆ "ë¹ˆ ë…¸ë“œì— ë°°ì¹˜"í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ë‹¤ì–‘í•œ ì œì•½ì¡°ê±´ê³¼ ìµœì í™” ê¸°ì¤€ì„ ê³ ë ¤í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        kube-scheduler ë™ì‘ ê³¼ì •                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   1. ìŠ¤ì¼€ì¤„ë§ ëŒ€ê¸° Pod ê°ì§€                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                             â”‚
â”‚   SchedulerëŠ” API Serverë¥¼ Watchí•˜ë©° spec.nodeNameì´ ë¹„ì–´ìˆëŠ” Podë¥¼ ì°¾ìŒ     â”‚
â”‚                                                                             â”‚
â”‚   Pod:                                                                      â”‚
â”‚     metadata:                                                               â”‚
â”‚       name: nginx-xyz                                                       â”‚
â”‚     spec:                                                                   â”‚
â”‚       nodeName: ""  â—„â”€â”€ ì•„ì§ ë…¸ë“œì— ë°°ì •ë˜ì§€ ì•ŠìŒ                            â”‚
â”‚       containers:                                                           â”‚
â”‚       - name: nginx                                                         â”‚
â”‚         resources:                                                          â”‚
â”‚           requests:                                                         â”‚
â”‚             cpu: 500m                                                       â”‚
â”‚             memory: 128Mi                                                   â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   2. Filtering (í•„í„°ë§) - ë°°ì¹˜ ë¶ˆê°€ëŠ¥í•œ ë…¸ë“œ ì œì™¸                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚                                                                             â”‚
â”‚   [Node1] [Node2] [Node3] [Node4] [Node5] [Node6]                          â”‚
â”‚                                                                             â”‚
â”‚   Filter Plugins:                                                           â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Plugin              â”‚  ì¡°ê±´                    â”‚  ì œì™¸ë˜ëŠ” ë…¸ë“œ   â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  NodeResourcesFit    â”‚  CPU/Memory ë¶€ì¡±        â”‚  Node1 (CPU ë¶€ì¡±)â”‚  â”‚
â”‚   â”‚  NodeSelector        â”‚  ë¼ë²¨ ë¶ˆì¼ì¹˜             â”‚  Node4          â”‚  â”‚
â”‚   â”‚  NodeAffinity        â”‚  affinity ê·œì¹™ ë¶ˆë§Œì¡±   â”‚  -              â”‚  â”‚
â”‚   â”‚  TaintToleration     â”‚  Taint í—ˆìš© ì•ˆí•¨        â”‚  Node2 (taint)  â”‚  â”‚
â”‚   â”‚  PodAntiAffinity     â”‚  ê°™ì€ Podê°€ ì´ë¯¸ ìˆìŒ   â”‚  Node3          â”‚  â”‚
â”‚   â”‚  VolumeBinding       â”‚  í•„ìš”í•œ PV ì—†ìŒ         â”‚  Node5          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   ê²°ê³¼: Node6ë§Œ ë‚¨ìŒ (ë˜ëŠ” ì—¬ëŸ¬ ë…¸ë“œê°€ ë‚¨ì„ ìˆ˜ ìˆìŒ)                         â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   3. Scoring (ì ìˆ˜í™”) - ë‚¨ì€ ë…¸ë“œ ì¤‘ ìµœì  ë…¸ë“œ ì„ íƒ                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                             â”‚
â”‚   ì—¬ëŸ¬ ë…¸ë“œê°€ í•„í„°ë¥¼ í†µê³¼í–ˆë‹¤ë©´, ì ìˆ˜ë¥¼ ë§¤ê²¨ ìµœì ì˜ ë…¸ë“œ ì„ íƒ                  â”‚
â”‚                                                                             â”‚
â”‚   [Node6]       [Node7]       [Node8]                                      â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Score Plugin          â”‚  Node6  â”‚  Node7  â”‚  Node8  â”‚  ë¹„ì¤‘      â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  LeastRequestedPriorityâ”‚  80     â”‚  60     â”‚  90     â”‚  20%       â”‚  â”‚
â”‚   â”‚  (ë¦¬ì†ŒìŠ¤ ì—¬ìœ ê°€ ë§ì„ìˆ˜ë¡)                                           â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚  BalancedAllocation    â”‚  70     â”‚  85     â”‚  75     â”‚  10%       â”‚  â”‚
â”‚   â”‚  (CPU/Memory ê· í˜•)                                                  â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚  NodeAffinity          â”‚  100    â”‚  50     â”‚  50     â”‚  30%       â”‚  â”‚
â”‚   â”‚  (ì„ í˜¸ ë…¸ë“œ ê°€ì¤‘ì¹˜)                                                 â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚  ImageLocality         â”‚  90     â”‚  0      â”‚  60     â”‚  20%       â”‚  â”‚
â”‚   â”‚  (ì´ë¯¸ì§€ê°€ ì´ë¯¸ ìˆìœ¼ë©´)                                             â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚  PodTopologySpread     â”‚  60     â”‚  80     â”‚  70     â”‚  20%       â”‚  â”‚
â”‚   â”‚  (ê· ë“± ë¶„ì‚°)                                                        â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  ê°€ì¤‘ í‰ê·  ì ìˆ˜         â”‚  81.0   â”‚  57.5   â”‚  71.0   â”‚            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   ê²°ê³¼: Node6 ì„ íƒ (ìµœê³  ì ìˆ˜)                                              â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   4. Binding (ë°”ì¸ë”©) - Podë¥¼ ë…¸ë“œì— ë°°ì •                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚                                                                             â”‚
â”‚   Scheduler â†’ API Server: Podì˜ spec.nodeName = "Node6" ì—…ë°ì´íŠ¸           â”‚
â”‚                                                                             â”‚
â”‚   Node6ì˜ kubeletì´ ì´ë¥¼ Watchí•˜ê³  ìˆë‹¤ê°€ Podë¥¼ ê°ì§€í•˜ê³  ì‹¤í–‰               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“˜ ê°œë… (Concept)**: SchedulerëŠ” Podë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨ì§€ Podì— `nodeName`ì„ ì„¤ì •í•  ë¿ì…ë‹ˆë‹¤. ì‹¤ì œ ì‹¤í–‰ì€ í•´ë‹¹ ë…¸ë“œì˜ kubeletì´ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì´ê²ƒì´ Kubernetesì˜ ëŠìŠ¨í•œ ê²°í•© ì„¤ê³„ì…ë‹ˆë‹¤.

#### ìŠ¤ì¼€ì¤„ë§ ì œì–´ ë°©ë²•

```yaml
# 1. NodeSelector - ê°„ë‹¨í•œ ë…¸ë“œ ì„ íƒ
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  nodeSelector:
    disktype: ssd           # ë¼ë²¨ì´ disktype=ssdì¸ ë…¸ë“œì—ë§Œ ë°°ì¹˜
    kubernetes.io/arch: amd64
  containers:
  - name: nginx
    image: nginx

---
# 2. NodeAffinity - ê³ ê¸‰ ë…¸ë“œ ì„ íƒ (ì„ í˜¸/í•„ìˆ˜ êµ¬ë¶„)
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  affinity:
    nodeAffinity:
      # í•„ìˆ˜ ì¡°ê±´ (ì—†ìœ¼ë©´ ìŠ¤ì¼€ì¤„ ì•ˆ ë¨)
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: topology.kubernetes.io/zone
            operator: In
            values:
            - zone-a
            - zone-b
      # ì„ í˜¸ ì¡°ê±´ (ìˆìœ¼ë©´ ì¢‹ì§€ë§Œ í•„ìˆ˜ëŠ” ì•„ë‹˜)
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 80
        preference:
          matchExpressions:
          - key: node-type
            operator: In
            values:
            - high-memory
  containers:
  - name: nginx
    image: nginx

---
# 3. PodAffinity/PodAntiAffinity - Pod ê°„ ê´€ê³„
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-frontend
spec:
  replicas: 3
  template:
    spec:
      affinity:
        # ì´ PodëŠ” app=cache Podê°€ ìˆëŠ” ë…¸ë“œì— ë°°ì¹˜ (ìºì‹œì™€ ê°€ê¹Œì´)
        podAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchLabels:
                app: cache
            topologyKey: kubernetes.io/hostname
        # ê°™ì€ app=web-frontend Podì™€ëŠ” ë‹¤ë¥¸ ë…¸ë“œì— ë°°ì¹˜ (ê³ ê°€ìš©ì„±)
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchLabels:
                  app: web-frontend
              topologyKey: kubernetes.io/hostname
      containers:
      - name: web
        image: nginx

---
# 4. Taints and Tolerations - ë…¸ë“œ ê²©ë¦¬
# ë…¸ë“œì— Taint ì„¤ì • (íŠ¹ì • Podë§Œ í—ˆìš©)
# kubectl taint nodes node1 dedicated=gpu:NoSchedule

apiVersion: v1
kind: Pod
metadata:
  name: gpu-pod
spec:
  tolerations:
  - key: "dedicated"
    operator: "Equal"
    value: "gpu"
    effect: "NoSchedule"     # ì´ Taintë¥¼ í—ˆìš©í•˜ë¯€ë¡œ node1ì— ìŠ¤ì¼€ì¤„ ê°€ëŠ¥
  containers:
  - name: gpu-app
    image: nvidia/cuda:12.0-base
```

> **ğŸ’¡ íŒ (Tip)**: Control Plane ë…¸ë“œì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `node-role.kubernetes.io/control-plane:NoSchedule` Taintê°€ ì„¤ì •ë˜ì–´ ì¼ë°˜ Podê°€ ìŠ¤ì¼€ì¤„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Control Planeì— ì›Œí¬ë¡œë“œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ í•´ë‹¹ Tolerationì„ ì¶”ê°€í•˜ê±°ë‚˜ Taintë¥¼ ì œê±°í•´ì•¼ í•©ë‹ˆë‹¤.


### 2.4. kube-controller-manager

Controller ManagerëŠ” ë‹¤ì–‘í•œ Controllerë¥¼ ì‹¤í–‰í•˜ëŠ” ë°ëª¬ì…ë‹ˆë‹¤. ê° ControllerëŠ” íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¥¼ Watchí•˜ê³  ì›í•˜ëŠ” ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      kube-controller-manager ë‚´ë¶€ êµ¬ì¡°                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   kube-controller-manager (ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤, ì—¬ëŸ¬ Controller ì‹¤í–‰)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚                   Shared Informer Factory                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ëª¨ë“  Controllerê°€ ê³µìœ í•˜ëŠ” API ìºì‹œ                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ API Server Watch ì—°ê²° ê³µìœ  (íš¨ìœ¨ì„±)                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ë¦¬ì†ŒìŠ¤ë³„ Informer: PodInformer, DeploymentInformer...        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                â”‚                                      â”‚  â”‚
â”‚  â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚       â”‚                        â”‚                        â”‚            â”‚  â”‚
â”‚  â”‚       â–¼                        â–¼                        â–¼            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ Deployment   â”‚     â”‚  ReplicaSet  â”‚     â”‚    Node      â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ Controller   â”‚     â”‚  Controller  â”‚     â”‚  Controller  â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚   Endpoint   â”‚     â”‚     Job      â”‚     â”‚ StatefulSet  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Controller  â”‚     â”‚  Controller  â”‚     â”‚  Controller  â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Namespace   â”‚     â”‚ServiceAccountâ”‚     â”‚    PV/PVC    â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Controller  â”‚     â”‚  Controller  â”‚     â”‚  Controller  â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  ... ê·¸ ì™¸ ë‹¤ìˆ˜ì˜ Controller                                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì£¼ìš” Controller ìƒì„¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Deployment Controller                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ì—­í• : Deployment â†’ ReplicaSet ê´€ë¦¬ (ë¡¤ì•„ì›ƒ, ë¡¤ë°±)                         â”‚
â”‚                                                                             â”‚
â”‚   Deployment                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  name: nginx-deployment                                             â”‚  â”‚
â”‚   â”‚  replicas: 3                                                        â”‚  â”‚
â”‚   â”‚  strategy: RollingUpdate                                            â”‚  â”‚
â”‚   â”‚    maxSurge: 1                                                      â”‚  â”‚
â”‚   â”‚    maxUnavailable: 0                                                â”‚  â”‚
â”‚   â”‚  template:                                                          â”‚  â”‚
â”‚   â”‚    spec:                                                            â”‚  â”‚
â”‚   â”‚      containers:                                                    â”‚  â”‚
â”‚   â”‚      - image: nginx:1.20 â†’ nginx:1.21  (ì´ë¯¸ì§€ ë³€ê²½ ì‹œ)             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â”‚                                                    â”‚
â”‚                        â”‚ Deployment Controller                              â”‚
â”‚                        â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      Rolling Update ê³¼ì •                             â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚   ê¸°ì¡´ ReplicaSet (nginx:1.20)    ìƒˆ ReplicaSet (nginx:1.21)        â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚   â”‚   â”‚  replicas: 3 â†’ 2 â†’ 1 â†’ 0â”‚     â”‚  replicas: 0 â†’ 1 â†’ 2 â†’ 3â”‚       â”‚  â”‚
â”‚   â”‚   â”‚                         â”‚     â”‚                         â”‚       â”‚  â”‚
â”‚   â”‚   â”‚  [Pod] [Pod] [Pod]      â”‚     â”‚  [Pod] [Pod] [Pod]      â”‚       â”‚  â”‚
â”‚   â”‚   â”‚   â†“     â†“     â†“         â”‚     â”‚   â†‘     â†‘     â†‘         â”‚       â”‚  â”‚
â”‚   â”‚   â”‚  ì¢…ë£Œ  ì¢…ë£Œ  ì¢…ë£Œ       â”‚     â”‚  ìƒì„±  ìƒì„±  ìƒì„±       â”‚       â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚   ìˆœì„œ:                                                               â”‚  â”‚
â”‚   â”‚   1. ìƒˆ ReplicaSet ìƒì„± (replicas: 0)                                â”‚  â”‚
â”‚   â”‚   2. ìƒˆ RS replicas ì¦ê°€ (0 â†’ 1)                                     â”‚  â”‚
â”‚   â”‚   3. ìƒˆ Pod Ready í™•ì¸                                               â”‚  â”‚
â”‚   â”‚   4. ê¸°ì¡´ RS replicas ê°ì†Œ (3 â†’ 2)                                   â”‚  â”‚
â”‚   â”‚   5. 2-4 ë°˜ë³µ                                                        â”‚  â”‚
â”‚   â”‚   6. ê¸°ì¡´ RSëŠ” ìœ ì§€ (rollbackìš©, revisionHistoryLimit ì„¤ì •)          â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Node Controller                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ì—­í• : ë…¸ë“œ ìƒíƒœ ëª¨ë‹ˆí„°ë§, ì¥ì•  ê°ì§€ ë° ëŒ€ì‘                                â”‚
â”‚                                                                             â”‚
â”‚   ëª¨ë‹ˆí„°ë§ í•­ëª©:                                                            â”‚
â”‚   â€¢ kubelet heartbeat (NodeStatus ì—…ë°ì´íŠ¸)                                â”‚
â”‚   â€¢ ë…¸ë“œ ì¡°ê±´ (Ready, MemoryPressure, DiskPressure, PIDPressure)           â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      ë…¸ë“œ ì¥ì•  ì²˜ë¦¬ íƒ€ì„ë¼ì¸                          â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚   ì‹œê°„    â”‚  ì´ë²¤íŠ¸                       â”‚  Node Controller ë™ì‘   â”‚  â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚   â”‚   T+0     â”‚  kubelet heartbeat ì¤‘ë‹¨     â”‚  -                       â”‚  â”‚
â”‚   â”‚   T+40s   â”‚  node-monitor-grace-period   â”‚  Node â†’ Unknown ìƒíƒœ    â”‚  â”‚
â”‚   â”‚           â”‚  (ê¸°ë³¸ 40ì´ˆ)                 â”‚                          â”‚  â”‚
â”‚   â”‚   T+5m    â”‚  pod-eviction-timeout        â”‚  Pod Eviction ì‹œì‘      â”‚  â”‚
â”‚   â”‚           â”‚  (ê¸°ë³¸ 5ë¶„)                  â”‚  (ë‹¤ë¥¸ ë…¸ë“œë¡œ ì¬ìŠ¤ì¼€ì¤„) â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚   ì„¤ì • ë³€ê²½:                                                          â”‚  â”‚
â”‚   â”‚   --node-monitor-grace-period=40s                                    â”‚  â”‚
â”‚   â”‚   --pod-eviction-timeout=5m                                          â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   > âš ï¸ ì£¼ì˜: eviction timeoutì„ ë„ˆë¬´ ì§§ê²Œ ì„¤ì •í•˜ë©´ ì¼ì‹œì  ë„¤íŠ¸ì›Œí¬ ë¬¸ì œì—ë„ â”‚
â”‚   > Podê°€ ì¬ìŠ¤ì¼€ì¤„ë˜ì–´ ë¶ˆì•ˆì •í•´ì§‘ë‹ˆë‹¤. í”„ë¡œë•ì…˜ì—ì„œëŠ” ì‹ ì¤‘í•˜ê²Œ ì„¤ì •í•˜ì„¸ìš”.   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Endpoint/EndpointSlice Controller                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ì—­í• : Service selectorì™€ ì¼ì¹˜í•˜ëŠ” Podì˜ IPë¥¼ Endpointë¡œ ë§¤í•‘              â”‚
â”‚                                                                             â”‚
â”‚   Service                              Endpoint                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ name: web-service       â”‚          â”‚ name: web-service              â”‚  â”‚
â”‚   â”‚ selector:               â”‚   â”€â”€â”€â”€â–º  â”‚ subsets:                       â”‚  â”‚
â”‚   â”‚   app: web              â”‚          â”‚   - addresses:                 â”‚  â”‚
â”‚   â”‚ ports:                  â”‚          â”‚     - ip: 10.200.0.15          â”‚  â”‚
â”‚   â”‚   - port: 80            â”‚          â”‚       nodeName: node-1         â”‚  â”‚
â”‚   â”‚                         â”‚          â”‚     - ip: 10.200.1.23          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚       nodeName: node-2         â”‚  â”‚
â”‚                                        â”‚     - ip: 10.200.2.8           â”‚  â”‚
â”‚   ë§¤ì¹­ë˜ëŠ” Pod:                         â”‚       nodeName: node-3         â”‚  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     ports:                     â”‚  â”‚
â”‚   â”‚ Pod     â”‚ â”‚ Pod     â”‚ â”‚ Pod     â”‚  â”‚     - port: 8080               â”‚  â”‚
â”‚   â”‚ app:web â”‚ â”‚ app:web â”‚ â”‚ app:web â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”‚10.200.  â”‚ â”‚10.200.  â”‚ â”‚10.200.  â”‚                                      â”‚
â”‚   â”‚ 0.15    â”‚ â”‚ 1.23    â”‚ â”‚ 2.8     â”‚  EndpointSlice (ëŒ€ê·œëª¨ í´ëŸ¬ìŠ¤í„°ìš©):  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ ê¸°ë³¸ 100ê°œ endpoint/slice        â”‚
â”‚                                        â€¢ ëŒ€ê·œëª¨ Service í™•ì¥ì„± ê°œì„         â”‚
â”‚   Controllerê°€ ì§€ì†ì ìœ¼ë¡œ ë™ê¸°í™”:                                          â”‚
â”‚   â€¢ Pod ìƒì„±/ì‚­ì œ â†’ Endpoint ì—…ë°ì´íŠ¸                                      â”‚
â”‚   â€¢ Pod Ready/NotReady â†’ Endpoint í¬í•¨/ì œì™¸                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¹ì…˜ ìš”ì•½

- **API Server**: ëª¨ë“  í†µì‹ ì˜ ê´€ë¬¸, ì¸ì¦/ì¸ê°€/ìŠ¹ì¸ íŒŒì´í”„ë¼ì¸, Watch ë©”ì»¤ë‹ˆì¦˜
- **etcd**: í´ëŸ¬ìŠ¤í„° ìƒíƒœ ì €ì¥ì†Œ, Raft í•©ì˜, ë‚™ê´€ì  ë™ì‹œì„± ì œì–´
- **Scheduler**: í•„í„°ë§ â†’ ì ìˆ˜í™” â†’ ë°”ì¸ë”©ìœ¼ë¡œ ìµœì  ë…¸ë“œ ì„ íƒ
- **Controller Manager**: ë‹¤ì–‘í•œ Controller ì‹¤í–‰, Reconciliation Loopìœ¼ë¡œ ì›í•˜ëŠ” ìƒíƒœ ìœ ì§€

---

## 3. Worker Node ì»´í¬ë„ŒíŠ¸

Worker NodeëŠ” ì‹¤ì œë¡œ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ëŠ” ê³³ì…ë‹ˆë‹¤. ê° Worker Nodeì—ëŠ” kubelet, Container Runtime, ê·¸ë¦¬ê³  CNI í”ŒëŸ¬ê·¸ì¸ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Worker Node ì•„í‚¤í…ì²˜                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Worker Node                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                        kubelet                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ API Serverì—ì„œ ì´ ë…¸ë“œì— ë°°ì •ëœ Pod ëª©ë¡ Watch              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Pod ìƒëª…ì£¼ê¸° ê´€ë¦¬ (ìƒì„±, ì‹¤í–‰, ì¢…ë£Œ)                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ í—¬ìŠ¤ì²´í¬ (Liveness/Readiness/Startup Probe)                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ (cAdvisor ë‚´ì¥)                             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ë…¸ë“œ ìƒíƒœë¥¼ API Serverì— ë³´ê³  (heartbeat)                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                      â”‚                                                â”‚  â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚  â”‚
â”‚  â”‚          â”‚           â”‚           â”‚                                   â”‚  â”‚
â”‚  â”‚          â–¼           â–¼           â–¼                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚
â”‚  â”‚  â”‚    CRI    â”‚ â”‚    CNI    â”‚ â”‚    CSI    â”‚                          â”‚  â”‚
â”‚  â”‚  â”‚           â”‚ â”‚           â”‚ â”‚           â”‚                          â”‚  â”‚
â”‚  â”‚  â”‚ Container â”‚ â”‚ Container â”‚ â”‚ Container â”‚                          â”‚  â”‚
â”‚  â”‚  â”‚ Runtime   â”‚ â”‚ Network   â”‚ â”‚ Storage   â”‚                          â”‚  â”‚
â”‚  â”‚  â”‚ Interface â”‚ â”‚ Interface â”‚ â”‚ Interface â”‚                          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚
â”‚  â”‚        â”‚             â”‚             â”‚                                  â”‚  â”‚
â”‚  â”‚        â–¼             â–¼             â–¼                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚
â”‚  â”‚  â”‚containerd â”‚ â”‚  Cilium   â”‚ â”‚ Local PV  â”‚                          â”‚  â”‚
â”‚  â”‚  â”‚           â”‚ â”‚ (eBPF)    â”‚ â”‚ CSI Driverâ”‚                          â”‚  â”‚
â”‚  â”‚  â”‚    â”‚      â”‚ â”‚           â”‚ â”‚           â”‚                          â”‚  â”‚
â”‚  â”‚  â”‚    â–¼      â”‚ â”‚           â”‚ â”‚           â”‚                          â”‚  â”‚
â”‚  â”‚  â”‚  runc     â”‚ â”‚           â”‚ â”‚           â”‚                          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                        Pods                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  Pod (Pause Container + Application Containers)         â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚ pause   â”‚  â”‚  app    â”‚  â”‚ sidecar â”‚                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚ (infra) â”‚  â”‚ ì»¨í…Œì´ë„ˆ â”‚  â”‚ ì»¨í…Œì´ë„ˆ â”‚                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚ â€¢ ë„¤ì„  â”‚  â”‚         â”‚  â”‚         â”‚                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   ìŠ¤í˜  â”‚  â”‚         â”‚  â”‚         â”‚                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   ì´ìŠ¤  â”‚  â”‚         â”‚  â”‚         â”‚                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â”‚   í™€ë”  â”‚  â”‚         â”‚  â”‚         â”‚                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚       â”‚              â”‚              â”‚                   â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚              ê³µìœ  ë„¤ì„ìŠ¤í˜ì´ìŠ¤                           â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â”‚              (ë„¤íŠ¸ì›Œí¬, IPC, UTS)                        â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.1. kubelet

kubeletì€ ê° ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” "ë…¸ë“œ ì—ì´ì „íŠ¸"ì…ë‹ˆë‹¤. Control Planeì˜ ì§€ì‹œë¥¼ ë°›ì•„ ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            kubelet ë™ì‘ ìƒì„¸                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   kubeletì˜ í•µì‹¬ ë£¨í”„                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚                                                                             â”‚
â”‚   1. API Server Watch                                                       â”‚
â”‚      â””â”€â–º ì´ ë…¸ë“œì— ë°°ì •ëœ Pod ëª©ë¡ (spec.nodeName == this-node)            â”‚
â”‚                                                                             â”‚
â”‚   2. Pod ë™ê¸°í™” (SyncPod)                                                   â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â”‚   API Serverì˜ Pod Spec  vs  ë…¸ë“œì˜ ì‹¤ì œ ìƒíƒœ                    â”‚   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â”‚   ì°¨ì´ ë°œê²¬ ì‹œ:                                                   â”‚   â”‚
â”‚      â”‚   â€¢ ìƒˆ Pod â†’ ìƒì„± (CNI ë„¤íŠ¸ì›Œí¬ ì„¤ì • â†’ CRI ì»¨í…Œì´ë„ˆ ìƒì„±)        â”‚   â”‚
â”‚      â”‚   â€¢ Pod ì‚­ì œë¨ â†’ ì¢…ë£Œ (graceful shutdown)                        â”‚   â”‚
â”‚      â”‚   â€¢ ì»¨í…Œì´ë„ˆ ì£½ìŒ â†’ RestartPolicyì— ë”°ë¼ ì¬ì‹œì‘                  â”‚   â”‚
â”‚      â”‚   â€¢ ì´ë¯¸ì§€ ë³€ê²½ â†’ ì»¨í…Œì´ë„ˆ ì¬ìƒì„±                                 â”‚   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   3. í—¬ìŠ¤ì²´í¬ ì‹¤í–‰                                                          â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â”‚   Probe ì¢…ë¥˜:                                                    â”‚   â”‚
â”‚      â”‚   â€¢ Liveness Probe: ì»¨í…Œì´ë„ˆê°€ ì‚´ì•„ìˆëŠ”ê°€? (ì‹¤íŒ¨ â†’ ì¬ì‹œì‘)       â”‚   â”‚
â”‚      â”‚   â€¢ Readiness Probe: íŠ¸ë˜í”½ ë°›ì„ ì¤€ë¹„? (ì‹¤íŒ¨ â†’ Endpoint ì œì™¸)    â”‚   â”‚
â”‚      â”‚   â€¢ Startup Probe: ì‹œì‘ ì™„ë£Œ? (ì„±ê³µ ì „ê¹Œì§€ ë‹¤ë¥¸ Probe ë¹„í™œì„±í™”)  â”‚   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â”‚   Probe ë°©ë²•:                                                    â”‚   â”‚
â”‚      â”‚   â€¢ httpGet: HTTP ìš”ì²­ (200-399 â†’ ì„±ê³µ)                         â”‚   â”‚
â”‚      â”‚   â€¢ tcpSocket: TCP ì—°ê²° ì‹œë„                                     â”‚   â”‚
â”‚      â”‚   â€¢ exec: ì»¨í…Œì´ë„ˆ ë‚´ ëª…ë ¹ ì‹¤í–‰ (exit 0 â†’ ì„±ê³µ)                  â”‚   â”‚
â”‚      â”‚   â€¢ grpc: gRPC í—¬ìŠ¤ì²´í¬                                          â”‚   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   4. ë…¸ë“œ ìƒíƒœ ë³´ê³  (NodeStatus)                                            â”‚
â”‚      â””â”€â–º API Serverì— ì£¼ê¸°ì ìœ¼ë¡œ heartbeat ì „ì†¡ (ê¸°ë³¸ 10ì´ˆ)                â”‚
â”‚      â””â”€â–º ë…¸ë“œ ì¡°ê±´: Ready, MemoryPressure, DiskPressure, PIDPressure       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### kubelet ì„¤ì • ì˜ˆì‹œ (kubelet-config.yaml)

```yaml
apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration

# ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
cgroupDriver: systemd
cpuManagerPolicy: static        # CPU Pinning í™œì„±í™” (Guaranteed QoS)
memoryManagerPolicy: Static     # ë©”ëª¨ë¦¬ NUMA ì¹œí™”ì„± (Kubernetes 1.22+)
topologyManagerPolicy: best-effort  # NUMA í† í´ë¡œì§€ ìµœì í™”

# í—¬ìŠ¤ì²´í¬ íƒ€ì´ë°
nodeStatusUpdateFrequency: 10s  # API Serverì— ìƒíƒœ ë³´ê³  ì£¼ê¸°
nodeStatusReportFrequency: 5m   # ë³€ê²½ ì—†ì–´ë„ ë³´ê³ í•˜ëŠ” ì£¼ê¸°

# ì´ë¯¸ì§€ ê´€ë¦¬
imageMinimumGCAge: 2m          # ì´ë¯¸ì§€ GC ìµœì†Œ ìˆ˜ëª…
imageGCHighThresholdPercent: 85 # ë””ìŠ¤í¬ ì‚¬ìš©ë¥  85% ì´ìƒì´ë©´ GC
imageGCLowThresholdPercent: 80  # 80%ê¹Œì§€ GC

# ì‹œìŠ¤í…œ ì˜ˆì•½ ë¦¬ì†ŒìŠ¤
systemReserved:
  cpu: 500m
  memory: 1Gi
kubeReserved:
  cpu: 500m
  memory: 1Gi
evictionHard:
  memory.available: 100Mi
  nodefs.available: 10%
  imagefs.available: 15%

# ë¡œê¹…
logging:
  format: json
  verbosity: 2
```

> **âš ï¸ ì£¼ì˜ (Warning)**: `cgroupDriver`ëŠ” Container Runtime(containerd)ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ë¶ˆì¼ì¹˜ ì‹œ kubeletì´ ì‹œì‘ë˜ì§€ ì•Šê±°ë‚˜ Pod ìƒì„±ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤. Kubernetes 1.22+ì—ì„œëŠ” `systemd`ê°€ ê¶Œì¥ë©ë‹ˆë‹¤.


### 3.2. Container Runtimeê³¼ CRI

kubeletì€ CRI(Container Runtime Interface)ë¥¼ í†µí•´ ë‹¤ì–‘í•œ Container Runtimeê³¼ í†µì‹ í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Container Runtime Interface (CRI)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   kubelet                                                                   â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ gRPC (CRI)                                                          â”‚
â”‚       â”‚ unix:///run/containerd/containerd.sock                             â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                         containerd                                     â”‚â”‚
â”‚   â”‚                                                                         â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚   â”‚  â”‚                     CRI Plugin (ë‚´ì¥)                            â”‚  â”‚â”‚
â”‚   â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚   â”‚  â”‚  CRI gRPC Services:                                              â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ RuntimeService: ì»¨í…Œì´ë„ˆ ìƒëª…ì£¼ê¸° ê´€ë¦¬                        â”‚  â”‚â”‚
â”‚   â”‚  â”‚    - CreateContainer, StartContainer, StopContainer              â”‚  â”‚â”‚
â”‚   â”‚  â”‚    - RemoveContainer, ListContainers                             â”‚  â”‚â”‚
â”‚   â”‚  â”‚    - CreatePodSandbox, RemovePodSandbox                         â”‚  â”‚â”‚
â”‚   â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ ImageService: ì´ë¯¸ì§€ ê´€ë¦¬                                     â”‚  â”‚â”‚
â”‚   â”‚  â”‚    - PullImage, RemoveImage, ListImages                          â”‚  â”‚â”‚
â”‚   â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚   â”‚                           â”‚                                            â”‚â”‚
â”‚   â”‚                           â”‚ containerd-shim                            â”‚â”‚
â”‚   â”‚                           â–¼                                            â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚   â”‚  â”‚                     containerd-shim-runc-v2                      â”‚  â”‚â”‚
â”‚   â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ containerdì™€ ì»¨í…Œì´ë„ˆ ì‚¬ì´ì˜ ì¤‘ê°„ í”„ë¡œì„¸ìŠ¤                    â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ containerd ì¬ì‹œì‘í•´ë„ ì»¨í…Œì´ë„ˆ ìœ ì§€                           â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ ì»¨í…Œì´ë„ˆ exit ìƒíƒœ ìˆ˜ì§‘                                       â”‚  â”‚â”‚
â”‚   â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚   â”‚                              â”‚ OCI Runtime                             â”‚â”‚
â”‚   â”‚                              â–¼                                         â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚   â”‚  â”‚                          runc                                    â”‚  â”‚â”‚
â”‚   â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ OCI Runtime Spec êµ¬í˜„ì²´                                       â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ ì‹¤ì œ ì»¨í…Œì´ë„ˆ í”„ë¡œì„¸ìŠ¤ ìƒì„±                                    â”‚  â”‚â”‚
â”‚   â”‚  â”‚    - Linux namespaces ì„¤ì •                                       â”‚  â”‚â”‚
â”‚   â”‚  â”‚    - cgroups ì„¤ì •                                                â”‚  â”‚â”‚
â”‚   â”‚  â”‚    - seccomp/AppArmor ì ìš©                                       â”‚  â”‚â”‚
â”‚   â”‚  â”‚  â€¢ ì»¨í…Œì´ë„ˆ ìƒì„± í›„ ì¢…ë£Œ (shimì´ ê´€ë¦¬ ì¸ê³„)                       â”‚  â”‚â”‚
â”‚   â”‚  â”‚                                                                   â”‚  â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚   â”‚                                                                         â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚   ëŒ€ì•ˆ OCI Runtime:                                                         â”‚
â”‚   â€¢ crun: C ì–¸ì–´ êµ¬í˜„, runcë³´ë‹¤ ë¹ ë¦„                                        â”‚
â”‚   â€¢ kata-runtime: ê²½ëŸ‰ VM ê¸°ë°˜ (ë³´ì•ˆ ê°•í™”)                                  â”‚
â”‚   â€¢ gVisor (runsc): ì»¤ë„ ì‹œìŠ¤í…œì½œ ìƒŒë“œë°•ì‹±                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“˜ ê°œë… (Concept)**: DockerëŠ” ë” ì´ìƒ Kubernetesì˜ Container Runtimeì´ ì•„ë‹™ë‹ˆë‹¤. Kubernetes 1.24ë¶€í„° dockershimì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ëŒ€ì‹  containerdë‚˜ CRI-Oë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Dockerë¡œ ë¹Œë“œí•œ ì´ë¯¸ì§€ëŠ” OCI í‘œì¤€ì„ ë”°ë¥´ë¯€ë¡œ ì—¬ì „íˆ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

### 3.3. Pod ìƒì„± ì „ì²´ ê³¼ì •

Podê°€ ìƒì„±ë˜ëŠ” ì „ì²´ ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Pod ìƒì„± ì „ì²´ íë¦„                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   User: kubectl apply -f pod.yaml                                          â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 1. kubectl â†’ API Server                                             â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    POST /api/v1/namespaces/default/pods                             â”‚  â”‚
â”‚   â”‚    {                                                                  â”‚  â”‚
â”‚   â”‚      "apiVersion": "v1",                                             â”‚  â”‚
â”‚   â”‚      "kind": "Pod",                                                  â”‚  â”‚
â”‚   â”‚      "metadata": { "name": "nginx" },                                â”‚  â”‚
â”‚   â”‚      "spec": {                                                       â”‚  â”‚
â”‚   â”‚        "containers": [{ "name": "nginx", "image": "nginx:1.21" }]   â”‚  â”‚
â”‚   â”‚      }                                                               â”‚  â”‚
â”‚   â”‚    }                                                                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 2. API Server: ì¸ì¦ â†’ ì¸ê°€ â†’ Admission â†’ Validation                 â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Mutating Admission:                                               â”‚  â”‚
â”‚   â”‚    â€¢ ServiceAccount í† í° ìë™ ë§ˆìš´íŠ¸ ì„¤ì •                            â”‚  â”‚
â”‚   â”‚    â€¢ ê¸°ë³¸ tolerations ì¶”ê°€                                           â”‚  â”‚
â”‚   â”‚    â€¢ Istio sidecar injection (ìˆë‹¤ë©´)                                â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Validating Admission:                                             â”‚  â”‚
â”‚   â”‚    â€¢ ResourceQuota í™•ì¸                                              â”‚  â”‚
â”‚   â”‚    â€¢ PodSecurity ì •ì±… í™•ì¸                                           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 3. etcdì— ì €ì¥                                                      â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Key: /registry/pods/default/nginx                                 â”‚  â”‚
â”‚   â”‚    Value: Pod ê°ì²´ (Protobuf ì§ë ¬í™”)                                 â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Pod ìƒíƒœ:                                                         â”‚  â”‚
â”‚   â”‚    â€¢ spec.nodeName: ""  (ì•„ì§ ìŠ¤ì¼€ì¤„ë˜ì§€ ì•ŠìŒ)                       â”‚  â”‚
â”‚   â”‚    â€¢ status.phase: "Pending"                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ Watch ì´ë²¤íŠ¸ (ADDED)                                               â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 4. Scheduler: ë…¸ë“œ ì„ íƒ                                              â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Watch: spec.nodeName == "" ì¸ Pod                                â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Filtering â†’ Scoring â†’ ìµœì  ë…¸ë“œ ì„ íƒ (node-1)                     â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    API Serverì— Binding ìš”ì²­:                                        â”‚  â”‚
â”‚   â”‚    Pod.spec.nodeName = "node-1"                                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ Watch ì´ë²¤íŠ¸ (MODIFIED)                                            â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 5. kubelet (node-1): Pod ì‹¤í–‰                                        â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Watch: spec.nodeName == "node-1" ì¸ Pod                          â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    5a. PodSandbox ìƒì„± (pause ì»¨í…Œì´ë„ˆ)                              â”‚  â”‚
â”‚   â”‚        â””â”€â–º ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±                                 â”‚  â”‚
â”‚   â”‚        â””â”€â–º CNI í˜¸ì¶œí•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì„¤ì •                                 â”‚  â”‚
â”‚   â”‚            â€¢ IP í• ë‹¹ (IPAM)                                          â”‚  â”‚
â”‚   â”‚            â€¢ veth pair ìƒì„±                                          â”‚  â”‚
â”‚   â”‚            â€¢ ë¼ìš°íŒ… ì„¤ì •                                              â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    5b. Volume ë§ˆìš´íŠ¸                                                 â”‚  â”‚
â”‚   â”‚        â””â”€â–º CSI ë“œë¼ì´ë²„ í˜¸ì¶œ (í•„ìš”ì‹œ)                                 â”‚  â”‚
â”‚   â”‚        â””â”€â–º ConfigMap, Secret ë§ˆìš´íŠ¸                                  â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    5c. ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ Pull                                          â”‚  â”‚
â”‚   â”‚        â””â”€â–º containerd: PullImage                                     â”‚  â”‚
â”‚   â”‚        â””â”€â–º ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ë ˆì´ì–´ ë‹¤ìš´ë¡œë“œ                             â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    5d. ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹œì‘                                          â”‚  â”‚
â”‚   â”‚        â””â”€â–º containerd: CreateContainer, StartContainer               â”‚  â”‚
â”‚   â”‚        â””â”€â–º runc: ì‹¤ì œ í”„ë¡œì„¸ìŠ¤ ìƒì„±                                   â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    5e. Pod ìƒíƒœ ì—…ë°ì´íŠ¸                                              â”‚  â”‚
â”‚   â”‚        â””â”€â–º status.phase = "Running"                                  â”‚  â”‚
â”‚   â”‚        â””â”€â–º status.podIP = "10.200.0.15"                              â”‚  â”‚
â”‚   â”‚        â””â”€â–º status.containerStatuses[].ready = true                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ Watch ì´ë²¤íŠ¸ (MODIFIED)                                            â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 6. Endpoint Controller: Service ì—°ê²°                                 â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    Podì˜ ë¼ë²¨ì´ Service selectorì™€ ì¼ì¹˜í•˜ë©´:                         â”‚  â”‚
â”‚   â”‚    Endpoints ì˜¤ë¸Œì íŠ¸ì— Pod IP ì¶”ê°€                                  â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚    ì´ì œ Serviceë¥¼ í†µí•´ íŠ¸ë˜í”½ ìˆ˜ì‹  ê°€ëŠ¥!                              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   ì „ì²´ ì†Œìš” ì‹œê°„ (ì¼ë°˜ì ì¸ ê²½ìš°):                                           â”‚
â”‚   â€¢ ìŠ¤ì¼€ì¤„ë§: ~100ms                                                       â”‚
â”‚   â€¢ ì´ë¯¸ì§€ Pull: ìˆ˜ ì´ˆ ~ ìˆ˜ ë¶„ (ì´ë¯¸ì§€ í¬ê¸°, ë„¤íŠ¸ì›Œí¬ì— ë”°ë¼)               â”‚
â”‚   â€¢ ì»¨í…Œì´ë„ˆ ì‹œì‘: ~1ì´ˆ                                                    â”‚
â”‚   â€¢ ì „ì²´: ëŒ€ë¶€ë¶„ ì´ë¯¸ì§€ Pull ì‹œê°„                                          â”‚
â”‚                                                                             â”‚
â”‚   > ğŸ’¡ íŒ: imagePullPolicy: IfNotPresentì™€ ì‘ì€ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë©´           â”‚
â”‚   > Pod ì‹œì‘ ì‹œê°„ì„ í¬ê²Œ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¹ì…˜ ìš”ì•½

- **kubelet**: ë…¸ë“œ ì—ì´ì „íŠ¸, Pod ìƒëª…ì£¼ê¸° ê´€ë¦¬, í—¬ìŠ¤ì²´í¬, ìƒíƒœ ë³´ê³ 
- **CRI**: kubeletê³¼ Container Runtime ê°„ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤
- **containerd**: í‘œì¤€ Container Runtime, runcë¥¼ í†µí•´ ì‹¤ì œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
- **Pod ìƒì„± íë¦„**: kubectl â†’ API Server â†’ etcd â†’ Scheduler â†’ kubelet â†’ CNI/CRI/CSI

---

## 4. Serviceì™€ ë„¤íŠ¸ì›Œí‚¹

Kubernetes ServiceëŠ” Pod ì§‘í•©ì— ëŒ€í•œ ì•ˆì •ì ì¸ ë„¤íŠ¸ì›Œí¬ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤. PodëŠ” ìƒì„±/ì‚­ì œë˜ë©° IPê°€ ë³€ê²½ë˜ì§€ë§Œ, ServiceëŠ” ê³ ì •ëœ IPì™€ DNS ì´ë¦„ì„ ìœ ì§€í•©ë‹ˆë‹¤.

### 4.1. Service íƒ€ì…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Kubernetes Service íƒ€ì…                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   1. ClusterIP (ê¸°ë³¸ê°’)                                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚   â€¢ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥                                            â”‚
â”‚   â€¢ ê°€ìƒ IP (ì‹¤ì œ ì¸í„°í˜ì´ìŠ¤ì— ë°”ì¸ë”©ë˜ì§€ ì•ŠìŒ)                               â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  í´ëŸ¬ìŠ¤í„° ë‚´ë¶€                                                       â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  Client Pod                      Service (ClusterIP)                 â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚   â”‚  â”‚         â”‚ â”€â”€â”€â”€ 10.201.50.100 â”€â”€â”€â–ºâ”‚ my-service       â”‚              â”‚  â”‚
â”‚   â”‚  â”‚         â”‚      :80            â”‚ 10.201.50.100:80   â”‚              â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚   â”‚                                            â”‚ ë¡œë“œë°¸ëŸ°ì‹±              â”‚  â”‚
â”‚   â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚   â”‚                          â–¼                 â–¼                 â–¼       â”‚  â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚                    â”‚  Pod 1  â”‚       â”‚  Pod 2  â”‚       â”‚  Pod 3  â”‚  â”‚  â”‚
â”‚   â”‚                    â”‚10.200.  â”‚       â”‚10.200.  â”‚       â”‚10.200.  â”‚  â”‚  â”‚
â”‚   â”‚                    â”‚ 0.15    â”‚       â”‚ 1.23    â”‚       â”‚ 2.8     â”‚  â”‚  â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   apiVersion: v1                                                           â”‚
â”‚   kind: Service                                                            â”‚
â”‚   metadata:                                                                â”‚
â”‚     name: my-service                                                       â”‚
â”‚   spec:                                                                    â”‚
â”‚     type: ClusterIP  # ê¸°ë³¸ê°’                                              â”‚
â”‚     selector:                                                              â”‚
â”‚       app: my-app                                                          â”‚
â”‚     ports:                                                                 â”‚
â”‚     - port: 80                                                             â”‚
â”‚       targetPort: 8080                                                     â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   2. NodePort                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚   â€¢ ëª¨ë“  ë…¸ë“œì˜ íŠ¹ì • í¬íŠ¸ë¡œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥                                â”‚
â”‚   â€¢ ë²”ìœ„: 30000-32767 (ê¸°ë³¸)                                                â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  ì™¸ë¶€                                                                â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚  â”‚
â”‚   â”‚  â”‚ Client  â”‚                                                        â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                        â”‚  â”‚
â”‚   â”‚       â”‚ <Node-IP>:30080                                              â”‚  â”‚
â”‚   â”‚       â–¼                                                              â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚  â”‚  ì–´ë–¤ ë…¸ë“œë“  ìƒê´€ì—†ì´ 30080 í¬íŠ¸ë¡œ ì ‘ê·¼                       â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                                                               â”‚    â”‚  â”‚
â”‚   â”‚  â”‚  Node1:30080          Node2:30080          Node3:30080       â”‚    â”‚  â”‚
â”‚   â”‚  â”‚       â”‚                    â”‚                    â”‚            â”‚    â”‚  â”‚
â”‚   â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                            â”‚                                  â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                            â–¼                                  â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                   Service (ClusterIP)                         â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                            â”‚                                  â”‚    â”‚  â”‚
â”‚   â”‚  â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚    â”‚  â”‚
â”‚   â”‚  â”‚               â–¼            â–¼            â–¼                    â”‚    â”‚  â”‚
â”‚   â”‚  â”‚            [Pod 1]      [Pod 2]      [Pod 3]                 â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                                                               â”‚    â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   spec:                                                                    â”‚
â”‚     type: NodePort                                                         â”‚
â”‚     ports:                                                                 â”‚
â”‚     - port: 80           # ClusterIP í¬íŠ¸                                  â”‚
â”‚       targetPort: 8080   # Pod í¬íŠ¸                                        â”‚
â”‚       nodePort: 30080    # ë…¸ë“œ í¬íŠ¸ (ìƒëµì‹œ ìë™ í• ë‹¹)                     â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   3. LoadBalancer                                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚   â€¢ í´ë¼ìš°ë“œ ë¡œë“œë°¸ëŸ°ì„œ ìë™ í”„ë¡œë¹„ì €ë‹                                      â”‚
â”‚   â€¢ ì˜¨í”„ë ˆë¯¸ìŠ¤: MetalLB, Cilium LB IPAM ë“± í•„ìš”                             â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  ì™¸ë¶€                                                                â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚  â”‚
â”‚   â”‚  â”‚ Client  â”‚                                                        â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                        â”‚  â”‚
â”‚   â”‚       â”‚ 203.0.113.50:80 (External IP)                               â”‚  â”‚
â”‚   â”‚       â–¼                                                              â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚  â”‚
â”‚   â”‚  â”‚    Cloud Load Balancer      â”‚                                    â”‚  â”‚
â”‚   â”‚  â”‚    (ë˜ëŠ” MetalLB/Cilium)    â”‚                                    â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚  â”‚
â”‚   â”‚               â”‚                                                      â”‚  â”‚
â”‚   â”‚               â–¼                                                      â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚  â”‚                   Kubernetes í´ëŸ¬ìŠ¤í„°                        â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                                                               â”‚    â”‚  â”‚
â”‚   â”‚  â”‚    NodePort (ëª¨ë“  ë…¸ë“œ) â†’ Service â†’ Pod                      â”‚    â”‚  â”‚
â”‚   â”‚  â”‚                                                               â”‚    â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   spec:                                                                    â”‚
â”‚     type: LoadBalancer                                                     â”‚
â”‚     loadBalancerIP: 203.0.113.50  # (ì„ íƒ) íŠ¹ì • IP ìš”ì²­                    â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   4. ExternalName                                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚   â€¢ ì™¸ë¶€ DNS ì´ë¦„ì— ëŒ€í•œ CNAME ë³„ì¹­                                         â”‚
â”‚   â€¢ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ Serviceì²˜ëŸ¼ ì ‘ê·¼                         â”‚
â”‚                                                                             â”‚
â”‚   spec:                                                                    â”‚
â”‚     type: ExternalName                                                     â”‚
â”‚     externalName: my.database.example.com                                  â”‚
â”‚                                                                             â”‚
â”‚   # í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ my-service.default.svc ë¡œ ì ‘ê·¼í•˜ë©´                      â”‚
â”‚   # my.database.example.com ìœ¼ë¡œ CNAME ë¦¬ë””ë ‰ì…˜                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


### 4.2. Service ë‚´ë¶€ êµ¬í˜„ (kube-proxy)

kube-proxyëŠ” Serviceì˜ ë¡œë“œë°¸ëŸ°ì‹±ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ë™ì‘ ëª¨ë“œì— ë”°ë¼ êµ¬í˜„ ë°©ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      kube-proxy ë™ì‘ ëª¨ë“œ ë¹„êµ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   1. iptables ëª¨ë“œ (ê¸°ë³¸)                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                             â”‚
â”‚   Client Pod                                                                â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ dst: 10.201.50.100:80 (Service ClusterIP)                          â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      iptables NAT í…Œì´ë¸”                             â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  KUBE-SERVICES ì²´ì¸:                                                 â”‚  â”‚
â”‚   â”‚  â””â”€â–º 10.201.50.100/32 â†’ KUBE-SVC-XXXX                               â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  KUBE-SVC-XXXX ì²´ì¸ (ë¡œë“œë°¸ëŸ°ì‹±):                                    â”‚  â”‚
â”‚   â”‚  â”œâ”€â–º 33% í™•ë¥  â†’ KUBE-SEP-AAAA (10.200.0.15:8080)                    â”‚  â”‚
â”‚   â”‚  â”œâ”€â–º 33% í™•ë¥  â†’ KUBE-SEP-BBBB (10.200.1.23:8080)                    â”‚  â”‚
â”‚   â”‚  â””â”€â–º 33% í™•ë¥  â†’ KUBE-SEP-CCCC (10.200.2.8:8080)                     â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  KUBE-SEP-AAAA ì²´ì¸:                                                 â”‚  â”‚
â”‚   â”‚  â””â”€â–º DNAT to 10.200.0.15:8080                                       â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼ dst: 10.200.0.15:8080 (DNAT í›„)                                    â”‚
â”‚   Pod 1 (10.200.0.15)                                                      â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì : ì•ˆì •ì , ë„ë¦¬ ì‚¬ìš©                                                   â”‚
â”‚   ë‹¨ì : O(n) ê·œì¹™ ìˆœíšŒ, ëŒ€ê·œëª¨ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì„±ëŠ¥ ì €í•˜                        â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   2. IPVS ëª¨ë“œ                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚                                                                             â”‚
â”‚   Client Pod                                                                â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ dst: 10.201.50.100:80                                              â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                       IPVS Virtual Server                            â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  Virtual Server: 10.201.50.100:80                                    â”‚  â”‚
â”‚   â”‚  Scheduler: rr (round-robin), lc (least connection), ...            â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  Real Servers:                                                       â”‚  â”‚
â”‚   â”‚  â”œâ”€â–º 10.200.0.15:8080 (weight: 1)                                   â”‚  â”‚
â”‚   â”‚  â”œâ”€â–º 10.200.1.23:8080 (weight: 1)                                   â”‚  â”‚
â”‚   â”‚  â””â”€â–º 10.200.2.8:8080  (weight: 1)                                   â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  í•´ì‹œ í…Œì´ë¸” ê¸°ë°˜ O(1) ë£©ì—…                                          â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼ IPVS NAT to 10.200.0.15:8080                                       â”‚
â”‚   Pod 1 (10.200.0.15)                                                      â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì : O(1) ì„±ëŠ¥, ë‹¤ì–‘í•œ ë¡œë“œë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜                                â”‚
â”‚   ë‹¨ì : IPVS ì»¤ë„ ëª¨ë“ˆ í•„ìš”                                                 â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   3. eBPF ëª¨ë“œ (Cilium - kube-proxy ëŒ€ì²´)                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚                                                                             â”‚
â”‚   Client Pod                                                                â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ connect(10.201.50.100:80)                                          â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    eBPF Socket LB                                    â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  connect() ì‹œìŠ¤í…œì½œ ì‹œì ì— ëª©ì ì§€ ë³€í™˜:                               â”‚  â”‚
â”‚   â”‚  â€¢ iptables/IPVSë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ                                       â”‚  â”‚
â”‚   â”‚  â€¢ ì†Œì¼“ ë ˆë²¨ì—ì„œ ì§ì ‘ Pod IPë¡œ ì—°ê²°                                   â”‚  â”‚
â”‚   â”‚  â€¢ conntrack ì—”íŠ¸ë¦¬ ìµœì†Œí™”                                           â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  eBPF Map (í•´ì‹œ í…Œì´ë¸”):                                             â”‚  â”‚
â”‚   â”‚  Service 10.201.50.100:80 â†’ [Pod IPs...]                            â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼ ì§ì ‘ 10.200.0.15:8080ìœ¼ë¡œ connect                                  â”‚
â”‚   Pod 1 (10.200.0.15)                                                      â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì : ìµœê³  ì„±ëŠ¥, íŒ¨í‚· ê²½ë¡œ ë‹¨ì¶•, kube-proxy ë¶ˆí•„ìš”                        â”‚
â”‚   ë‹¨ì : ì»¤ë„ 5.10+ ê¶Œì¥, Cilium í•„ìš”                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ” ì‹¬í™” í•™ìŠµ (Deep Dive)**: Cilium eBPF ëª¨ë“œì—ì„œëŠ” kube-proxyë¥¼ ì™„ì „íˆ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° Service ë¡œë“œë°¸ëŸ°ì‹±ì€ eBPF í”„ë¡œê·¸ë¨ì´ ë‹´ë‹¹í•˜ë©°, iptables ê·œì¹™ì´ ì—†ì–´ ì„±ëŠ¥ê³¼ í™•ì¥ì„±ì´ í¬ê²Œ í–¥ìƒë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [06-ebpf-cilium.md](06-ebpf-cilium.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### 4.3. DNS (CoreDNS)

Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ DNSëŠ” CoreDNSê°€ ë‹´ë‹¹í•©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Kubernetes DNS (CoreDNS)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   DNS ë ˆì½”ë“œ í˜•ì‹                                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚                                                                             â”‚
â”‚   Service:                                                                  â”‚
â”‚   <service-name>.<namespace>.svc.<cluster-domain>                          â”‚
â”‚   ì˜ˆ: nginx-service.default.svc.cluster.local â†’ 10.201.50.100 (ClusterIP)  â”‚
â”‚                                                                             â”‚
â”‚   Headless Service (ClusterIP: None):                                       â”‚
â”‚   <service-name>.<namespace>.svc.<cluster-domain>                          â”‚
â”‚   ì˜ˆ: mysql.default.svc.cluster.local â†’ 10.200.0.15, 10.200.1.23 (Pod IPs) â”‚
â”‚                                                                             â”‚
â”‚   Pod (hostname/subdomain ì„¤ì • ì‹œ):                                         â”‚
â”‚   <pod-hostname>.<service-name>.<namespace>.svc.<cluster-domain>           â”‚
â”‚   ì˜ˆ: mysql-0.mysql.default.svc.cluster.local â†’ 10.200.0.15                â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   DNS ì¡°íšŒ íë¦„                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚                                                                             â”‚
â”‚   Pod (10.200.0.50)                                                         â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ DNS Query: nginx-service.default.svc.cluster.local                 â”‚
â”‚       â”‚ (Podì˜ /etc/resolv.confì— CoreDNS IPê°€ nameserverë¡œ ì„¤ì •ë¨)        â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                      CoreDNS (kube-system)                             â”‚â”‚
â”‚   â”‚                                                                         â”‚â”‚
â”‚   â”‚  Service: kube-dns (10.201.0.10:53)                                    â”‚â”‚
â”‚   â”‚                                                                         â”‚â”‚
â”‚   â”‚  Corefile:                                                             â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚   â”‚  â”‚ .:53 {                                                          â”‚  â”‚â”‚
â”‚   â”‚  â”‚     kubernetes cluster.local in-addr.arpa ip6.arpa {            â”‚  â”‚â”‚
â”‚   â”‚  â”‚         pods insecure                                           â”‚  â”‚â”‚
â”‚   â”‚  â”‚         fallthrough in-addr.arpa ip6.arpa                       â”‚  â”‚â”‚
â”‚   â”‚  â”‚     }                                                           â”‚  â”‚â”‚
â”‚   â”‚  â”‚     forward . /etc/resolv.conf                                  â”‚  â”‚â”‚
â”‚   â”‚  â”‚     cache 30                                                    â”‚  â”‚â”‚
â”‚   â”‚  â”‚     loop                                                        â”‚  â”‚â”‚
â”‚   â”‚  â”‚     reload                                                      â”‚  â”‚â”‚
â”‚   â”‚  â”‚     loadbalance                                                 â”‚  â”‚â”‚
â”‚   â”‚  â”‚ }                                                               â”‚  â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚   â”‚                                                                         â”‚â”‚
â”‚   â”‚  kubernetes í”ŒëŸ¬ê·¸ì¸:                                                   â”‚â”‚
â”‚   â”‚  â€¢ API Serverì—ì„œ Service/Endpoint ì •ë³´ Watch                          â”‚â”‚
â”‚   â”‚  â€¢ ë‚´ë¶€ DNS ë ˆì½”ë“œ ìƒì„±                                                 â”‚â”‚
â”‚   â”‚                                                                         â”‚â”‚
â”‚   â”‚  forward í”ŒëŸ¬ê·¸ì¸:                                                      â”‚â”‚
â”‚   â”‚  â€¢ í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ ë„ë©”ì¸ì€ upstream DNSë¡œ ì „ë‹¬                           â”‚â”‚
â”‚   â”‚                                                                         â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ DNS Response: 10.201.50.100 (Service ClusterIP)                    â”‚
â”‚       â–¼                                                                     â”‚
â”‚   Pod (10.200.0.50)                                                         â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ TCP connect to 10.201.50.100:80                                    â”‚
â”‚       â””â”€â–º (Service ë¡œë“œë°¸ëŸ°ì‹±ì„ í†µí•´ ì‹¤ì œ Podë¡œ ì „ë‹¬)                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```bash
# Pod ë‚´ì—ì„œ DNS í™•ì¸
kubectl exec -it <pod-name> -- nslookup kubernetes.default.svc.cluster.local

# DNS ë””ë²„ê¹… Pod ì‚¬ìš©
kubectl run dnsutils --image=tutum/dnsutils --rm -it --restart=Never -- nslookup nginx-service

# CoreDNS ë¡œê·¸ í™•ì¸
kubectl logs -n kube-system -l k8s-app=kube-dns
```

> **ğŸ’¡ íŒ (Tip)**: DNS ë¬¸ì œ ë°œìƒ ì‹œ ë¨¼ì € CoreDNS Podê°€ ì •ìƒì¸ì§€ í™•ì¸í•˜ì„¸ìš”. CoreDNSê°€ ì •ìƒì´ì–´ë„ DNSê°€ ì•ˆ ë˜ë©´ Service kube-dnsì˜ Endpointë¥¼ í™•ì¸í•˜ì„¸ìš”. Podì˜ `/etc/resolv.conf`ê°€ ì˜¬ë°”ë¥¸ nameserverë¥¼ ê°€ë¦¬í‚¤ëŠ”ì§€ë„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

### ì„¹ì…˜ ìš”ì•½

- **Service íƒ€ì…**: ClusterIP(ë‚´ë¶€), NodePort(ì™¸ë¶€ í¬íŠ¸), LoadBalancer(ì™¸ë¶€ LB), ExternalName(CNAME)
- **êµ¬í˜„ ë°©ì‹**: iptables(ê¸°ë³¸), IPVS(ì„±ëŠ¥ ê°œì„ ), eBPF/Cilium(ìµœê³  ì„±ëŠ¥)
- **DNS**: CoreDNSê°€ Service/Pod DNS ë ˆì½”ë“œ ì œê³µ, `<svc>.<ns>.svc.cluster.local` í˜•ì‹

---

## 5. Storage ì¶”ìƒí™”

KubernetesëŠ” ë‹¤ì–‘í•œ ìŠ¤í† ë¦¬ì§€ ë°±ì—”ë“œë¥¼ ì¶”ìƒí™”í•˜ì—¬ ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•©ë‹ˆë‹¤.

### 5.1. Volume ê¸°ë³¸ ê°œë…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Kubernetes Storage ê°œë…                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ë¬¸ì œ: ì»¨í…Œì´ë„ˆ íŒŒì¼ì‹œìŠ¤í…œì€ íœ˜ë°œì„±                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                             â”‚
â”‚   ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ ì‹œ:                                                        â”‚
â”‚   â€¢ ê¸°ì¡´ íŒŒì¼ì‹œìŠ¤í…œ ì‚­ì œ                                                     â”‚
â”‚   â€¢ ìƒˆ íŒŒì¼ì‹œìŠ¤í…œìœ¼ë¡œ ì‹œì‘                                                   â”‚
â”‚   â€¢ ë°ì´í„° ì†ì‹¤!                                                             â”‚
â”‚                                                                             â”‚
â”‚   í•´ê²°: Volume                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚                                                                             â”‚
â”‚   Pod                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  Container 1                Container 2                              â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚   â”‚  â”‚                     â”‚    â”‚                     â”‚                 â”‚  â”‚
â”‚   â”‚  â”‚  /app/data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â–º /shared/data     â”‚                 â”‚  â”‚
â”‚   â”‚  â”‚         â”‚           â”‚    â”‚         â”‚          â”‚                 â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚   â”‚            â”‚                          â”‚                              â”‚  â”‚
â”‚   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚  â”‚
â”‚   â”‚                       â”‚                                              â”‚  â”‚
â”‚   â”‚                       â–¼                                              â”‚  â”‚
â”‚   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚  â”‚
â”‚   â”‚              â”‚     Volume      â”‚                                    â”‚  â”‚
â”‚   â”‚              â”‚   (shared-data) â”‚                                    â”‚  â”‚
â”‚   â”‚              â”‚                 â”‚                                    â”‚  â”‚
â”‚   â”‚              â”‚  â€¢ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘â”‚                                    â”‚  â”‚
â”‚   â”‚              â”‚    ì—ë„ ìœ ì§€     â”‚                                    â”‚  â”‚
â”‚   â”‚              â”‚  â€¢ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ â”‚                                    â”‚  â”‚
â”‚   â”‚              â”‚    ê°„ ê³µìœ  ê°€ëŠ¥  â”‚                                    â”‚  â”‚
â”‚   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   Volume íƒ€ì…:                                                              â”‚
â”‚   â€¢ emptyDir: Pod ìˆ˜ëª…ê³¼ ë™ì¼, ì„ì‹œ ìŠ¤í† ë¦¬ì§€                                 â”‚
â”‚   â€¢ hostPath: ë…¸ë“œì˜ íŒŒì¼ì‹œìŠ¤í…œ (ë””ë²„ê¹…ìš©, í”„ë¡œë•ì…˜ ë¹„ê¶Œì¥)                  â”‚
â”‚   â€¢ configMap, secret: ì„¤ì •/ë¹„ë°€ ë°ì´í„°                                     â”‚
â”‚   â€¢ persistentVolumeClaim: ì˜êµ¬ ìŠ¤í† ë¦¬ì§€ (ì•„ë˜ ì„¤ëª…)                        â”‚
â”‚   â€¢ csi: CSI ë“œë¼ì´ë²„ë¥¼ í†µí•œ ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2. PersistentVolumeê³¼ PersistentVolumeClaim

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PV / PVC / StorageClass ê´€ê³„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ê´€ë¦¬ì ì˜ì—­                              ì‚¬ìš©ì ì˜ì—­                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚                                                                             â”‚
â”‚   1. Static Provisioning (ìˆ˜ë™)                                             â”‚
â”‚                                                                             â”‚
â”‚   ê´€ë¦¬ìê°€ PV ìƒì„±              ì‚¬ìš©ìê°€ PVC ìƒì„±                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚ PersistentVolume â”‚           â”‚ PersistentVolumeâ”‚                        â”‚
â”‚   â”‚                 â”‚           â”‚ Claim           â”‚                        â”‚
â”‚   â”‚ name: pv-001    â”‚â—„â”€â”€ë°”ì¸ë”©â”€â”€â–ºâ”‚                 â”‚                        â”‚
â”‚   â”‚ capacity: 10Gi  â”‚           â”‚ storage: 10Gi   â”‚                        â”‚
â”‚   â”‚ accessModes:    â”‚           â”‚ accessModes:    â”‚                        â”‚
â”‚   â”‚   - RWO         â”‚           â”‚   - RWO         â”‚                        â”‚
â”‚   â”‚ nfs:            â”‚           â”‚                 â”‚                        â”‚
â”‚   â”‚   server: ...   â”‚           â”‚                 â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                          â”‚                                  â”‚
â”‚                                          â”‚ Podì—ì„œ ì‚¬ìš©                     â”‚
â”‚                                          â–¼                                  â”‚
â”‚                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                                 â”‚      Pod        â”‚                        â”‚
â”‚                                 â”‚                 â”‚                        â”‚
â”‚                                 â”‚ volumes:        â”‚                        â”‚
â”‚                                 â”‚ - name: data    â”‚                        â”‚
â”‚                                 â”‚   pvc:          â”‚                        â”‚
â”‚                                 â”‚     claimName:  â”‚                        â”‚
â”‚                                 â”‚       my-pvc    â”‚                        â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   2. Dynamic Provisioning (ìë™) - ê¶Œì¥                                     â”‚
â”‚                                                                             â”‚
â”‚   ê´€ë¦¬ìê°€ StorageClass ì •ì˜    ì‚¬ìš©ìê°€ PVC ìƒì„± (SC ì§€ì •)                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚  StorageClass   â”‚           â”‚ PersistentVolumeâ”‚                        â”‚
â”‚   â”‚                 â”‚           â”‚ Claim           â”‚                        â”‚
â”‚   â”‚ name: fast-ssd  â”‚â—„â”€â”€ì°¸ì¡°â”€â”€â”€â”€â”‚                 â”‚                        â”‚
â”‚   â”‚ provisioner:    â”‚           â”‚ storageClass:   â”‚                        â”‚
â”‚   â”‚   csi.example   â”‚           â”‚   fast-ssd      â”‚                        â”‚
â”‚   â”‚ parameters:     â”‚           â”‚ storage: 10Gi   â”‚                        â”‚
â”‚   â”‚   type: ssd     â”‚           â”‚                 â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚          â”‚                               â”‚                                  â”‚
â”‚          â”‚                               â”‚ PVC ìƒì„± ì‹œ                      â”‚
â”‚          â–¼                               â–¼                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     CSI Provisioner                                  â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚  1. PVC ìƒì„± ê°ì§€                                                    â”‚  â”‚
â”‚   â”‚  2. StorageClass ì°¸ì¡°                                                â”‚  â”‚
â”‚   â”‚  3. ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œì— ë³¼ë¥¨ ìƒì„± ìš”ì²­                              â”‚  â”‚
â”‚   â”‚  4. PV ìë™ ìƒì„±                                                     â”‚  â”‚
â”‚   â”‚  5. PVCì™€ PV ë°”ì¸ë”©                                                  â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼ ìë™ ìƒì„±                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚   â”‚ PersistentVolume â”‚                                                      â”‚
â”‚   â”‚                 â”‚                                                      â”‚
â”‚   â”‚ (ë™ì ìœ¼ë¡œ ìƒì„±ë¨)â”‚                                                      â”‚
â”‚   â”‚ capacity: 10Gi  â”‚                                                      â”‚
â”‚   â”‚ storageClass:   â”‚                                                      â”‚
â”‚   â”‚   fast-ssd      â”‚                                                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


#### ì˜ˆì‹œ: Dynamic Provisioning with CSI

```yaml
# StorageClass ì •ì˜ (ê´€ë¦¬ì)
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast-ssd
provisioner: pd.csi.storage.gke.io  # CSI ë“œë¼ì´ë²„
parameters:
  type: pd-ssd
reclaimPolicy: Delete              # PVC ì‚­ì œ ì‹œ PVë„ ì‚­ì œ
allowVolumeExpansion: true         # ë³¼ë¥¨ í™•ì¥ í—ˆìš©
volumeBindingMode: WaitForFirstConsumer  # Pod ìŠ¤ì¼€ì¤„ ì‹œ ë°”ì¸ë”©

---
# PVC ìƒì„± (ì‚¬ìš©ì)
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: database-storage
spec:
  storageClassName: fast-ssd       # StorageClass ì°¸ì¡°
  accessModes:
    - ReadWriteOnce               # ë‹¨ì¼ ë…¸ë“œì—ì„œ ì½ê¸°/ì“°ê¸°
  resources:
    requests:
      storage: 100Gi

---
# Podì—ì„œ PVC ì‚¬ìš© (ì‚¬ìš©ì)
apiVersion: v1
kind: Pod
metadata:
  name: database
spec:
  containers:
  - name: postgres
    image: postgres:15
    volumeMounts:
    - name: data
      mountPath: /var/lib/postgresql/data
  volumes:
  - name: data
    persistentVolumeClaim:
      claimName: database-storage
```

> **ğŸ“˜ ê°œë… (Concept)**: Access ModesëŠ” ë³¼ë¥¨ì´ ì–´ë–»ê²Œ ë§ˆìš´íŠ¸ë  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤:
> - **RWO (ReadWriteOnce)**: ë‹¨ì¼ ë…¸ë“œì—ì„œ ì½ê¸°/ì“°ê¸° (ëŒ€ë¶€ë¶„ì˜ ë¸”ë¡ ìŠ¤í† ë¦¬ì§€)
> - **ROX (ReadOnlyMany)**: ì—¬ëŸ¬ ë…¸ë“œì—ì„œ ì½ê¸° ì „ìš©
> - **RWX (ReadWriteMany)**: ì—¬ëŸ¬ ë…¸ë“œì—ì„œ ì½ê¸°/ì“°ê¸° (NFS, CephFS ë“± íŒŒì¼ ìŠ¤í† ë¦¬ì§€ í•„ìš”)
> - **RWOP (ReadWriteOncePod)**: ë‹¨ì¼ Podì—ì„œë§Œ ì½ê¸°/ì“°ê¸° (Kubernetes 1.22+)

### 5.3. CSI (Container Storage Interface)

CSIëŠ” Kubernetesì™€ ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œ ê°„ì˜ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CSI (Container Storage Interface)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Kubernetes                               ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œ                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                               â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  kubelet                      â”‚       â”‚  AWS EBS / GCP PD / Ceph     â”‚ â”‚
â”‚  â”‚      â”‚                        â”‚       â”‚  NFS / Local / ...           â”‚ â”‚
â”‚  â”‚      â”‚ CSI gRPC              â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚      â–¼                        â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚    CSI Driver         â”‚   â”‚ gRPC  â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚                       â”‚â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–º                             â”‚ â”‚
â”‚  â”‚  â”‚  Node Plugin:         â”‚   â”‚       â”‚  ìŠ¤í† ë¦¬ì§€ API                 â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ NodeStageVolume    â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ NodePublishVolume  â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚                       â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚  Controller Plugin:   â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ CreateVolume       â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ DeleteVolume       â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ AttachVolume       â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚                       â”‚   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚                               â”‚ â”‚
â”‚  â”‚                               â”‚       â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚   CSI Driver ì»´í¬ë„ŒíŠ¸:                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚   Controller (Deployment, 1ê°œ)                                       â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚  â€¢ csi-provisioner: PVC â†’ PV ë™ì  í”„ë¡œë¹„ì €ë‹                 â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  â€¢ csi-attacher: PVë¥¼ ë…¸ë“œì— ì—°ê²°                            â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  â€¢ csi-snapshotter: ë³¼ë¥¨ ìŠ¤ëƒ…ìƒ·                              â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  â€¢ csi-resizer: ë³¼ë¥¨ í¬ê¸° ì¡°ì •                               â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  â€¢ driver (ì‚¬ì´ë“œì¹´): ìŠ¤í† ë¦¬ì§€ ë°±ì—”ë“œì™€ í†µì‹                   â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â”‚   Node (DaemonSet, ëª¨ë“  ë…¸ë“œ)                                        â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚  â€¢ csi-node-driver-registrar: kubeletì— ë“œë¼ì´ë²„ ë“±ë¡        â”‚   â”‚  â”‚
â”‚   â”‚   â”‚  â€¢ driver: ë…¸ë“œì—ì„œ ë³¼ë¥¨ ë§ˆìš´íŠ¸/ì–¸ë§ˆìš´íŠ¸                      â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â”‚                                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¹ì…˜ ìš”ì•½

- **Volume**: Pod ë‚´ ì»¨í…Œì´ë„ˆ ê°„ ë°ì´í„° ê³µìœ , ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ì—ë„ ìœ ì§€
- **PV/PVC**: ì˜êµ¬ ìŠ¤í† ë¦¬ì§€ ì¶”ìƒí™”, PVCê°€ PVë¥¼ ìš”ì²­
- **StorageClass**: ë™ì  í”„ë¡œë¹„ì €ë‹ í…œí”Œë¦¿, CSI ë“œë¼ì´ë²„ ì§€ì •
- **CSI**: ìŠ¤í† ë¦¬ì§€ ë²¤ë” ë…ë¦½ì ì¸ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤

---

## 6. ê³ ê°€ìš©ì„± (High Availability)

í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ê³ ê°€ìš©ì„±ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.

### 6.1. Control Plane HA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Control Plane ê³ ê°€ìš©ì„± êµ¬ì„±                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                        â”‚      Load Balancer          â”‚                      â”‚
â”‚                        â”‚    (HAProxy / keepalived)   â”‚                      â”‚
â”‚                        â”‚                             â”‚                      â”‚
â”‚                        â”‚   VIP: 192.168.108.10:6443  â”‚                      â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                      â”‚                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚                       â”‚                       â”‚              â”‚
â”‚              â–¼                       â–¼                       â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚  Control Plane 1  â”‚   â”‚  Control Plane 2  â”‚   â”‚  Control Plane 3  â”‚       â”‚
â”‚   â”‚  192.168.108.11   â”‚   â”‚  192.168.108.12   â”‚   â”‚  192.168.108.13   â”‚       â”‚
â”‚   â”‚                  â”‚   â”‚                  â”‚   â”‚                  â”‚       â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚   â”‚ â”‚kube-apiserverâ”‚ â”‚   â”‚ â”‚kube-apiserverâ”‚ â”‚   â”‚ â”‚kube-apiserverâ”‚ â”‚       â”‚
â”‚   â”‚ â”‚   (Active)   â”‚ â”‚   â”‚ â”‚   (Active)   â”‚ â”‚   â”‚ â”‚   (Active)   â”‚ â”‚       â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚   â”‚                  â”‚   â”‚                  â”‚   â”‚                  â”‚       â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚   â”‚ â”‚kube-schedulerâ”‚ â”‚   â”‚ â”‚kube-schedulerâ”‚ â”‚   â”‚ â”‚kube-schedulerâ”‚ â”‚       â”‚
â”‚   â”‚ â”‚  (Leader)    â”‚ â”‚   â”‚ â”‚  (Standby)   â”‚ â”‚   â”‚ â”‚  (Standby)   â”‚ â”‚       â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚   â”‚                  â”‚   â”‚                  â”‚   â”‚                  â”‚       â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚   â”‚ â”‚ controller-  â”‚ â”‚   â”‚ â”‚ controller-  â”‚ â”‚   â”‚ â”‚ controller-  â”‚ â”‚       â”‚
â”‚   â”‚ â”‚   manager    â”‚ â”‚   â”‚ â”‚   manager    â”‚ â”‚   â”‚ â”‚   manager    â”‚ â”‚       â”‚
â”‚   â”‚ â”‚  (Leader)    â”‚ â”‚   â”‚ â”‚  (Standby)   â”‚ â”‚   â”‚ â”‚  (Standby)   â”‚ â”‚       â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚   â”‚                  â”‚   â”‚                  â”‚   â”‚                  â”‚       â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚   â”‚ â”‚    etcd      â”‚â—„â”¼â”€â”€â”€â”¼â–ºâ”‚    etcd      â”‚â—„â”¼â”€â”€â”€â”¼â–ºâ”‚    etcd      â”‚ â”‚       â”‚
â”‚   â”‚ â”‚  (Cluster)   â”‚ â”‚   â”‚ â”‚  (Cluster)   â”‚ â”‚   â”‚ â”‚  (Cluster)   â”‚ â”‚       â”‚
â”‚   â”‚ â”‚   Raft ë³µì œ  â”‚ â”‚   â”‚ â”‚   Raft ë³µì œ  â”‚ â”‚   â”‚ â”‚   Raft ë³µì œ  â”‚ â”‚       â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚   êµ¬ì„± ì„¤ëª…:                                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚                                                                             â”‚
â”‚   API Server: ëª¨ë‘ Active (Stateless, LB ë’¤ì—ì„œ ë¶„ì‚°)                       â”‚
â”‚   Scheduler: ë¦¬ë” ì„ ì¶œ (1ê°œë§Œ Active)                                       â”‚
â”‚   Controller Manager: ë¦¬ë” ì„ ì¶œ (1ê°œë§Œ Active)                              â”‚
â”‚   etcd: Raft í•©ì˜ (ì¿¼ëŸ¼ 2/3 í•„ìš”)                                           â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤:                                                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚   â€¢ 1ê°œ ë…¸ë“œ ì¥ì• : ì •ìƒ ë™ì‘ (ì¿¼ëŸ¼ ìœ ì§€)                                    â”‚
â”‚   â€¢ 2ê°œ ë…¸ë“œ ì¥ì• : ì½ê¸°ë§Œ ê°€ëŠ¥, ì“°ê¸° ë¶ˆê°€ (ì¿¼ëŸ¼ ìƒì‹¤)                        â”‚
â”‚   â€¢ LB ì¥ì• : ë‹¤ë¥¸ ë…¸ë“œë¡œ Failover (keepalived VIP ì´ë™)                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **âš ï¸ ì£¼ì˜ (Warning)**: Control Plane ë…¸ë“œëŠ” í•­ìƒ **í™€ìˆ˜**ë¡œ êµ¬ì„±í•˜ì„¸ìš” (3, 5, 7). ì§ìˆ˜(4, 6)ëŠ” ì¿¼ëŸ¼ ê³„ì‚°ì— ë¶ˆë¦¬í•˜ë©° (4ë…¸ë“œì—ì„œ 2ë…¸ë“œ ì¥ì•  ì‹œ ì¿¼ëŸ¼ ìƒì‹¤), ë¹„ìš© ëŒ€ë¹„ ê°€ìš©ì„± ì´ì ì´ ì—†ìŠµë‹ˆë‹¤.

### 6.2. etcd í† í´ë¡œì§€ ì„ íƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         etcd í† í´ë¡œì§€ ì˜µì…˜                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   1. Stacked etcd (ê¶Œì¥)                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                             â”‚
â”‚   Control Plane ë…¸ë“œì— etcdë„ í•¨ê»˜ ì‹¤í–‰                                     â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ Control Plane 1â”‚  â”‚ Control Plane 2â”‚  â”‚ Control Plane 3â”‚               â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚               â”‚
â”‚   â”‚ â”‚ API Server â”‚ â”‚  â”‚ â”‚ API Server â”‚ â”‚  â”‚ â”‚ API Server â”‚ â”‚               â”‚
â”‚   â”‚ â”‚ Scheduler  â”‚ â”‚  â”‚ â”‚ Scheduler  â”‚ â”‚  â”‚ â”‚ Scheduler  â”‚ â”‚               â”‚
â”‚   â”‚ â”‚ Controller â”‚ â”‚  â”‚ â”‚ Controller â”‚ â”‚  â”‚ â”‚ Controller â”‚ â”‚               â”‚
â”‚   â”‚ â”‚    etcd    â”‚ â”‚  â”‚ â”‚    etcd    â”‚ â”‚  â”‚ â”‚    etcd    â”‚ â”‚               â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì : ê´€ë¦¬ ë‹¨ìˆœ, ë…¸ë“œ ìˆ˜ ì ìŒ, Kubespray ê¸°ë³¸                             â”‚
â”‚   ë‹¨ì : etcd ì¥ì•  = Control Plane ì¥ì•                                       â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   2. External etcd                                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚                                                                             â”‚
â”‚   ë³„ë„ì˜ etcd í´ëŸ¬ìŠ¤í„° ìš´ì˜                                                  â”‚
â”‚                                                                             â”‚
â”‚   Control Plane                           etcd í´ëŸ¬ìŠ¤í„°                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ CP 1         â”‚  â”‚ CP 2         â”‚     â”‚ etcd 1       â”‚                  â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚              â”‚                  â”‚
â”‚   â”‚ â”‚API Serverâ”‚â”€â”¼â”€â”€â”¼â”€â”‚API Serverâ”‚â”€â”¼â”€â”€â”€â”€â”€â–ºâ”‚              â”‚                  â”‚
â”‚   â”‚ â”‚Scheduler â”‚ â”‚  â”‚ â”‚Scheduler â”‚ â”‚     â”‚              â”‚                  â”‚
â”‚   â”‚ â”‚Controllerâ”‚ â”‚  â”‚ â”‚Controllerâ”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ etcd 2       â”‚                  â”‚
â”‚                                          â”‚              â”‚                  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                                          â”‚ etcd 3       â”‚                  â”‚
â”‚                                          â”‚              â”‚                  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                             â”‚
â”‚   ì¥ì : ì¥ì•  ê²©ë¦¬, ë…ë¦½ì  ìŠ¤ì¼€ì¼ë§/ë°±ì—…                                      â”‚
â”‚   ë‹¨ì : ê´€ë¦¬ ë³µì¡, ë…¸ë“œ ìˆ˜ ì¦ê°€                                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¹ì…˜ ìš”ì•½

- **API Server**: Statelessì´ë¯€ë¡œ LB ë’¤ì—ì„œ ëª¨ë‘ Active
- **Scheduler/Controller Manager**: ë¦¬ë” ì„ ì¶œ, 1ê°œë§Œ Active
- **etcd**: Raft í•©ì˜, ì¿¼ëŸ¼(ê³¼ë°˜ìˆ˜) í•„ìš”
- **ë…¸ë“œ ìˆ˜**: í•­ìƒ í™€ìˆ˜ (3, 5, 7) ê¶Œì¥

---

## ì´ ì¥ì˜ ìš”ì•½

| ê°œë… | ì„¤ëª… | í•µì‹¬ í¬ì¸íŠ¸ |
|------|------|------------|
| **ì„ ì–¸ì  êµ¬ì„±** | "ë¬´ì—‡ì„" ì •ì˜í•˜ë©´ "ì–´ë–»ê²Œ"ëŠ” K8sê°€ ì²˜ë¦¬ | `kubectl apply -f`, GitOps |
| **Controller íŒ¨í„´** | Observe â†’ Compare â†’ Act ë£¨í”„ | ìê°€ ì¹˜ìœ , ì›í•˜ëŠ” ìƒíƒœ ìˆ˜ë ´ |
| **API Server** | í´ëŸ¬ìŠ¤í„°ì˜ í”„ë¡ íŠ¸ ë°ìŠ¤í¬ | ì¸ì¦/ì¸ê°€/ìŠ¹ì¸, Watch ë©”ì»¤ë‹ˆì¦˜ |
| **etcd** | ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œ | Raft í•©ì˜, í´ëŸ¬ìŠ¤í„° ìƒíƒœì˜ ì§„ì‹¤ |
| **Scheduler** | Podë¥¼ ë…¸ë“œì— ë°°ì • | í•„í„°ë§ â†’ ì ìˆ˜í™” â†’ ë°”ì¸ë”© |
| **Controller Manager** | ë‹¤ì–‘í•œ Controller ì‹¤í–‰ | Deployment, Node, Endpoint Controller |
| **kubelet** | ë…¸ë“œ ì—ì´ì „íŠ¸ | Pod ìƒëª…ì£¼ê¸°, í—¬ìŠ¤ì²´í¬, ìƒíƒœ ë³´ê³  |
| **CRI** | Container Runtime ì¸í„°í˜ì´ìŠ¤ | containerd, runc |
| **Service** | ì•ˆì •ì ì¸ ë„¤íŠ¸ì›Œí¬ ì—”ë“œí¬ì¸íŠ¸ | ClusterIP, NodePort, LoadBalancer |
| **kube-proxy** | Service ë¡œë“œë°¸ëŸ°ì‹± êµ¬í˜„ | iptables, IPVS, eBPF |
| **CoreDNS** | í´ëŸ¬ìŠ¤í„° DNS | `<svc>.<ns>.svc.cluster.local` |
| **PV/PVC** | ì˜êµ¬ ìŠ¤í† ë¦¬ì§€ ì¶”ìƒí™” | ë™ì  í”„ë¡œë¹„ì €ë‹, StorageClass |
| **CSI** | ìŠ¤í† ë¦¬ì§€ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ | ë²¤ë” ë…ë¦½ì  |
| **HA** | Control Plane ê³ ê°€ìš©ì„± | 3ë…¸ë“œ, Stacked/External etcd |

---

## ì‹¤ìŠµ ê³¼ì œ

### ê³¼ì œ 1: Pod ìƒì„± ê³¼ì • ì¶”ì 

**ëª©í‘œ**: Podê°€ ìƒì„±ë˜ëŠ” ì „ì²´ ê³¼ì •ì„ ë¡œê·¸ì™€ ì´ë²¤íŠ¸ë¡œ ì¶”ì í•©ë‹ˆë‹¤.

```bash
# 1. í„°ë¯¸ë„ 1: ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§
kubectl get events -w

# 2. í„°ë¯¸ë„ 2: Pod ìƒì„±
kubectl run nginx-test --image=nginx

# 3. í„°ë¯¸ë„ 3: API Server ê°ì‚¬ ë¡œê·¸ í™•ì¸ (Control Plane ë…¸ë“œì—ì„œ)
sudo cat /var/log/kubernetes/audit/audit.log | grep nginx-test | jq .

# 4. ì´ë²¤íŠ¸ì—ì„œ ë‹¤ìŒ ìˆœì„œ í™•ì¸:
#    - Scheduled: ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë…¸ë“œ ì„ íƒ
#    - Pulling: ì´ë¯¸ì§€ Pull ì‹œì‘
#    - Pulled: ì´ë¯¸ì§€ Pull ì™„ë£Œ
#    - Created: ì»¨í…Œì´ë„ˆ ìƒì„±
#    - Started: ì»¨í…Œì´ë„ˆ ì‹œì‘

# 5. ì •ë¦¬
kubectl delete pod nginx-test
```

**ë„ì „ ê³¼ì œ**: 
- `kubectl describe pod`ë¡œ Events ì„¹ì…˜ì„ ë¶„ì„í•˜ì„¸ìš”
- kubelet ë¡œê·¸ì—ì„œ í•´ë‹¹ Pod ê´€ë ¨ ë¡œê·¸ë¥¼ ì°¾ì•„ë³´ì„¸ìš”

---

### ê³¼ì œ 2: Service ë‚´ë¶€ ë™ì‘ í™•ì¸

**ëª©í‘œ**: Serviceê°€ ì–´ë–»ê²Œ Podë¡œ íŠ¸ë˜í”½ì„ ì „ë‹¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

```bash
# 1. Deploymentì™€ Service ìƒì„±
kubectl create deployment web --image=nginx --replicas=3
kubectl expose deployment web --port=80 --target-port=80

# 2. Serviceì™€ Endpoints í™•ì¸
kubectl get svc web -o wide
kubectl get endpoints web

# 3. iptables ê·œì¹™ í™•ì¸ (Worker ë…¸ë“œì—ì„œ)
sudo iptables -t nat -L KUBE-SERVICES -n | grep <ClusterIP>
sudo iptables -t nat -L KUBE-SVC-XXXX -n -v  # ìœ„ì—ì„œ ì°¾ì€ ì²´ì¸

# 4. DNS í™•ì¸
kubectl run dns-test --rm -it --image=busybox --restart=Never -- nslookup web.default.svc.cluster.local

# 5. ì—°ê²° í…ŒìŠ¤íŠ¸
kubectl run curl-test --rm -it --image=curlimages/curl --restart=Never -- curl -s http://web

# 6. ì •ë¦¬
kubectl delete deployment web
kubectl delete svc web
```

**ë„ì „ ê³¼ì œ**:
- Podë¥¼ ì¶”ê°€/ì‚­ì œí•˜ë©´ì„œ Endpointsê°€ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”
- Cilium ì‚¬ìš© ì‹œ `cilium service list`ë¡œ eBPF ì„œë¹„ìŠ¤ ë§µì„ í™•ì¸í•˜ì„¸ìš”

---

### ê³¼ì œ 3: ìŠ¤ì¼€ì¤„ëŸ¬ ë™ì‘ ì´í•´

**ëª©í‘œ**: ìŠ¤ì¼€ì¤„ëŸ¬ì˜ í•„í„°ë§ê³¼ ì ìˆ˜í™”ë¥¼ ì‹¤í—˜ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.

```bash
# 1. ë…¸ë“œ ë¼ë²¨ í™•ì¸
kubectl get nodes --show-labels

# 2. íŠ¹ì • ë…¸ë“œì—ë§Œ ë°°ì¹˜ë˜ëŠ” Pod
cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: node-selector-test
spec:
  nodeSelector:
    kubernetes.io/hostname: <íŠ¹ì •-ë…¸ë“œ-ì´ë¦„>
  containers:
  - name: nginx
    image: nginx
EOF

# 3. ë°°ì¹˜ í™•ì¸
kubectl get pod node-selector-test -o wide

# 4. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¼ë²¨ë¡œ Pending ìƒíƒœ í™•ì¸
cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: pending-test
spec:
  nodeSelector:
    non-existent-label: "true"
  containers:
  - name: nginx
    image: nginx
EOF

kubectl get pod pending-test
kubectl describe pod pending-test | grep -A5 Events

# 5. ì •ë¦¬
kubectl delete pod node-selector-test pending-test
```

**ë„ì „ ê³¼ì œ**:
- Taintsì™€ Tolerationsë¥¼ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œ ê²©ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”
- PodAffinityë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë ¨ Podë¥¼ ê°™ì€ ë…¸ë“œì— ë°°ì¹˜í•´ë³´ì„¸ìš”

---

### ê³¼ì œ 4: PV/PVC ë™ì  í”„ë¡œë¹„ì €ë‹

**ëª©í‘œ**: StorageClassë¥¼ ì‚¬ìš©í•œ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ê²½í—˜í•©ë‹ˆë‹¤.

```bash
# 1. StorageClass í™•ì¸
kubectl get storageclass

# 2. PVC ìƒì„±
cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: dynamic-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
  # storageClassName: <ê¸°ë³¸ StorageClass ë˜ëŠ” ì§€ì •>
EOF

# 3. PVCì™€ PV ìƒíƒœ í™•ì¸
kubectl get pvc dynamic-pvc
kubectl get pv

# 4. Podì—ì„œ PVC ì‚¬ìš©
cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: pvc-test
spec:
  containers:
  - name: app
    image: busybox
    command: ['sh', '-c', 'echo "Hello from PVC" > /data/hello.txt && sleep 3600']
    volumeMounts:
    - name: storage
      mountPath: /data
  volumes:
  - name: storage
    persistentVolumeClaim:
      claimName: dynamic-pvc
EOF

# 5. ë°ì´í„° í™•ì¸
kubectl exec pvc-test -- cat /data/hello.txt

# 6. ì •ë¦¬
kubectl delete pod pvc-test
kubectl delete pvc dynamic-pvc
# PVëŠ” reclaimPolicyì— ë”°ë¼ ìë™ ì‚­ì œë˜ê±°ë‚˜ ë‚¨ì•„ìˆìŒ
```

**ë„ì „ ê³¼ì œ**:
- ë³¼ë¥¨ í™•ì¥ì´ ê°€ëŠ¥í•œ ê²½ìš° PVC í¬ê¸°ë¥¼ ëŠ˜ë ¤ë³´ì„¸ìš”
- VolumeSnapshotì„ ìƒì„±í•˜ê³  ë³µì›í•´ë³´ì„¸ìš” (CSI ë“œë¼ì´ë²„ ì§€ì› í•„ìš”)

---

### ê³¼ì œ 5: Control Plane ì»´í¬ë„ŒíŠ¸ íƒìƒ‰

**ëª©í‘œ**: Control Plane ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœì™€ êµ¬ì„±ì„ í™•ì¸í•©ë‹ˆë‹¤.

```bash
# 1. Control Plane Pod í™•ì¸
kubectl get pods -n kube-system -l tier=control-plane

# 2. API Server ìƒíƒœ í™•ì¸
kubectl get --raw /healthz
kubectl get --raw /version
kubectl get --raw /api/v1

# 3. etcd ìƒíƒœ í™•ì¸ (Control Plane ë…¸ë“œì—ì„œ)
sudo ETCDCTL_API=3 etcdctl \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key \
  endpoint status --write-out=table

# 4. Schedulerì™€ Controller Manager ë¦¬ë” í™•ì¸
kubectl get endpoints -n kube-system kube-scheduler -o yaml
kubectl get endpoints -n kube-system kube-controller-manager -o yaml
# holderIdentityì—ì„œ í˜„ì¬ ë¦¬ë” í™•ì¸

# 5. kubelet ìƒíƒœ í™•ì¸ (ê° ë…¸ë“œì—ì„œ)
systemctl status kubelet
journalctl -u kubelet -f --no-pager | head -50

# 6. ë…¸ë“œ ì¡°ê±´ í™•ì¸
kubectl describe node <ë…¸ë“œì´ë¦„> | grep -A10 Conditions
```

**ë„ì „ ê³¼ì œ**:
- etcdì—ì„œ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ í‚¤ë¥¼ ì§ì ‘ ì¡°íšŒí•´ë³´ì„¸ìš”
- Controller Manager ë¡œê·¸ì—ì„œ Reconciliation í™œë™ì„ ì°¾ì•„ë³´ì„¸ìš”

---

## í•™ìŠµ ì ê²€

### ì§ˆë¬¸ 1: Kubernetesì—ì„œ "ì„ ì–¸ì  êµ¬ì„±"ì´ ëª…ë ¹í˜• êµ¬ì„±ë³´ë‹¤ ì¢‹ì€ ì´ìœ ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ì„ ì–¸ì  êµ¬ì„±ì˜ ì¥ì :**

1. **ë©±ë“±ì„±(Idempotency)**: ê°™ì€ YAMLì„ ì—¬ëŸ¬ ë²ˆ applyí•´ë„ ê²°ê³¼ê°€ ë™ì¼í•©ë‹ˆë‹¤. ëª…ë ¹í˜•ì€ ì‹¤í–‰ ìˆœì„œì™€ í˜„ì¬ ìƒíƒœì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. **ìë™ ë³µêµ¬**: Kubernetesê°€ "ì›í•˜ëŠ” ìƒíƒœ"ì™€ "í˜„ì¬ ìƒíƒœ"ì˜ ì°¨ì´ë¥¼ ìë™ìœ¼ë¡œ ê³„ì‚°í•˜ê³  ì¡°ì •í•©ë‹ˆë‹¤.

3. **ë²„ì „ ê´€ë¦¬**: YAML íŒŒì¼ì„ Gitì— ì €ì¥í•˜ì—¬ ì¸í”„ë¼ ë³€ê²½ ì´ë ¥ ì¶”ì ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤ (GitOps).

4. **ì¬í˜„ ê°€ëŠ¥ì„±**: ê°™ì€ YAMLë¡œ ë™ì¼í•œ í™˜ê²½ì„ ë‹¤ì‹œ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

5. **ë¬¸ì„œí™”**: YAML ìì²´ê°€ í˜„ì¬ ì¸í”„ë¼ êµ¬ì„±ì˜ ë¬¸ì„œ ì—­í• ì„ í•©ë‹ˆë‹¤.

```bash
# ëª…ë ¹í˜•: í˜„ì¬ ìƒíƒœë¥¼ ì•Œì•„ì•¼ í•¨
kubectl scale deployment nginx --replicas=3  # replicasê°€ 2ì˜€ëŠ”ì§€ 1ì´ì—ˆëŠ”ì§€ ëª¨ë¦„

# ì„ ì–¸ì : ì›í•˜ëŠ” ìµœì¢… ìƒíƒœë§Œ ì„ ì–¸
kubectl apply -f deployment.yaml  # spec.replicas: 3
```

</details>

---

### ì§ˆë¬¸ 2: Podê°€ "Pending" ìƒíƒœì— ë¨¸ë¬´ë¥´ëŠ” ì£¼ìš” ì›ì¸ì€?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**Pending ìƒíƒœì˜ ì£¼ìš” ì›ì¸:**

1. **ë¦¬ì†ŒìŠ¤ ë¶€ì¡±**
   - ìš”ì²­í•œ CPU/Memoryë¥¼ ì¶©ì¡±í•˜ëŠ” ë…¸ë“œê°€ ì—†ìŒ
   - `kubectl describe pod <name>`ì—ì„œ "Insufficient cpu" ë˜ëŠ” "Insufficient memory" í™•ì¸

2. **nodeSelector/affinity ë¶ˆì¼ì¹˜**
   - ì§€ì •í•œ ë¼ë²¨ì„ ê°€ì§„ ë…¸ë“œê°€ ì—†ìŒ
   - "0/3 nodes are available: 3 node(s) didn't match node selector"

3. **Taintsì™€ Tolerations**
   - ëª¨ë“  ë…¸ë“œì— Taintê°€ ìˆê³  Podì— í•´ë‹¹ Tolerationì´ ì—†ìŒ

4. **PVC ë°”ì¸ë”© ëŒ€ê¸°**
   - PersistentVolumeClaimì´ ì ì ˆí•œ PVì™€ ë°”ì¸ë”©ë˜ì§€ ì•ŠìŒ
   - StorageClassì˜ ë™ì  í”„ë¡œë¹„ì €ë‹ ì‹¤íŒ¨

5. **ì´ë¯¸ì§€ Pull ì‹¤íŒ¨ (ImagePullBackOffì™€ í˜¼ë™ ì£¼ì˜)**
   - ì´ˆê¸° ìŠ¤ì¼€ì¤„ë§ ì „ ì´ë¯¸ì§€ ê²€ì¦ ì‹¤íŒ¨ ì‹œ Pending ê°€ëŠ¥

**ë””ë²„ê¹… ë°©ë²•:**
```bash
kubectl describe pod <pod-name>
# Events ì„¹ì…˜ì—ì„œ FailedScheduling ì›ì¸ í™•ì¸

kubectl get events --field-selector reason=FailedScheduling
```

</details>

---

### ì§ˆë¬¸ 3: kube-schedulerì˜ "Filtering"ê³¼ "Scoring" ë‹¨ê³„ì˜ ì°¨ì´ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**Filtering (í•„í„°ë§)**
- **ëª©ì **: ë°°ì¹˜ ë¶ˆê°€ëŠ¥í•œ ë…¸ë“œë¥¼ ì œì™¸
- **ê²°ê³¼**: Pass/Fail (ì´ì§„)
- **ì˜ˆì‹œ**: 
  - ë¦¬ì†ŒìŠ¤ ë¶€ì¡± ë…¸ë“œ ì œì™¸
  - nodeSelector ë¶ˆì¼ì¹˜ ë…¸ë“œ ì œì™¸
  - Taint í—ˆìš©í•˜ì§€ ì•ŠëŠ” ë…¸ë“œ ì œì™¸
  - PodAntiAffinity ìœ„ë°˜ ë…¸ë“œ ì œì™¸

**Scoring (ì ìˆ˜í™”)**
- **ëª©ì **: í•„í„°ë¥¼ í†µê³¼í•œ ë…¸ë“œ ì¤‘ ìµœì  ë…¸ë“œ ì„ íƒ
- **ê²°ê³¼**: 0-100 ì ìˆ˜
- **ì˜ˆì‹œ**:
  - LeastRequestedPriority: ë¦¬ì†ŒìŠ¤ ì—¬ìœ ê°€ ë§ì„ìˆ˜ë¡ ë†’ì€ ì ìˆ˜
  - BalancedResourceAllocation: CPU/Memory ê· í˜•ì´ ì¢‹ì„ìˆ˜ë¡ ë†’ì€ ì ìˆ˜
  - ImageLocality: í•„ìš”í•œ ì´ë¯¸ì§€ê°€ ì´ë¯¸ ìˆìœ¼ë©´ ë†’ì€ ì ìˆ˜
  - NodeAffinity: preferredDuringScheduling ì¡°ê±´ ë§Œì¡± ì‹œ ê°€ì¤‘ì¹˜ ì ìˆ˜

**ìˆœì„œ:**
1. Filteringìœ¼ë¡œ í›„ë³´ ë…¸ë“œ ëª©ë¡ ìƒì„±
2. í›„ë³´ê°€ ì—¬ëŸ¬ ê°œë©´ Scoringìœ¼ë¡œ ìµœì  ë…¸ë“œ ì„ íƒ
3. ë™ì ì´ë©´ ëœë¤ ì„ íƒ

</details>

---

### ì§ˆë¬¸ 4: kubeletì´ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ CNI, CRI, CSIì˜ ì—­í• ì€?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**CRI (Container Runtime Interface)**
- **ì—­í• **: ì»¨í…Œì´ë„ˆ ìƒì„±/ì‹œì‘/ì¤‘ì§€
- **ë™ì‘**: kubelet â†’ containerd â†’ runc
- **ë‹´ë‹¹**: ì´ë¯¸ì§€ Pull, ì»¨í…Œì´ë„ˆ í”„ë¡œì„¸ìŠ¤ ìƒì„±, ë„¤ì„ìŠ¤í˜ì´ìŠ¤/cgroups ì„¤ì •

**CNI (Container Network Interface)**
- **ì—­í• **: Pod ë„¤íŠ¸ì›Œí¬ ì„¤ì •
- **ë™ì‘**: kubeletì´ Pod ìƒì„± ì‹œ CNI í”ŒëŸ¬ê·¸ì¸ í˜¸ì¶œ
- **ë‹´ë‹¹**: 
  - IP ì£¼ì†Œ í• ë‹¹ (IPAM)
  - veth pair ìƒì„±
  - ë¼ìš°íŒ… í…Œì´ë¸” ì„¤ì •
  - ì˜ˆ: Cilium, Calico, Flannel

**CSI (Container Storage Interface)**
- **ì—­í• **: ë³¼ë¥¨ ì—°ê²°/ë§ˆìš´íŠ¸
- **ë™ì‘**: kubeletì´ PVCê°€ ìˆëŠ” Pod ìƒì„± ì‹œ CSI ë“œë¼ì´ë²„ í˜¸ì¶œ
- **ë‹´ë‹¹**:
  - ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œì—ì„œ ë³¼ë¥¨ ìƒì„±
  - ë…¸ë“œì— ë³¼ë¥¨ ì—°ê²° (Attach)
  - ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸

**ì‹¤í–‰ ìˆœì„œ:**
1. CRI: PodSandbox ìƒì„± (pause ì»¨í…Œì´ë„ˆ, ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤)
2. CNI: ë„¤íŠ¸ì›Œí¬ ì„¤ì • (IP í• ë‹¹, veth ìƒì„±)
3. CSI: ë³¼ë¥¨ ë§ˆìš´íŠ¸ (í•„ìš”ì‹œ)
4. CRI: ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆ ìƒì„±/ì‹œì‘

</details>

---

### ì§ˆë¬¸ 5: Serviceì˜ ClusterIP, NodePort, LoadBalancerì˜ ê´€ê³„ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ê³„ì¸µ êµ¬ì¡° (ìƒìœ„ íƒ€ì…ì€ í•˜ìœ„ íƒ€ì…ì„ í¬í•¨):**

```
LoadBalancer
    â””â”€â”€ NodePort
           â””â”€â”€ ClusterIP
```

**ClusterIP (ê¸°ë³¸)**
- í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ì „ìš© ê°€ìƒ IP
- ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ë¶ˆê°€

**NodePort**
- ClusterIP + ëª¨ë“  ë…¸ë“œì˜ íŠ¹ì • í¬íŠ¸(30000-32767) ê°œë°©
- `<NodeIP>:<NodePort>` â†’ ClusterIP â†’ Pod

**LoadBalancer**
- NodePort + ì™¸ë¶€ ë¡œë“œë°¸ëŸ°ì„œ í”„ë¡œë¹„ì €ë‹
- ì™¸ë¶€ IP â†’ NodePort â†’ ClusterIP â†’ Pod
- í´ë¼ìš°ë“œ í™˜ê²½ ë˜ëŠ” MetalLB/Cilium LB IPAM í•„ìš”

**ì‹¤ì œ íŠ¸ë˜í”½ ê²½ë¡œ (LoadBalancer ì˜ˆì‹œ):**
```
Client â†’ External LB (203.0.113.50:80)
       â†’ NodePort (192.168.108.11:30080)
       â†’ ClusterIP (10.201.50.100:80)
       â†’ Pod (10.200.0.15:8080)
```

</details>

---

### ì§ˆë¬¸ 6: kube-proxy iptables ëª¨ë“œê°€ ëŒ€ê·œëª¨ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¬¸ì œì¸ ì´ìœ ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**iptables ëª¨ë“œì˜ í™•ì¥ì„± ë¬¸ì œ:**

1. **O(n) ê·œì¹™ íƒìƒ‰**
   - Service/Endpointê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ iptables ê·œì¹™ì´ ì„ í˜• ì¦ê°€
   - ë§¤ íŒ¨í‚·ë§ˆë‹¤ ê·œì¹™ì„ ìˆœì°¨ íƒìƒ‰ â†’ ì§€ì—° ì¦ê°€

2. **ì „ì²´ í…Œì´ë¸” ì¬ì‘ì„±**
   - Endpoint í•˜ë‚˜ê°€ ë³€ê²½ë˜ì–´ë„ ì „ì²´ iptables ê·œì¹™ì„ ì¬ì‘ì„±
   - 1000ê°œ Service Ã— 10ê°œ Endpoint = ìˆ˜ë§Œ ê°œ ê·œì¹™

3. **conntrack í…Œì´ë¸” ë¶€í•˜**
   - ëª¨ë“  ì—°ê²°ì— ëŒ€í•œ ìƒíƒœ ì¶”ì 
   - ê³ ë¶€í•˜ ì‹œ í…Œì´ë¸” ì˜¤ë²„í”Œë¡œìš° ê°€ëŠ¥

**ê·œëª¨ë³„ ì„±ëŠ¥:**
```
Services | iptables ê·œì¹™ | ê·œì¹™ ì—…ë°ì´íŠ¸ ì‹œê°„
---------|---------------|------------------
100      | ~2,000       | < 1ì´ˆ
1,000    | ~20,000      | ìˆ˜ ì´ˆ
5,000    | ~100,000     | ìˆ˜ì‹­ ì´ˆ
```

**ëŒ€ì•ˆ:**
- **IPVS ëª¨ë“œ**: í•´ì‹œ í…Œì´ë¸” ê¸°ë°˜ O(1) ë£©ì—…
- **Cilium eBPF**: kube-proxy ì™„ì „ ëŒ€ì²´, ì»¤ë„ ë‚´ ì²˜ë¦¬

</details>

---

### ì§ˆë¬¸ 7: Pod ë‚´ ì»¨í…Œì´ë„ˆë“¤ì´ localhostë¡œ í†µì‹  ê°€ëŠ¥í•œ ì´ìœ ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**Pod ë‚´ ì»¨í…Œì´ë„ˆëŠ” ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.**

**Pod êµ¬ì¡°:**
```
Pod
â”œâ”€â”€ pause ì»¨í…Œì´ë„ˆ (ì¸í”„ë¼ ì»¨í…Œì´ë„ˆ)
â”‚   â””â”€â”€ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì†Œìœ 
â”œâ”€â”€ ì»¨í…Œì´ë„ˆ A
â”‚   â””â”€â”€ pauseì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê³µìœ 
â””â”€â”€ ì»¨í…Œì´ë„ˆ B
    â””â”€â”€ pauseì˜ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê³µìœ 
```

**ê³µìœ ë˜ëŠ” ê²ƒ:**
- ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (ë™ì¼í•œ IP, í¬íŠ¸ ê³µê°„)
- IPC ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ )
- UTS ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (í˜¸ìŠ¤íŠ¸ë„¤ì„)

**ê³µìœ ë˜ì§€ ì•ŠëŠ” ê²ƒ:**
- PID ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (ê¸°ë³¸ê°’, ê³µìœ  ê°€ëŠ¥)
- íŒŒì¼ì‹œìŠ¤í…œ (Volumeìœ¼ë¡œ ëª…ì‹œì  ê³µìœ  í•„ìš”)

**ê²°ê³¼:**
- ì»¨í…Œì´ë„ˆ Aê°€ :8080, ì»¨í…Œì´ë„ˆ Bê°€ :3000 ì‚¬ìš© ì‹œ
- Aì—ì„œ `curl localhost:3000`ìœ¼ë¡œ B ì ‘ê·¼ ê°€ëŠ¥
- ê°™ì€ í¬íŠ¸ ì‚¬ìš©ì€ ë¶ˆê°€ (ì¶©ëŒ)

</details>

---

### ì§ˆë¬¸ 8: etcdì—ì„œ "ì¿¼ëŸ¼"ì´ ì¤‘ìš”í•œ ì´ìœ ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ì¿¼ëŸ¼(Quorum)**: ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ê²°ì •ì„ ë‚´ë¦¬ê¸° ìœ„í•´ í•„ìš”í•œ ìµœì†Œ ë…¸ë“œ ìˆ˜

**Raft í•©ì˜ì—ì„œ ì¿¼ëŸ¼ì´ ì¤‘ìš”í•œ ì´ìœ :**

1. **ë°ì´í„° ì¼ê´€ì„± ë³´ì¥**
   - ì“°ê¸° ì—°ì‚°ì€ ê³¼ë°˜ìˆ˜(quorum) ë…¸ë“œì— ë³µì œë˜ì–´ì•¼ ì™„ë£Œ
   - ë„¤íŠ¸ì›Œí¬ ë¶„í•  ì‹œì—ë„ í•˜ë‚˜ì˜ íŒŒí‹°ì…˜ë§Œ ì“°ê¸° ê°€ëŠ¥

2. **Split-brain ë°©ì§€**
   - ì¿¼ëŸ¼ ì—†ì´ ë‘ íŒŒí‹°ì…˜ì´ ë…ë¦½ì ìœ¼ë¡œ ì“°ê¸° í—ˆìš©í•˜ë©´ ë°ì´í„° ë¶ˆì¼ì¹˜
   - ì¿¼ëŸ¼ ìš”êµ¬ ì‹œ í•œìª½ë§Œ ì“°ê¸° ê°€ëŠ¥ (ë‚˜ë¨¸ì§€ëŠ” ì½ê¸° ì „ìš©)

**ë…¸ë“œ ìˆ˜ë³„ ì¿¼ëŸ¼:**
```
ë…¸ë“œ ìˆ˜ | ì¿¼ëŸ¼ | í—ˆìš© ì¥ì•  ë…¸ë“œ
--------|------|---------------
1       | 1    | 0 (HA ì•„ë‹˜)
3       | 2    | 1
5       | 3    | 2
7       | 4    | 3
```

**ì™œ í™€ìˆ˜?**
- 3ë…¸ë“œ: ì¿¼ëŸ¼ 2, 1ë…¸ë“œ ì¥ì•  í—ˆìš©
- 4ë…¸ë“œ: ì¿¼ëŸ¼ 3, 1ë…¸ë“œ ì¥ì•  í—ˆìš© (3ë…¸ë“œì™€ ë™ì¼í•œ ê°€ìš©ì„±, ë¹„ìš©ë§Œ ì¦ê°€)

</details>

---

### ì§ˆë¬¸ 9: PVì˜ reclaimPolicyê°€ Deleteì™€ Retainì¼ ë•Œ ì°¨ì´ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**Delete (ê¸°ë³¸ê°’, ë™ì  í”„ë¡œë¹„ì €ë‹)**
- PVC ì‚­ì œ ì‹œ PVë„ ìë™ ì‚­ì œ
- ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€ì˜ ì‹¤ì œ ë³¼ë¥¨ë„ ì‚­ì œë¨
- ë°ì´í„° ì™„ì „ ì†ì‹¤
- ìš©ë„: ì„ì‹œ ë°ì´í„°, ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½

**Retain**
- PVC ì‚­ì œ ì‹œ PVëŠ” "Released" ìƒíƒœë¡œ ë‚¨ìŒ
- ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€ì˜ ë³¼ë¥¨ì€ ìœ ì§€ë¨
- ë°ì´í„° ë³´ì¡´
- ê´€ë¦¬ìê°€ ìˆ˜ë™ìœ¼ë¡œ PV ì‚­ì œ/ì¬ì‚¬ìš© ê²°ì •
- ìš©ë„: í”„ë¡œë•ì…˜ ë°ì´í„°, ë°±ì—… í•„ìš”í•œ ë°ì´í„°

**Recycle (Deprecated)**
- PVC ì‚­ì œ ì‹œ PV ë‚´ìš©ì„ ì‚­ì œí•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•¨
- ë” ì´ìƒ ê¶Œì¥ë˜ì§€ ì•ŠìŒ (ë™ì  í”„ë¡œë¹„ì €ë‹ ì‚¬ìš© ê¶Œì¥)

**ì„¤ì • ì˜ˆì‹œ:**
```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: production-ssd
reclaimPolicy: Retain  # í”„ë¡œë•ì…˜ ë°ì´í„° ë³´í˜¸
```

</details>

---

### ì§ˆë¬¸ 10: Controller Managerì˜ ë¦¬ë” ì„ ì¶œì´ í•„ìš”í•œ ì´ìœ ëŠ”?

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ë¦¬ë” ì„ ì¶œì´ í•„ìš”í•œ ì´ìœ :**

Controller Managerì™€ SchedulerëŠ” **ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ”(stateful) ì»´í¬ë„ŒíŠ¸**ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì‹œì— ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ ì¶©ëŒì´ ë°œìƒí•©ë‹ˆë‹¤.

**ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤ (ë¦¬ë” ì„ ì¶œ ì—†ì´):**
```
Deployment: replicas=3, í˜„ì¬ Pod=2

Controller 1: "1ê°œ ë¶€ì¡±, Pod ìƒì„±"
Controller 2: "1ê°œ ë¶€ì¡±, Pod ìƒì„±"

ê²°ê³¼: Pod 4ê°œ ìƒì„±ë¨ (ì›í•˜ëŠ” ìƒíƒœ ìœ„ë°˜!)
```

**ë¦¬ë” ì„ ì¶œ ë©”ì»¤ë‹ˆì¦˜:**
- ConfigMap ë˜ëŠ” Lease ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•œ ë¦¬ë” ì„ ì¶œ
- ë¦¬ë”ë§Œ ì‹¤ì œ ì‘ì—… ìˆ˜í–‰
- ë‚˜ë¨¸ì§€ëŠ” ëŒ€ê¸° (Standby)
- ë¦¬ë” ì¥ì•  ì‹œ ë¹ ë¥´ê²Œ ìƒˆ ë¦¬ë” ì„ ì¶œ (ìˆ˜ ì´ˆ ì´ë‚´)

**ë¦¬ë” í™•ì¸:**
```bash
kubectl get lease -n kube-system kube-controller-manager -o yaml
# holderIdentity í•„ë“œì—ì„œ í˜„ì¬ ë¦¬ë” í™•ì¸
```

**API ServerëŠ” ë¦¬ë” ì„ ì¶œ ë¶ˆí•„ìš”:**
- Stateless (ì½ê¸°/ì“°ê¸°ë¥¼ etcdì— ìœ„ì„)
- ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì‹œì— ìš”ì²­ ì²˜ë¦¬í•´ë„ OK
- etcdì˜ ë‚™ê´€ì  ë™ì‹œì„±ì´ ì¶©ëŒ ë°©ì§€

</details>

---

## ë‹¤ìŒ ë‹¨ê³„

ì´ ì¥ì—ì„œ Kubernetesì˜ í•µì‹¬ ì•„í‚¤í…ì²˜ë¥¼ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì¥ì—ì„œëŠ” **ë¶„ì‚° ì‹œìŠ¤í…œì˜ ì´ë¡ ê³¼ etcd**ë¥¼ ì‹¬ì¸µì ìœ¼ë¡œ ë‹¤ë£¹ë‹ˆë‹¤:

- **CAP ì •ë¦¬**: ë¶„ì‚° ì‹œìŠ¤í…œì˜ ê·¼ë³¸ì ì¸ íŠ¸ë ˆì´ë“œì˜¤í”„
- **Raft í•©ì˜ ì•Œê³ ë¦¬ì¦˜**: etcdê°€ ì‚¬ìš©í•˜ëŠ” ë¶„ì‚° í•©ì˜ ë©”ì»¤ë‹ˆì¦˜
- **ë¦¬ë” ì„ ì¶œ**: ë¦¬ë”ê°€ ì–´ë–»ê²Œ ì„ ì¶œë˜ê³  ì¥ì•  ì‹œ ì–´ë–»ê²Œ ë³µêµ¬ë˜ëŠ”ê°€
- **ë¡œê·¸ ë³µì œ**: ë°ì´í„°ê°€ ì–´ë–»ê²Œ ì—¬ëŸ¬ ë…¸ë“œì— ì¼ê´€ë˜ê²Œ ë³µì œë˜ëŠ”ê°€
- **etcd ìš´ì˜**: ë°±ì—…, ë³µêµ¬, ì„±ëŠ¥ íŠœë‹

Kubernetesì˜ ëª¨ë“  ìƒíƒœëŠ” etcdì— ì €ì¥ë©ë‹ˆë‹¤. etcdë¥¼ ì´í•´í•˜ë©´ í´ëŸ¬ìŠ¤í„° ì¥ì•  ë³µêµ¬ì™€ ë°ì´í„° ì¼ê´€ì„± ë¬¸ì œë¥¼ ê·¼ë³¸ì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ

- [Kubernetes Architecture](https://kubernetes.io/docs/concepts/architecture/)
- [Kubernetes Components](https://kubernetes.io/docs/concepts/overview/components/)
- [kube-scheduler](https://kubernetes.io/docs/concepts/scheduling-eviction/kube-scheduler/)
- [Service](https://kubernetes.io/docs/concepts/services-networking/service/)
- [Persistent Volumes](https://kubernetes.io/docs/concepts/storage/persistent-volumes/)

### ì‹¬í™” í•™ìŠµ

- [Kubernetes: Up and Running (O'Reilly)](https://www.oreilly.com/library/view/kubernetes-up-and/9781098110192/)
- [Programming Kubernetes (O'Reilly)](https://www.oreilly.com/library/view/programming-kubernetes/9781492047094/)
- [Kubernetes Patterns (O'Reilly)](https://www.oreilly.com/library/view/kubernetes-patterns/9781492050278/)

### ì†ŒìŠ¤ ì½”ë“œ

- [kubernetes/kubernetes](https://github.com/kubernetes/kubernetes)
- [kubernetes/kube-scheduler](https://github.com/kubernetes/kubernetes/tree/master/pkg/scheduler)
- [kubernetes/controller-manager](https://github.com/kubernetes/kubernetes/tree/master/pkg/controller)

### ë„êµ¬

- `kubectl describe` - ë¦¬ì†ŒìŠ¤ ìƒì„¸ ì •ë³´ ë° ì´ë²¤íŠ¸
- `kubectl logs` - ì»´í¬ë„ŒíŠ¸ ë¡œê·¸
- `kubectl get --raw` - API Server ì§ì ‘ ì¡°íšŒ
- `etcdctl` - etcd ì§ì ‘ ê´€ë¦¬ (ì£¼ì˜í•´ì„œ ì‚¬ìš©)
- `crictl` - Container Runtime ë””ë²„ê¹…

---

> **ğŸ’¡ íŒ (Tip)**: Kubernetes ì•„í‚¤í…ì²˜ë¥¼ ì™„ì „íˆ ì´í•´í•˜ë ¤ë©´ ì‹¤ì œ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì»´í¬ë„ŒíŠ¸ ë¡œê·¸ë¥¼ ì½ê³  ë””ë²„ê¹…í•´ë³´ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ìŠµë‹ˆë‹¤. ì˜ë„ì ìœ¼ë¡œ ì¥ì• ë¥¼ ë°œìƒì‹œí‚¤ê³  (ë…¸ë“œ shutdown, Pod ì‚­ì œ ë“±) í´ëŸ¬ìŠ¤í„°ê°€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ëŠ”ì§€ ê´€ì°°í•˜ì„¸ìš”. ì´ë¡ ê³¼ ì‹¤ìŠµì˜ ì¡°í•©ì´ ê¹Šì€ ì´í•´ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.
